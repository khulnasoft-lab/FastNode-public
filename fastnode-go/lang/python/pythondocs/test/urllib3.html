<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>urllib3 1.10.2 documentation</title>
    
    <link rel="stylesheet" href="_static/nature.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/css/badge_only.css" type="text/css" />
    <link rel="stylesheet" href="https://media.readthedocs.org/css/readthedocs-doc-embed.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '1.10.2',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="https://media.readthedocs.org/javascript/jquery/jquery-2.0.3.min.js"></script>
    <script type="text/javascript" src="https://media.readthedocs.org/javascript/jquery/jquery-migrate-1.2.1.min.js"></script>
    <script type="text/javascript" src="https://media.readthedocs.org/javascript/underscore.js"></script>
    <script type="text/javascript" src="https://media.readthedocs.org/javascript/doctools.js"></script>
    <script type="text/javascript" src="https://media.readthedocs.org/javascript/readthedocs-doc-embed.js"></script>
    <link rel="top" title="None" href="index.html#document-index" />
 
<!-- RTD Extra Head -->



  
  <!-- 
  Always link to the latest version, as canonical.
  http://docs.readthedocs.org/en/latest/canonical.html
  -->
  <link rel="canonical" href="https://urllib3.readthedocs.org/en/latest/" />
  

<script type="text/javascript">
  // This is included here because other places don't have access to the pagename variable.
  var READTHEDOCS_DATA = {
    project: "urllib3",
    version: "latest",
    language: "en",
    page: "index",
    builder: "sphinx",
    theme: "nature",
    docroot: "/docs/",
    source_suffix: ".rst",
    api_host: "https://readthedocs.org",
    commit: "5f3fce4d00c09d582e79b44bdfaf958d76c3a99f"
  }
  // Old variables
  var doc_version = "latest";
  var doc_slug = "urllib3";
  var page_name = "index";
  var html_theme = "nature";
</script>
<!-- RTD Analytics Code -->
<!-- Included in the header because you don't have a footer block. -->
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-17997319-1']);
  _gaq.push(['_trackPageview']);

  // User Analytics Code
  _gaq.push(['user._setAccount', 'UA-407051-13']);
  _gaq.push(['user._trackPageview']);
  // End User Analytics Code


  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>
<!-- end RTD Analytics Code -->
<!-- end RTD <extrahead> -->

  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li><a href="index.html#document-index">urllib3 1.10.2 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="urllib3-documentation">
<h1>urllib3 Documentation<a class="headerlink" href="#urllib3-documentation" title="Permalink to this headline">¶</a></h1>
<div class="toctree-wrapper compound">
<span id="document-pools"></span><div class="section" id="module-urllib3.connectionpool">
<span id="connectionpools"></span><h2>ConnectionPools<a class="headerlink" href="#module-urllib3.connectionpool" title="Permalink to this headline">¶</a></h2>
<p>A connection pool is a container for a collection of connections to a specific
host.</p>
<p>If you need to make requests to the same host repeatedly, then you should use a
<a class="reference internal" href="index.html#urllib3.connectionpool.HTTPConnectionPool" title="urllib3.connectionpool.HTTPConnectionPool"><tt class="xref py py-class docutils literal"><span class="pre">HTTPConnectionPool</span></tt></a>.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">urllib3</span> <span class="kn">import</span> <span class="n">HTTPConnectionPool</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pool</span> <span class="o">=</span> <span class="n">HTTPConnectionPool</span><span class="p">(</span><span class="s">&#39;ajax.googleapis.com&#39;</span><span class="p">,</span> <span class="n">maxsize</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">r</span> <span class="o">=</span> <span class="n">pool</span><span class="o">.</span><span class="n">request</span><span class="p">(</span><span class="s">&#39;GET&#39;</span><span class="p">,</span> <span class="s">&#39;/ajax/services/search/web&#39;</span><span class="p">,</span>
<span class="gp">... </span>                 <span class="n">fields</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;q&#39;</span><span class="p">:</span> <span class="s">&#39;urllib3&#39;</span><span class="p">,</span> <span class="s">&#39;v&#39;</span><span class="p">:</span> <span class="s">&#39;1.0&#39;</span><span class="p">})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">r</span><span class="o">.</span><span class="n">status</span>
<span class="go">200</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">r</span><span class="o">.</span><span class="n">headers</span><span class="p">[</span><span class="s">&#39;content-type&#39;</span><span class="p">]</span>
<span class="go">&#39;text/javascript; charset=utf-8&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="s">&#39;data: &#39;</span> <span class="o">+</span> <span class="n">r</span><span class="o">.</span><span class="n">data</span> <span class="c"># Content of the response</span>
<span class="go">&#39;data: ...&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">r</span> <span class="o">=</span> <span class="n">pool</span><span class="o">.</span><span class="n">request</span><span class="p">(</span><span class="s">&#39;GET&#39;</span><span class="p">,</span> <span class="s">&#39;/ajax/services/search/web&#39;</span><span class="p">,</span>
<span class="gp">... </span>                 <span class="n">fields</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;q&#39;</span><span class="p">:</span> <span class="s">&#39;python&#39;</span><span class="p">,</span> <span class="s">&#39;v&#39;</span><span class="p">:</span> <span class="s">&#39;1.0&#39;</span><span class="p">})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="s">&#39;data: &#39;</span> <span class="o">+</span> <span class="n">r</span><span class="o">.</span><span class="n">data</span> <span class="c"># Content of the response</span>
<span class="go">&#39;data: ...&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pool</span><span class="o">.</span><span class="n">num_connections</span>
<span class="go">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pool</span><span class="o">.</span><span class="n">num_requests</span>
<span class="go">2</span>
</pre></div>
</div>
<p>By default, the pool will cache just one connection. If you&#8217;re planning on using
such a pool in a multithreaded environment, you should set the <tt class="docutils literal"><span class="pre">maxsize</span></tt> of
the pool to a higher number, such as the number of threads. You can also control
many other variables like timeout, blocking, and default headers.</p>
<p>A ConnectionPool can be used as a context manager to automatically clear the
pool after usage.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">urllib3</span> <span class="kn">import</span> <span class="n">HTTPConnectionPool</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="n">HTTPConnectionPool</span><span class="p">(</span><span class="s">&#39;ajax.googleapis.com&#39;</span><span class="p">,</span> <span class="n">maxsize</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span> <span class="k">as</span> <span class="n">pool</span><span class="p">:</span>
<span class="gp">... </span>    <span class="n">r</span> <span class="o">=</span> <span class="n">pool</span><span class="o">.</span><span class="n">request</span><span class="p">(</span><span class="s">&#39;GET&#39;</span><span class="p">,</span> <span class="s">&#39;/ajax/services/search/web&#39;</span><span class="p">,</span>
<span class="gp">... </span>                     <span class="n">fields</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;q&#39;</span><span class="p">:</span> <span class="s">&#39;urllib3&#39;</span><span class="p">,</span> <span class="s">&#39;v&#39;</span><span class="p">:</span> <span class="s">&#39;1.0&#39;</span><span class="p">})</span>
<span class="gp">... </span>    <span class="k">print</span><span class="p">(</span><span class="n">pool</span><span class="o">.</span><span class="n">pool</span><span class="p">)</span>
<span class="gp">...</span>
<span class="go">&lt;queue.LifoQueue object at 0x7f67367dfcf8&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span><span class="p">(</span><span class="n">pool</span><span class="o">.</span><span class="n">pool</span><span class="p">)</span>
<span class="go">None</span>
</pre></div>
</div>
<div class="section" id="helpers">
<h3>Helpers<a class="headerlink" href="#helpers" title="Permalink to this headline">¶</a></h3>
<p>There are various helper functions provided for instantiating these
ConnectionPools more easily:</p>
<blockquote>
<div><dl class="function">
<dt id="urllib3.connectionpool.connection_from_url">
<tt class="descclassname">urllib3.connectionpool.</tt><tt class="descname">connection_from_url</tt><big>(</big><em>url</em>, <em>**kw</em><big>)</big><a class="headerlink" href="#urllib3.connectionpool.connection_from_url" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a url, return an <a class="reference internal" href="index.html#urllib3.connectionpool.ConnectionPool" title="urllib3.connectionpool.ConnectionPool"><tt class="xref py py-class docutils literal"><span class="pre">ConnectionPool</span></tt></a> instance of its host.</p>
<p>This is a shortcut for not having to parse out the scheme, host, and port
of the url before creating an <a class="reference internal" href="index.html#urllib3.connectionpool.ConnectionPool" title="urllib3.connectionpool.ConnectionPool"><tt class="xref py py-class docutils literal"><span class="pre">ConnectionPool</span></tt></a> instance.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>url</strong> &#8211; Absolute URL string that must include the scheme. Port is optional.</li>
<li><strong>**kw</strong> &#8211; Passes additional parameters to the constructor of the appropriate
<a class="reference internal" href="index.html#urllib3.connectionpool.ConnectionPool" title="urllib3.connectionpool.ConnectionPool"><tt class="xref py py-class docutils literal"><span class="pre">ConnectionPool</span></tt></a>. Useful for specifying things like
timeout, maxsize, headers, etc.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>Example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">conn</span> <span class="o">=</span> <span class="n">connection_from_url</span><span class="p">(</span><span class="s">&#39;http://google.com/&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">r</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">request</span><span class="p">(</span><span class="s">&#39;GET&#39;</span><span class="p">,</span> <span class="s">&#39;/&#39;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

</div></blockquote>
</div>
<div class="section" id="api">
<h3>API<a class="headerlink" href="#api" title="Permalink to this headline">¶</a></h3>
<p><a class="reference internal" href="index.html#module-urllib3.connectionpool" title="urllib3.connectionpool"><tt class="xref py py-mod docutils literal"><span class="pre">urllib3.connectionpool</span></tt></a> comes with two connection pools:</p>
<blockquote>
<div><dl class="class">
<dt id="urllib3.connectionpool.HTTPConnectionPool">
<em class="property">class </em><tt class="descclassname">urllib3.connectionpool.</tt><tt class="descname">HTTPConnectionPool</tt><big>(</big><em>host</em>, <em>port=None</em>, <em>strict=False</em>, <em>timeout=&lt;object object at 0x7f42c1d23240&gt;</em>, <em>maxsize=1</em>, <em>block=False</em>, <em>headers=None</em>, <em>retries=None</em>, <em>_proxy=None</em>, <em>_proxy_headers=None</em>, <em>**conn_kw</em><big>)</big><a class="headerlink" href="#urllib3.connectionpool.HTTPConnectionPool" title="Permalink to this definition">¶</a></dt>
<dd><p>Thread-safe connection pool for one host.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>host</strong> &#8211; Host used for this HTTP Connection (e.g. &#8220;localhost&#8221;), passed into
<a class="reference external" href="http://docs.python.org/2.7/library/httplib.html#httplib.HTTPConnection" title="(in Python v2.7)"><tt class="xref py py-class docutils literal"><span class="pre">httplib.HTTPConnection</span></tt></a>.</li>
<li><strong>port</strong> &#8211; Port used for this HTTP Connection (None is equivalent to 80), passed
into <a class="reference external" href="http://docs.python.org/2.7/library/httplib.html#httplib.HTTPConnection" title="(in Python v2.7)"><tt class="xref py py-class docutils literal"><span class="pre">httplib.HTTPConnection</span></tt></a>.</li>
<li><strong>strict</strong> &#8211; <p>Causes BadStatusLine to be raised if the status line can&#8217;t be parsed
as a valid HTTP/1.0 or 1.1 status line, passed into
<a class="reference external" href="http://docs.python.org/2.7/library/httplib.html#httplib.HTTPConnection" title="(in Python v2.7)"><tt class="xref py py-class docutils literal"><span class="pre">httplib.HTTPConnection</span></tt></a>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Only works in Python 2. This parameter is ignored in Python 3.</p>
</div>
</li>
<li><strong>timeout</strong> &#8211; Socket timeout in seconds for each individual connection. This can
be a float or integer, which sets the timeout for the HTTP request,
or an instance of <tt class="xref py py-class docutils literal"><span class="pre">urllib3.util.Timeout</span></tt> which gives you more
fine-grained control over request timeouts. After the constructor has
been parsed, this is always a <cite>urllib3.util.Timeout</cite> object.</li>
<li><strong>maxsize</strong> &#8211; Number of connections to save that can be reused. More than 1 is useful
in multithreaded situations. If <tt class="docutils literal"><span class="pre">block</span></tt> is set to false, more
connections will be created but they will not be saved once they&#8217;ve
been used.</li>
<li><strong>block</strong> &#8211; If set to True, no more than <tt class="docutils literal"><span class="pre">maxsize</span></tt> connections will be used at
a time. When no free connections are available, the call will block
until a connection has been released. This is a useful side effect for
particular multithreaded situations where one does not want to use more
than maxsize connections per host to prevent flooding.</li>
<li><strong>headers</strong> &#8211; Headers to include with all requests, unless other headers are given
explicitly.</li>
<li><strong>retries</strong> &#8211; Retry configuration to use by default with requests in this pool.</li>
<li><strong>_proxy</strong> &#8211; Parsed proxy URL, should not be used directly, instead, see
<tt class="xref py py-class docutils literal"><span class="pre">urllib3.connectionpool.ProxyManager</span></tt>&#8220;</li>
<li><strong>_proxy_headers</strong> &#8211; A dictionary with proxy headers, should not be used directly,
instead, see <tt class="xref py py-class docutils literal"><span class="pre">urllib3.connectionpool.ProxyManager</span></tt>&#8220;</li>
<li><strong>**conn_kw</strong> &#8211; Additional parameters are used to create fresh <a class="reference internal" href="index.html#urllib3.connection.HTTPConnection" title="urllib3.connection.HTTPConnection"><tt class="xref py py-class docutils literal"><span class="pre">urllib3.connection.HTTPConnection</span></tt></a>,
<tt class="xref py py-class docutils literal"><span class="pre">urllib3.connection.HTTPSConnection</span></tt> instances.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="attribute">
<dt id="urllib3.connectionpool.HTTPConnectionPool.ConnectionCls">
<tt class="descname">ConnectionCls</tt><a class="headerlink" href="#urllib3.connectionpool.HTTPConnectionPool.ConnectionCls" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <tt class="xref py py-class docutils literal"><span class="pre">HTTPConnection</span></tt></p>
</dd></dl>

<dl class="attribute">
<dt id="urllib3.connectionpool.HTTPConnectionPool.QueueCls">
<tt class="descname">QueueCls</tt><a class="headerlink" href="#urllib3.connectionpool.HTTPConnectionPool.QueueCls" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <tt class="xref py py-class docutils literal"><span class="pre">LifoQueue</span></tt></p>
</dd></dl>

<dl class="method">
<dt id="urllib3.connectionpool.HTTPConnectionPool.close">
<tt class="descname">close</tt><big>(</big><big>)</big><a class="headerlink" href="#urllib3.connectionpool.HTTPConnectionPool.close" title="Permalink to this definition">¶</a></dt>
<dd><p>Close all pooled connections and disable the pool.</p>
</dd></dl>

<dl class="method">
<dt id="urllib3.connectionpool.HTTPConnectionPool.is_same_host">
<tt class="descname">is_same_host</tt><big>(</big><em>url</em><big>)</big><a class="headerlink" href="#urllib3.connectionpool.HTTPConnectionPool.is_same_host" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if the given <tt class="docutils literal"><span class="pre">url</span></tt> is a member of the same host as this
connection pool.</p>
</dd></dl>

<dl class="method">
<dt id="urllib3.connectionpool.HTTPConnectionPool.request">
<tt class="descname">request</tt><big>(</big><em>method</em>, <em>url</em>, <em>fields=None</em>, <em>headers=None</em>, <em>**urlopen_kw</em><big>)</big><a class="headerlink" href="#urllib3.connectionpool.HTTPConnectionPool.request" title="Permalink to this definition">¶</a></dt>
<dd><p>Make a request using <a class="reference internal" href="index.html#urllib3.connectionpool.HTTPConnectionPool.urlopen" title="urllib3.connectionpool.HTTPConnectionPool.urlopen"><tt class="xref py py-meth docutils literal"><span class="pre">urlopen()</span></tt></a> with the appropriate encoding of
<tt class="docutils literal"><span class="pre">fields</span></tt> based on the <tt class="docutils literal"><span class="pre">method</span></tt> used.</p>
<p>This is a convenience method that requires the least amount of manual
effort. It can be used in most situations, while still having the
option to drop down to more specific methods when necessary, such as
<a class="reference internal" href="index.html#urllib3.connectionpool.HTTPConnectionPool.request_encode_url" title="urllib3.connectionpool.HTTPConnectionPool.request_encode_url"><tt class="xref py py-meth docutils literal"><span class="pre">request_encode_url()</span></tt></a>, <a class="reference internal" href="index.html#urllib3.connectionpool.HTTPConnectionPool.request_encode_body" title="urllib3.connectionpool.HTTPConnectionPool.request_encode_body"><tt class="xref py py-meth docutils literal"><span class="pre">request_encode_body()</span></tt></a>,
or even the lowest level <a class="reference internal" href="index.html#urllib3.connectionpool.HTTPConnectionPool.urlopen" title="urllib3.connectionpool.HTTPConnectionPool.urlopen"><tt class="xref py py-meth docutils literal"><span class="pre">urlopen()</span></tt></a>.</p>
</dd></dl>

<dl class="method">
<dt id="urllib3.connectionpool.HTTPConnectionPool.request_encode_body">
<tt class="descname">request_encode_body</tt><big>(</big><em>method</em>, <em>url</em>, <em>fields=None</em>, <em>headers=None</em>, <em>encode_multipart=True</em>, <em>multipart_boundary=None</em>, <em>**urlopen_kw</em><big>)</big><a class="headerlink" href="#urllib3.connectionpool.HTTPConnectionPool.request_encode_body" title="Permalink to this definition">¶</a></dt>
<dd><p>Make a request using <a class="reference internal" href="index.html#urllib3.connectionpool.HTTPConnectionPool.urlopen" title="urllib3.connectionpool.HTTPConnectionPool.urlopen"><tt class="xref py py-meth docutils literal"><span class="pre">urlopen()</span></tt></a> with the <tt class="docutils literal"><span class="pre">fields</span></tt> encoded in
the body. This is useful for request methods like POST, PUT, PATCH, etc.</p>
<p>When <tt class="docutils literal"><span class="pre">encode_multipart=True</span></tt> (default), then
<a class="reference internal" href="index.html#urllib3.filepost.encode_multipart_formdata" title="urllib3.filepost.encode_multipart_formdata"><tt class="xref py py-meth docutils literal"><span class="pre">urllib3.filepost.encode_multipart_formdata()</span></tt></a> is used to encode
the payload with the appropriate content type. Otherwise
<tt class="xref py py-meth docutils literal"><span class="pre">urllib.urlencode()</span></tt> is used with the
&#8216;application/x-www-form-urlencoded&#8217; content type.</p>
<p>Multipart encoding must be used when posting files, and it&#8217;s reasonably
safe to use it in other times too. However, it may break request
signing, such as with OAuth.</p>
<p>Supports an optional <tt class="docutils literal"><span class="pre">fields</span></tt> parameter of key/value strings AND
key/filetuple. A filetuple is a (filename, data, MIME type) tuple where
the MIME type is optional. For example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">fields</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">&#39;foo&#39;</span><span class="p">:</span> <span class="s">&#39;bar&#39;</span><span class="p">,</span>
    <span class="s">&#39;fakefile&#39;</span><span class="p">:</span> <span class="p">(</span><span class="s">&#39;foofile.txt&#39;</span><span class="p">,</span> <span class="s">&#39;contents of foofile&#39;</span><span class="p">),</span>
    <span class="s">&#39;realfile&#39;</span><span class="p">:</span> <span class="p">(</span><span class="s">&#39;barfile.txt&#39;</span><span class="p">,</span> <span class="nb">open</span><span class="p">(</span><span class="s">&#39;realfile&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">read</span><span class="p">()),</span>
    <span class="s">&#39;typedfile&#39;</span><span class="p">:</span> <span class="p">(</span><span class="s">&#39;bazfile.bin&#39;</span><span class="p">,</span> <span class="nb">open</span><span class="p">(</span><span class="s">&#39;bazfile&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">read</span><span class="p">(),</span>
                  <span class="s">&#39;image/jpeg&#39;</span><span class="p">),</span>
    <span class="s">&#39;nonamefile&#39;</span><span class="p">:</span> <span class="s">&#39;contents of nonamefile field&#39;</span><span class="p">,</span>
<span class="p">}</span>
</pre></div>
</div>
<p>When uploading a file, providing a filename (the first parameter of the
tuple) is optional but recommended to best mimick behavior of browsers.</p>
<p>Note that if <tt class="docutils literal"><span class="pre">headers</span></tt> are supplied, the &#8216;Content-Type&#8217; header will
be overwritten because it depends on the dynamic random boundary string
which is used to compose the body of the request. The random boundary
string can be explicitly set with the <tt class="docutils literal"><span class="pre">multipart_boundary</span></tt> parameter.</p>
</dd></dl>

<dl class="method">
<dt id="urllib3.connectionpool.HTTPConnectionPool.request_encode_url">
<tt class="descname">request_encode_url</tt><big>(</big><em>method</em>, <em>url</em>, <em>fields=None</em>, <em>**urlopen_kw</em><big>)</big><a class="headerlink" href="#urllib3.connectionpool.HTTPConnectionPool.request_encode_url" title="Permalink to this definition">¶</a></dt>
<dd><p>Make a request using <a class="reference internal" href="index.html#urllib3.connectionpool.HTTPConnectionPool.urlopen" title="urllib3.connectionpool.HTTPConnectionPool.urlopen"><tt class="xref py py-meth docutils literal"><span class="pre">urlopen()</span></tt></a> with the <tt class="docutils literal"><span class="pre">fields</span></tt> encoded in
the url. This is useful for request methods like GET, HEAD, DELETE, etc.</p>
</dd></dl>

<dl class="method">
<dt id="urllib3.connectionpool.HTTPConnectionPool.urlopen">
<tt class="descname">urlopen</tt><big>(</big><em>method</em>, <em>url</em>, <em>body=None</em>, <em>headers=None</em>, <em>retries=None</em>, <em>redirect=True</em>, <em>assert_same_host=True</em>, <em>timeout=&lt;object object at 0x7f42c1d23440&gt;</em>, <em>pool_timeout=None</em>, <em>release_conn=None</em>, <em>**response_kw</em><big>)</big><a class="headerlink" href="#urllib3.connectionpool.HTTPConnectionPool.urlopen" title="Permalink to this definition">¶</a></dt>
<dd><p>Get a connection from the pool and perform an HTTP request. This is the
lowest level call for making a request, so you&#8217;ll need to specify all
the raw details.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">More commonly, it&#8217;s appropriate to use a convenience method provided
by <a class="reference internal" href="index.html#urllib3.request.RequestMethods" title="urllib3.request.RequestMethods"><tt class="xref py py-class docutils literal"><span class="pre">RequestMethods</span></tt></a>, such as <a class="reference internal" href="index.html#urllib3.connectionpool.HTTPConnectionPool.request" title="urllib3.connectionpool.HTTPConnectionPool.request"><tt class="xref py py-meth docutils literal"><span class="pre">request()</span></tt></a>.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last"><cite>release_conn</cite> will only behave as expected if
<cite>preload_content=False</cite> because we want to make
<cite>preload_content=False</cite> the default behaviour someday soon without
breaking backwards compatibility.</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>method</strong> &#8211; HTTP request method (such as GET, POST, PUT, etc.)</li>
<li><strong>body</strong> &#8211; Data to send in the request body (useful for creating
POST requests, see HTTPConnectionPool.post_url for
more convenience).</li>
<li><strong>headers</strong> &#8211; Dictionary of custom headers to send, such as User-Agent,
If-None-Match, etc. If None, pool headers are used. If provided,
these headers completely replace any pool-specific headers.</li>
<li><strong>retries</strong> (<a class="reference internal" href="index.html#urllib3.util.retry.Retry" title="urllib3.util.retry.Retry"><tt class="xref py py-class docutils literal"><span class="pre">Retry</span></tt></a>, False, or an int.) &#8211; <p>Configure the number of retries to allow before raising a
<a class="reference internal" href="index.html#urllib3.exceptions.MaxRetryError" title="urllib3.exceptions.MaxRetryError"><tt class="xref py py-class docutils literal"><span class="pre">MaxRetryError</span></tt></a> exception.</p>
<p>Pass <tt class="docutils literal"><span class="pre">None</span></tt> to retry until you receive a response. Pass a
<a class="reference internal" href="index.html#urllib3.util.retry.Retry" title="urllib3.util.retry.Retry"><tt class="xref py py-class docutils literal"><span class="pre">Retry</span></tt></a> object for fine-grained control
over different types of retries.
Pass an integer number to retry connection errors that many times,
but no other types of errors. Pass zero to never retry.</p>
<p>If <tt class="docutils literal"><span class="pre">False</span></tt>, then retries are disabled and any exception is raised
immediately. Also, instead of raising a MaxRetryError on redirects,
the redirect response will be returned.</p>
</li>
<li><strong>redirect</strong> &#8211; If True, automatically handle redirects (status codes 301, 302,
303, 307, 308). Each redirect counts as a retry. Disabling retries
will disable redirect, too.</li>
<li><strong>assert_same_host</strong> &#8211; If <tt class="docutils literal"><span class="pre">True</span></tt>, will make sure that the host of the pool requests is
consistent else will raise HostChangedError. When False, you can
use the pool on an HTTP proxy and request foreign hosts.</li>
<li><strong>timeout</strong> &#8211; If specified, overrides the default timeout for this one
request. It may be a float (in seconds) or an instance of
<tt class="xref py py-class docutils literal"><span class="pre">urllib3.util.Timeout</span></tt>.</li>
<li><strong>pool_timeout</strong> &#8211; If set and the pool is set to block=True, then this method will
block for <tt class="docutils literal"><span class="pre">pool_timeout</span></tt> seconds and raise EmptyPoolError if no
connection is available within the time period.</li>
<li><strong>release_conn</strong> &#8211; If False, then the urlopen call will not release the connection
back into the pool once a response is received (but will release if
you read the entire contents of the response such as when
<cite>preload_content=True</cite>). This is useful if you&#8217;re not preloading
the response&#8217;s content immediately. You will need to call
<tt class="docutils literal"><span class="pre">r.release_conn()</span></tt> on the response <tt class="docutils literal"><span class="pre">r</span></tt> to return the connection
back into the pool. If None, it takes the value of
<tt class="docutils literal"><span class="pre">response_kw.get('preload_content',</span> <span class="pre">True)</span></tt>.</li>
<li><strong>**response_kw</strong> &#8211; Additional parameters are passed to
<a class="reference internal" href="index.html#urllib3.response.HTTPResponse.from_httplib" title="urllib3.response.HTTPResponse.from_httplib"><tt class="xref py py-meth docutils literal"><span class="pre">urllib3.response.HTTPResponse.from_httplib()</span></tt></a></li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="urllib3.connectionpool.HTTPSConnectionPool">
<em class="property">class </em><tt class="descclassname">urllib3.connectionpool.</tt><tt class="descname">HTTPSConnectionPool</tt><big>(</big><em>host</em>, <em>port=None</em>, <em>strict=False</em>, <em>timeout=&lt;object object at 0x7f42c1d23240&gt;</em>, <em>maxsize=1</em>, <em>block=False</em>, <em>headers=None</em>, <em>retries=None</em>, <em>_proxy=None</em>, <em>_proxy_headers=None</em>, <em>key_file=None</em>, <em>cert_file=None</em>, <em>cert_reqs=None</em>, <em>ca_certs=None</em>, <em>ssl_version=None</em>, <em>assert_hostname=None</em>, <em>assert_fingerprint=None</em>, <em>**conn_kw</em><big>)</big><a class="headerlink" href="#urllib3.connectionpool.HTTPSConnectionPool" title="Permalink to this definition">¶</a></dt>
<dd><p>Same as <a class="reference internal" href="index.html#urllib3.connectionpool.HTTPConnectionPool" title="urllib3.connectionpool.HTTPConnectionPool"><tt class="xref py py-class docutils literal"><span class="pre">HTTPConnectionPool</span></tt></a>, but HTTPS.</p>
<p>When Python is compiled with the <a class="reference external" href="http://docs.python.org/2.7/library/ssl.html#module-ssl" title="(in Python v2.7)"><tt class="xref py py-mod docutils literal"><span class="pre">ssl</span></tt></a> module, then
<tt class="xref py py-class docutils literal"><span class="pre">VerifiedHTTPSConnection</span></tt> is used, which <em>can</em> verify certificates,
instead of <tt class="xref py py-class docutils literal"><span class="pre">HTTPSConnection</span></tt>.</p>
<p><tt class="xref py py-class docutils literal"><span class="pre">VerifiedHTTPSConnection</span></tt> uses one of <tt class="docutils literal"><span class="pre">assert_fingerprint</span></tt>,
<tt class="docutils literal"><span class="pre">assert_hostname</span></tt> and <tt class="docutils literal"><span class="pre">host</span></tt> in this order to verify connections.
If <tt class="docutils literal"><span class="pre">assert_hostname</span></tt> is False, no verification is done.</p>
<p>The <tt class="docutils literal"><span class="pre">key_file</span></tt>, <tt class="docutils literal"><span class="pre">cert_file</span></tt>, <tt class="docutils literal"><span class="pre">cert_reqs</span></tt>, <tt class="docutils literal"><span class="pre">ca_certs</span></tt> and
<tt class="docutils literal"><span class="pre">ssl_version</span></tt> are only used if <a class="reference external" href="http://docs.python.org/2.7/library/ssl.html#module-ssl" title="(in Python v2.7)"><tt class="xref py py-mod docutils literal"><span class="pre">ssl</span></tt></a> is available and are fed into
<tt class="xref py py-meth docutils literal"><span class="pre">urllib3.util.ssl_wrap_socket()</span></tt> to upgrade the connection socket
into an SSL socket.</p>
</dd></dl>

</div></blockquote>
<p>All of these pools inherit from a common base class:</p>
<blockquote>
<div><dl class="class">
<dt id="urllib3.connectionpool.ConnectionPool">
<em class="property">class </em><tt class="descclassname">urllib3.connectionpool.</tt><tt class="descname">ConnectionPool</tt><big>(</big><em>host</em>, <em>port=None</em><big>)</big><a class="headerlink" href="#urllib3.connectionpool.ConnectionPool" title="Permalink to this definition">¶</a></dt>
<dd><p>Base class for all connection pools, such as
<a class="reference internal" href="index.html#urllib3.connectionpool.HTTPConnectionPool" title="urllib3.connectionpool.HTTPConnectionPool"><tt class="xref py py-class docutils literal"><span class="pre">HTTPConnectionPool</span></tt></a> and <a class="reference internal" href="index.html#urllib3.connectionpool.HTTPSConnectionPool" title="urllib3.connectionpool.HTTPSConnectionPool"><tt class="xref py py-class docutils literal"><span class="pre">HTTPSConnectionPool</span></tt></a>.</p>
</dd></dl>

</div></blockquote>
<span class="target" id="module-urllib3.connection"></span></div>
<div class="section" id="related-classes">
<h3>Related Classes<a class="headerlink" href="#related-classes" title="Permalink to this headline">¶</a></h3>
<p>urllib3 implements its own <a class="reference internal" href="index.html#urllib3.connection.HTTPConnection" title="urllib3.connection.HTTPConnection"><tt class="xref py py-class docutils literal"><span class="pre">HTTPConnection</span></tt></a> object to allow for more
flexibility than the standard library&#8217;s implementation.</p>
<dl class="class">
<dt id="urllib3.connection.HTTPConnection">
<em class="property">class </em><tt class="descclassname">urllib3.connection.</tt><tt class="descname">HTTPConnection</tt><big>(</big><em>*args</em>, <em>**kw</em><big>)</big><a class="headerlink" href="#urllib3.connection.HTTPConnection" title="Permalink to this definition">¶</a></dt>
<dd><p>Based on httplib.HTTPConnection but provides an extra constructor
backwards-compatibility layer between older and newer Pythons.</p>
<p>Additional keyword parameters are used to configure attributes of the connection.
Accepted parameters include:</p>
<blockquote>
<div><ul>
<li><p class="first"><tt class="docutils literal"><span class="pre">strict</span></tt>: See the documentation on <a class="reference internal" href="index.html#urllib3.connectionpool.HTTPConnectionPool" title="urllib3.connectionpool.HTTPConnectionPool"><tt class="xref py py-class docutils literal"><span class="pre">urllib3.connectionpool.HTTPConnectionPool</span></tt></a></p>
</li>
<li><p class="first"><tt class="docutils literal"><span class="pre">source_address</span></tt>: Set the source address for the current connection.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This is ignored for Python 2.6. It is only applied for 2.7 and 3.x</p>
</div>
</li>
<li><p class="first"><tt class="docutils literal"><span class="pre">socket_options</span></tt>: Set specific options on the underlying socket. If not specified, then
defaults are loaded from <tt class="docutils literal"><span class="pre">HTTPConnection.default_socket_options</span></tt> which includes disabling
Nagle&#8217;s algorithm (sets TCP_NODELAY to 1) unless the connection is behind a proxy.</p>
<p>For example, if you wish to enable TCP Keep Alive in addition to the defaults,
you might pass:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">HTTPConnection</span><span class="o">.</span><span class="n">default_socket_options</span> <span class="o">+</span> <span class="p">[</span>
    <span class="p">(</span><span class="n">socket</span><span class="o">.</span><span class="n">SOL_SOCKET</span><span class="p">,</span> <span class="n">socket</span><span class="o">.</span><span class="n">SO_KEEPALIVE</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
<span class="p">]</span>
</pre></div>
</div>
<p>Or you may want to disable the defaults by passing an empty list (e.g., <tt class="docutils literal"><span class="pre">[]</span></tt>).</p>
</li>
</ul>
</div></blockquote>
<dl class="attribute">
<dt id="urllib3.connection.HTTPConnection.default_socket_options">
<tt class="descname">default_socket_options</tt><em class="property"> = [(6, 1, 1)]</em><a class="headerlink" href="#urllib3.connection.HTTPConnection.default_socket_options" title="Permalink to this definition">¶</a></dt>
<dd><p>Disable Nagle&#8217;s algorithm by default.
<tt class="docutils literal"><span class="pre">[(socket.IPPROTO_TCP,</span> <span class="pre">socket.TCP_NODELAY,</span> <span class="pre">1)]</span></tt></p>
</dd></dl>

<dl class="attribute">
<dt id="urllib3.connection.HTTPConnection.is_verified">
<tt class="descname">is_verified</tt><em class="property"> = False</em><a class="headerlink" href="#urllib3.connection.HTTPConnection.is_verified" title="Permalink to this definition">¶</a></dt>
<dd><p>Whether this connection verifies the host&#8217;s certificate.</p>
</dd></dl>

<dl class="attribute">
<dt id="urllib3.connection.HTTPConnection.socket_options">
<tt class="descname">socket_options</tt><em class="property"> = None</em><a class="headerlink" href="#urllib3.connection.HTTPConnection.socket_options" title="Permalink to this definition">¶</a></dt>
<dd><p>The socket options provided by the user. If no options are
provided, we use the default options.</p>
</dd></dl>

</dd></dl>

</div>
</div>
<span id="document-managers"></span><div class="section" id="module-urllib3.poolmanager">
<span id="poolmanager"></span><h2>PoolManager<a class="headerlink" href="#module-urllib3.poolmanager" title="Permalink to this headline">¶</a></h2>
<p>A pool manager is an abstraction for a collection of
<a class="reference internal" href="index.html#document-pools"><em>ConnectionPools</em></a>.</p>
<p>If you need to make requests to multiple hosts, then you can use a
<a class="reference internal" href="index.html#urllib3.poolmanager.PoolManager" title="urllib3.poolmanager.PoolManager"><tt class="xref py py-class docutils literal"><span class="pre">PoolManager</span></tt></a>, which takes care of maintaining your pools
so you don&#8217;t have to.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">urllib3</span> <span class="kn">import</span> <span class="n">PoolManager</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">manager</span> <span class="o">=</span> <span class="n">PoolManager</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">r</span> <span class="o">=</span> <span class="n">manager</span><span class="o">.</span><span class="n">request</span><span class="p">(</span><span class="s">&#39;GET&#39;</span><span class="p">,</span> <span class="s">&#39;http://example.com&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">r</span><span class="o">.</span><span class="n">headers</span><span class="p">[</span><span class="s">&#39;server&#39;</span><span class="p">]</span>
<span class="go">&#39;ECS (iad/182A)&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">r</span> <span class="o">=</span> <span class="n">manager</span><span class="o">.</span><span class="n">request</span><span class="p">(</span><span class="s">&#39;GET&#39;</span><span class="p">,</span> <span class="s">&#39;http://httpbin.org/&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">r</span><span class="o">.</span><span class="n">headers</span><span class="p">[</span><span class="s">&#39;server&#39;</span><span class="p">]</span>
<span class="go">&#39;gunicorn/18.0&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">r</span> <span class="o">=</span> <span class="n">manager</span><span class="o">.</span><span class="n">request</span><span class="p">(</span><span class="s">&#39;POST&#39;</span><span class="p">,</span> <span class="s">&#39;http://httpbin.org/headers&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">r</span> <span class="o">=</span> <span class="n">manager</span><span class="o">.</span><span class="n">request</span><span class="p">(</span><span class="s">&#39;HEAD&#39;</span><span class="p">,</span> <span class="s">&#39;http://httpbin.org/cookies&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">manager</span><span class="o">.</span><span class="n">pools</span><span class="p">)</span>
<span class="go">2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">conn</span> <span class="o">=</span> <span class="n">manager</span><span class="o">.</span><span class="n">connection_from_host</span><span class="p">(</span><span class="s">&#39;httpbin.org&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">conn</span><span class="o">.</span><span class="n">num_requests</span>
<span class="go">3</span>
</pre></div>
</div>
<p>The API of a <a class="reference internal" href="index.html#urllib3.poolmanager.PoolManager" title="urllib3.poolmanager.PoolManager"><tt class="xref py py-class docutils literal"><span class="pre">PoolManager</span></tt></a> object is similar to that of a
<a class="reference internal" href="index.html#document-pools"><em>ConnectionPool</em></a>, so they can be passed around interchangeably.</p>
<p>The PoolManager uses a Least Recently Used (LRU) policy for discarding old
pools. That is, if you set the PoolManager <tt class="docutils literal"><span class="pre">num_pools</span></tt> to 10, then after
making requests to 11 or more different hosts, the least recently used pools
will be cleaned up eventually.</p>
<p>Cleanup of stale pools does not happen immediately but can be forced when used
as a context manager.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">urllib3</span> <span class="kn">import</span> <span class="n">PoolManager</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="n">PoolManager</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span> <span class="k">as</span> <span class="n">manager</span><span class="p">:</span>
<span class="gp">... </span>    <span class="n">r</span> <span class="o">=</span> <span class="n">manager</span><span class="o">.</span><span class="n">request</span><span class="p">(</span><span class="s">&#39;GET&#39;</span><span class="p">,</span> <span class="s">&#39;http://example.com&#39;</span><span class="p">)</span>
<span class="gp">... </span>    <span class="n">r</span> <span class="o">=</span> <span class="n">manager</span><span class="o">.</span><span class="n">request</span><span class="p">(</span><span class="s">&#39;GET&#39;</span><span class="p">,</span> <span class="s">&#39;http://httpbin.org/&#39;</span><span class="p">)</span>
<span class="gp">... </span>    <span class="nb">len</span><span class="p">(</span><span class="n">manager</span><span class="o">.</span><span class="n">pools</span><span class="p">)</span>
<span class="gp">...</span>
<span class="go">2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">manager</span><span class="o">.</span><span class="n">pools</span><span class="p">)</span>
<span class="go">0</span>
</pre></div>
</div>
<p>You can read more about the implementation and the various adjustable variables
within <a class="reference internal" href="index.html#urllib3._collections.RecentlyUsedContainer" title="urllib3._collections.RecentlyUsedContainer"><tt class="xref py py-class docutils literal"><span class="pre">RecentlyUsedContainer</span></tt></a>.</p>
<div class="section" id="api">
<h3>API<a class="headerlink" href="#api" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><dl class="class">
<dt id="urllib3.poolmanager.PoolManager">
<em class="property">class </em><tt class="descclassname">urllib3.poolmanager.</tt><tt class="descname">PoolManager</tt><big>(</big><em>num_pools=10</em>, <em>headers=None</em>, <em>**connection_pool_kw</em><big>)</big><a class="headerlink" href="#urllib3.poolmanager.PoolManager" title="Permalink to this definition">¶</a></dt>
<dd><p>Allows for arbitrary requests while transparently keeping track of
necessary connection pools for you.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>num_pools</strong> &#8211; Number of connection pools to cache before discarding the least
recently used pool.</li>
<li><strong>headers</strong> &#8211; Headers to include with all requests, unless other headers are given
explicitly.</li>
<li><strong>**connection_pool_kw</strong> &#8211; Additional parameters are used to create fresh
<a class="reference internal" href="index.html#urllib3.connectionpool.ConnectionPool" title="urllib3.connectionpool.ConnectionPool"><tt class="xref py py-class docutils literal"><span class="pre">urllib3.connectionpool.ConnectionPool</span></tt></a> instances.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>Example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">manager</span> <span class="o">=</span> <span class="n">PoolManager</span><span class="p">(</span><span class="n">num_pools</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">r</span> <span class="o">=</span> <span class="n">manager</span><span class="o">.</span><span class="n">request</span><span class="p">(</span><span class="s">&#39;GET&#39;</span><span class="p">,</span> <span class="s">&#39;http://google.com/&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">r</span> <span class="o">=</span> <span class="n">manager</span><span class="o">.</span><span class="n">request</span><span class="p">(</span><span class="s">&#39;GET&#39;</span><span class="p">,</span> <span class="s">&#39;http://google.com/mail&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">r</span> <span class="o">=</span> <span class="n">manager</span><span class="o">.</span><span class="n">request</span><span class="p">(</span><span class="s">&#39;GET&#39;</span><span class="p">,</span> <span class="s">&#39;http://yahoo.com/&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">manager</span><span class="o">.</span><span class="n">pools</span><span class="p">)</span>
<span class="go">2</span>
</pre></div>
</div>
<dl class="method">
<dt id="urllib3.poolmanager.PoolManager.clear">
<tt class="descname">clear</tt><big>(</big><big>)</big><a class="headerlink" href="#urllib3.poolmanager.PoolManager.clear" title="Permalink to this definition">¶</a></dt>
<dd><p>Empty our store of pools and direct them all to close.</p>
<p>This will not affect in-flight connections, but they will not be
re-used after completion.</p>
</dd></dl>

<dl class="method">
<dt id="urllib3.poolmanager.PoolManager.connection_from_host">
<tt class="descname">connection_from_host</tt><big>(</big><em>host</em>, <em>port=None</em>, <em>scheme='http'</em><big>)</big><a class="headerlink" href="#urllib3.poolmanager.PoolManager.connection_from_host" title="Permalink to this definition">¶</a></dt>
<dd><p>Get a <tt class="xref py py-class docutils literal"><span class="pre">ConnectionPool</span></tt> based on the host, port, and scheme.</p>
<p>If <tt class="docutils literal"><span class="pre">port</span></tt> isn&#8217;t given, it will be derived from the <tt class="docutils literal"><span class="pre">scheme</span></tt> using
<tt class="docutils literal"><span class="pre">urllib3.connectionpool.port_by_scheme</span></tt>.</p>
</dd></dl>

<dl class="method">
<dt id="urllib3.poolmanager.PoolManager.connection_from_url">
<tt class="descname">connection_from_url</tt><big>(</big><em>url</em><big>)</big><a class="headerlink" href="#urllib3.poolmanager.PoolManager.connection_from_url" title="Permalink to this definition">¶</a></dt>
<dd><p>Similar to <a class="reference internal" href="index.html#urllib3.connectionpool.connection_from_url" title="urllib3.connectionpool.connection_from_url"><tt class="xref py py-func docutils literal"><span class="pre">urllib3.connectionpool.connection_from_url()</span></tt></a> but
doesn&#8217;t pass any additional parameters to the
<a class="reference internal" href="index.html#urllib3.connectionpool.ConnectionPool" title="urllib3.connectionpool.ConnectionPool"><tt class="xref py py-class docutils literal"><span class="pre">urllib3.connectionpool.ConnectionPool</span></tt></a> constructor.</p>
<p>Additional parameters are taken from the <a class="reference internal" href="index.html#urllib3.poolmanager.PoolManager" title="urllib3.poolmanager.PoolManager"><tt class="xref py py-class docutils literal"><span class="pre">PoolManager</span></tt></a>
constructor.</p>
</dd></dl>

<dl class="method">
<dt id="urllib3.poolmanager.PoolManager.request">
<tt class="descname">request</tt><big>(</big><em>method</em>, <em>url</em>, <em>fields=None</em>, <em>headers=None</em>, <em>**urlopen_kw</em><big>)</big><a class="headerlink" href="#urllib3.poolmanager.PoolManager.request" title="Permalink to this definition">¶</a></dt>
<dd><p>Make a request using <a class="reference internal" href="index.html#urllib3.poolmanager.PoolManager.urlopen" title="urllib3.poolmanager.PoolManager.urlopen"><tt class="xref py py-meth docutils literal"><span class="pre">urlopen()</span></tt></a> with the appropriate encoding of
<tt class="docutils literal"><span class="pre">fields</span></tt> based on the <tt class="docutils literal"><span class="pre">method</span></tt> used.</p>
<p>This is a convenience method that requires the least amount of manual
effort. It can be used in most situations, while still having the
option to drop down to more specific methods when necessary, such as
<a class="reference internal" href="index.html#urllib3.poolmanager.PoolManager.request_encode_url" title="urllib3.poolmanager.PoolManager.request_encode_url"><tt class="xref py py-meth docutils literal"><span class="pre">request_encode_url()</span></tt></a>, <a class="reference internal" href="index.html#urllib3.poolmanager.PoolManager.request_encode_body" title="urllib3.poolmanager.PoolManager.request_encode_body"><tt class="xref py py-meth docutils literal"><span class="pre">request_encode_body()</span></tt></a>,
or even the lowest level <a class="reference internal" href="index.html#urllib3.poolmanager.PoolManager.urlopen" title="urllib3.poolmanager.PoolManager.urlopen"><tt class="xref py py-meth docutils literal"><span class="pre">urlopen()</span></tt></a>.</p>
</dd></dl>

<dl class="method">
<dt id="urllib3.poolmanager.PoolManager.request_encode_body">
<tt class="descname">request_encode_body</tt><big>(</big><em>method</em>, <em>url</em>, <em>fields=None</em>, <em>headers=None</em>, <em>encode_multipart=True</em>, <em>multipart_boundary=None</em>, <em>**urlopen_kw</em><big>)</big><a class="headerlink" href="#urllib3.poolmanager.PoolManager.request_encode_body" title="Permalink to this definition">¶</a></dt>
<dd><p>Make a request using <a class="reference internal" href="index.html#urllib3.poolmanager.PoolManager.urlopen" title="urllib3.poolmanager.PoolManager.urlopen"><tt class="xref py py-meth docutils literal"><span class="pre">urlopen()</span></tt></a> with the <tt class="docutils literal"><span class="pre">fields</span></tt> encoded in
the body. This is useful for request methods like POST, PUT, PATCH, etc.</p>
<p>When <tt class="docutils literal"><span class="pre">encode_multipart=True</span></tt> (default), then
<a class="reference internal" href="index.html#urllib3.filepost.encode_multipart_formdata" title="urllib3.filepost.encode_multipart_formdata"><tt class="xref py py-meth docutils literal"><span class="pre">urllib3.filepost.encode_multipart_formdata()</span></tt></a> is used to encode
the payload with the appropriate content type. Otherwise
<tt class="xref py py-meth docutils literal"><span class="pre">urllib.urlencode()</span></tt> is used with the
&#8216;application/x-www-form-urlencoded&#8217; content type.</p>
<p>Multipart encoding must be used when posting files, and it&#8217;s reasonably
safe to use it in other times too. However, it may break request
signing, such as with OAuth.</p>
<p>Supports an optional <tt class="docutils literal"><span class="pre">fields</span></tt> parameter of key/value strings AND
key/filetuple. A filetuple is a (filename, data, MIME type) tuple where
the MIME type is optional. For example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">fields</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">&#39;foo&#39;</span><span class="p">:</span> <span class="s">&#39;bar&#39;</span><span class="p">,</span>
    <span class="s">&#39;fakefile&#39;</span><span class="p">:</span> <span class="p">(</span><span class="s">&#39;foofile.txt&#39;</span><span class="p">,</span> <span class="s">&#39;contents of foofile&#39;</span><span class="p">),</span>
    <span class="s">&#39;realfile&#39;</span><span class="p">:</span> <span class="p">(</span><span class="s">&#39;barfile.txt&#39;</span><span class="p">,</span> <span class="nb">open</span><span class="p">(</span><span class="s">&#39;realfile&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">read</span><span class="p">()),</span>
    <span class="s">&#39;typedfile&#39;</span><span class="p">:</span> <span class="p">(</span><span class="s">&#39;bazfile.bin&#39;</span><span class="p">,</span> <span class="nb">open</span><span class="p">(</span><span class="s">&#39;bazfile&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">read</span><span class="p">(),</span>
                  <span class="s">&#39;image/jpeg&#39;</span><span class="p">),</span>
    <span class="s">&#39;nonamefile&#39;</span><span class="p">:</span> <span class="s">&#39;contents of nonamefile field&#39;</span><span class="p">,</span>
<span class="p">}</span>
</pre></div>
</div>
<p>When uploading a file, providing a filename (the first parameter of the
tuple) is optional but recommended to best mimick behavior of browsers.</p>
<p>Note that if <tt class="docutils literal"><span class="pre">headers</span></tt> are supplied, the &#8216;Content-Type&#8217; header will
be overwritten because it depends on the dynamic random boundary string
which is used to compose the body of the request. The random boundary
string can be explicitly set with the <tt class="docutils literal"><span class="pre">multipart_boundary</span></tt> parameter.</p>
</dd></dl>

<dl class="method">
<dt id="urllib3.poolmanager.PoolManager.request_encode_url">
<tt class="descname">request_encode_url</tt><big>(</big><em>method</em>, <em>url</em>, <em>fields=None</em>, <em>**urlopen_kw</em><big>)</big><a class="headerlink" href="#urllib3.poolmanager.PoolManager.request_encode_url" title="Permalink to this definition">¶</a></dt>
<dd><p>Make a request using <a class="reference internal" href="index.html#urllib3.poolmanager.PoolManager.urlopen" title="urllib3.poolmanager.PoolManager.urlopen"><tt class="xref py py-meth docutils literal"><span class="pre">urlopen()</span></tt></a> with the <tt class="docutils literal"><span class="pre">fields</span></tt> encoded in
the url. This is useful for request methods like GET, HEAD, DELETE, etc.</p>
</dd></dl>

<dl class="method">
<dt id="urllib3.poolmanager.PoolManager.urlopen">
<tt class="descname">urlopen</tt><big>(</big><em>method</em>, <em>url</em>, <em>redirect=True</em>, <em>**kw</em><big>)</big><a class="headerlink" href="#urllib3.poolmanager.PoolManager.urlopen" title="Permalink to this definition">¶</a></dt>
<dd><p>Same as <a class="reference internal" href="index.html#urllib3.connectionpool.HTTPConnectionPool.urlopen" title="urllib3.connectionpool.HTTPConnectionPool.urlopen"><tt class="xref py py-meth docutils literal"><span class="pre">urllib3.connectionpool.HTTPConnectionPool.urlopen()</span></tt></a>
with custom cross-host redirect logic and only sends the request-uri
portion of the <tt class="docutils literal"><span class="pre">url</span></tt>.</p>
<p>The given <tt class="docutils literal"><span class="pre">url</span></tt> parameter must be absolute, such that an appropriate
<a class="reference internal" href="index.html#urllib3.connectionpool.ConnectionPool" title="urllib3.connectionpool.ConnectionPool"><tt class="xref py py-class docutils literal"><span class="pre">urllib3.connectionpool.ConnectionPool</span></tt></a> can be chosen for it.</p>
</dd></dl>

</dd></dl>

</div></blockquote>
</div>
</div>
<div class="section" id="proxymanager">
<h2>ProxyManager<a class="headerlink" href="#proxymanager" title="Permalink to this headline">¶</a></h2>
<p><a class="reference internal" href="index.html#urllib3.poolmanager.ProxyManager" title="urllib3.poolmanager.ProxyManager"><tt class="xref py py-class docutils literal"><span class="pre">ProxyManager</span></tt></a> is an HTTP proxy-aware subclass of <a class="reference internal" href="index.html#urllib3.poolmanager.PoolManager" title="urllib3.poolmanager.PoolManager"><tt class="xref py py-class docutils literal"><span class="pre">PoolManager</span></tt></a>.
It produces a single
<a class="reference internal" href="index.html#urllib3.connectionpool.HTTPConnectionPool" title="urllib3.connectionpool.HTTPConnectionPool"><tt class="xref py py-class docutils literal"><span class="pre">HTTPConnectionPool</span></tt></a> instance for all HTTP
connections and individual per-server:port
<a class="reference internal" href="index.html#urllib3.connectionpool.HTTPSConnectionPool" title="urllib3.connectionpool.HTTPSConnectionPool"><tt class="xref py py-class docutils literal"><span class="pre">HTTPSConnectionPool</span></tt></a> instances for tunnelled
HTTPS connections.</p>
<div class="section" id="id1">
<h3>API<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><dl class="class">
<dt id="urllib3.poolmanager.ProxyManager">
<em class="property">class </em><tt class="descclassname">urllib3.poolmanager.</tt><tt class="descname">ProxyManager</tt><big>(</big><em>proxy_url</em>, <em>num_pools=10</em>, <em>headers=None</em>, <em>proxy_headers=None</em>, <em>**connection_pool_kw</em><big>)</big><a class="headerlink" href="#urllib3.poolmanager.ProxyManager" title="Permalink to this definition">¶</a></dt>
<dd><p>Behaves just like <a class="reference internal" href="index.html#urllib3.poolmanager.PoolManager" title="urllib3.poolmanager.PoolManager"><tt class="xref py py-class docutils literal"><span class="pre">PoolManager</span></tt></a>, but sends all requests through
the defined proxy, using the CONNECT method for HTTPS URLs.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>proxy_url</strong> &#8211; The URL of the proxy to be used.</li>
<li><strong>proxy_headers</strong> &#8211; A dictionary contaning headers that will be sent to the proxy. In case
of HTTP they are being sent with each request, while in the
HTTPS/CONNECT case they are sent only once. Could be used for proxy
authentication.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="docutils">
<dt>Example:</dt>
<dd><div class="first last highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">proxy</span> <span class="o">=</span> <span class="n">urllib3</span><span class="o">.</span><span class="n">ProxyManager</span><span class="p">(</span><span class="s">&#39;http://localhost:3128/&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">r1</span> <span class="o">=</span> <span class="n">proxy</span><span class="o">.</span><span class="n">request</span><span class="p">(</span><span class="s">&#39;GET&#39;</span><span class="p">,</span> <span class="s">&#39;http://google.com/&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">r2</span> <span class="o">=</span> <span class="n">proxy</span><span class="o">.</span><span class="n">request</span><span class="p">(</span><span class="s">&#39;GET&#39;</span><span class="p">,</span> <span class="s">&#39;http://httpbin.org/&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">proxy</span><span class="o">.</span><span class="n">pools</span><span class="p">)</span>
<span class="go">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">r3</span> <span class="o">=</span> <span class="n">proxy</span><span class="o">.</span><span class="n">request</span><span class="p">(</span><span class="s">&#39;GET&#39;</span><span class="p">,</span> <span class="s">&#39;https://httpbin.org/&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">r4</span> <span class="o">=</span> <span class="n">proxy</span><span class="o">.</span><span class="n">request</span><span class="p">(</span><span class="s">&#39;GET&#39;</span><span class="p">,</span> <span class="s">&#39;https://twitter.com/&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">proxy</span><span class="o">.</span><span class="n">pools</span><span class="p">)</span>
<span class="go">3</span>
</pre></div>
</div>
</dd>
</dl>
</dd></dl>

</div></blockquote>
</div>
</div>
<span id="document-security"></span><div class="section" id="security-verified-https-with-ssl-tls">
<span id="security"></span><h2>Security: Verified HTTPS with SSL/TLS<a class="headerlink" href="#security-verified-https-with-ssl-tls" title="Permalink to this headline">¶</a></h2>
<p>Very important fact: <strong>By default, urllib3 does not verify HTTPS requests.</strong></p>
<p>The historic reason for this is that we rely on <tt class="docutils literal"><span class="pre">httplib</span></tt> for some of the
HTTP protocol implementation, and <tt class="docutils literal"><span class="pre">httplib</span></tt> does not verify requests out of
the box. This is not a good reason, but here we are.</p>
<p>Luckily, it&#8217;s not too hard to enable verified HTTPS requests and there are a
few ways to do it.</p>
<div class="section" id="python-with-ssl-enabled">
<h3>Python with SSL enabled<a class="headerlink" href="#python-with-ssl-enabled" title="Permalink to this headline">¶</a></h3>
<p>First we need to make sure your Python installation has SSL enabled. Easiest
way to check is to simply open a Python shell and type <cite>import ssl</cite>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">ssl</span>
<span class="gt">Traceback (most recent call last):</span>
  <span class="c">...</span>
<span class="gr">ImportError</span>: <span class="n">No module named _ssl</span>
</pre></div>
</div>
<p>If you got an <tt class="docutils literal"><span class="pre">ImportError</span></tt>, then your Python is not compiled with SSL support
and you&#8217;ll need to re-install it. Read
<a class="reference external" href="https://stackoverflow.com/questions/5128845/importerror-no-module-named-ssl">this StackOverflow thread</a>
for details.</p>
<p>Otherwise, if <tt class="docutils literal"><span class="pre">ssl</span></tt> imported cleanly, then we&#8217;re ready to setup our certificates:
<a class="reference internal" href="index.html#certifi-with-urllib3"><em>Using Certifi with urllib3</em></a>.</p>
<div class="section" id="enabling-ssl-on-google-appengine">
<h4>Enabling SSL on Google AppEngine<a class="headerlink" href="#enabling-ssl-on-google-appengine" title="Permalink to this headline">¶</a></h4>
<p>If you&#8217;re using Google App Engine, you&#8217;ll need to add <tt class="docutils literal"><span class="pre">ssl</span></tt> as a library
dependency to your yaml file, like this:</p>
<div class="highlight-python"><div class="highlight"><pre>libraries:
- name: ssl
  version: latest
</pre></div>
</div>
<p>If it&#8217;s still not working, you may need to enable billing on your account
to <a class="reference external" href="https://developers.google.com/appengine/docs/python/sockets/">enable using sockets</a>.</p>
</div>
</div>
<div class="section" id="using-certifi-with-urllib3">
<span id="certifi-with-urllib3"></span><h3>Using Certifi with urllib3<a class="headerlink" href="#using-certifi-with-urllib3" title="Permalink to this headline">¶</a></h3>
<p><a class="reference external" href="http://certifi.io/">Certifi</a> is a package which ships with Mozilla&#8217;s root
certificates for easy programmatic access.</p>
<ol class="arabic">
<li><p class="first">Install the Python <tt class="docutils literal"><span class="pre">certifi</span></tt> package:</p>
<div class="highlight-python"><div class="highlight"><pre>$ pip install certifi
</pre></div>
</div>
</li>
<li><p class="first">Setup your pool to require a certificate and provide the certifi bundle:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">urllib3</span>
<span class="kn">import</span> <span class="nn">certifi</span>

<span class="n">http</span> <span class="o">=</span> <span class="n">urllib3</span><span class="o">.</span><span class="n">PoolManager</span><span class="p">(</span>
    <span class="n">cert_reqs</span><span class="o">=</span><span class="s">&#39;CERT_REQUIRED&#39;</span><span class="p">,</span> <span class="c"># Force certificate check.</span>
    <span class="n">ca_certs</span><span class="o">=</span><span class="n">certifi</span><span class="o">.</span><span class="n">where</span><span class="p">(),</span>  <span class="c"># Path to the Certifi bundle.</span>
<span class="p">)</span>

<span class="c"># You&#39;re ready to make verified HTTPS requests.</span>
<span class="k">try</span><span class="p">:</span>
    <span class="n">r</span> <span class="o">=</span> <span class="n">http</span><span class="o">.</span><span class="n">request</span><span class="p">(</span><span class="s">&#39;GET&#39;</span><span class="p">,</span> <span class="s">&#39;https://example.com/&#39;</span><span class="p">)</span>
<span class="k">except</span> <span class="n">urllib3</span><span class="o">.</span><span class="n">exceptions</span><span class="o">.</span><span class="n">SSLError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="c"># Handle incorrect certificate error.</span>
    <span class="o">...</span>
</pre></div>
</div>
</li>
</ol>
<p>Make sure to update your <tt class="docutils literal"><span class="pre">certifi</span></tt> package regularly to get the latest root
certificates.</p>
</div>
<div class="section" id="using-your-system-s-root-certificates">
<h3>Using your system&#8217;s root certificates<a class="headerlink" href="#using-your-system-s-root-certificates" title="Permalink to this headline">¶</a></h3>
<p>Your system&#8217;s root certificates may be more up-to-date than maintaining your
own, but the trick is finding where they live. Different operating systems have
them in different places.</p>
<p>For example, on most Linux distributions they&#8217;re at
<tt class="docutils literal"><span class="pre">/etc/ssl/certs/ca-certificates.crt</span></tt>. On Windows and OS X? <a class="reference external" href="https://stackoverflow.com/questions/10095676/openssl-reasonable-default-for-trusted-ca-certificates">It&#8217;s not so simple</a>.</p>
<p>Once you find your root certificate file:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">urllib3</span>

<span class="n">ca_certs</span> <span class="o">=</span> <span class="s">&quot;/etc/ssl/certs/ca-certificates.crt&quot;</span>  <span class="c"># Or wherever it lives.</span>

<span class="n">http</span> <span class="o">=</span> <span class="n">urllib3</span><span class="o">.</span><span class="n">PoolManager</span><span class="p">(</span>
    <span class="n">cert_reqs</span><span class="o">=</span><span class="s">&#39;CERT_REQUIRED&#39;</span><span class="p">,</span> <span class="c"># Force certificate check.</span>
    <span class="n">ca_certs</span><span class="o">=</span><span class="n">ca_certs</span><span class="p">,</span>         <span class="c"># Path to your certificate bundle.</span>
<span class="p">)</span>

<span class="c"># You&#39;re ready to make verified HTTPS requests.</span>
<span class="k">try</span><span class="p">:</span>
    <span class="n">r</span> <span class="o">=</span> <span class="n">http</span><span class="o">.</span><span class="n">request</span><span class="p">(</span><span class="s">&#39;GET&#39;</span><span class="p">,</span> <span class="s">&#39;https://example.com/&#39;</span><span class="p">)</span>
<span class="k">except</span> <span class="n">urllib3</span><span class="o">.</span><span class="n">exceptions</span><span class="o">.</span><span class="n">SSLError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="c"># Handle incorrect certificate error.</span>
    <span class="o">...</span>
</pre></div>
</div>
</div>
<div class="section" id="openssl-pyopenssl">
<span id="pyopenssl"></span><h3>OpenSSL / PyOpenSSL<a class="headerlink" href="#openssl-pyopenssl" title="Permalink to this headline">¶</a></h3>
<p>By default, we use the standard library&#8217;s <tt class="docutils literal"><span class="pre">ssl</span></tt> module. Unfortunately, there
are several limitations which are addressed by PyOpenSSL:</p>
<ul class="simple">
<li>(Python 2.x) SNI support.</li>
<li>(Python 2.x-3.2) Disabling compression to mitigate <a class="reference external" href="https://en.wikipedia.org/wiki/CRIME_(security_exploit)">CRIME attack</a>.</li>
</ul>
<p>To use the Python OpenSSL bindings instead, you&#8217;ll need to install the required
packages:</p>
<div class="highlight-python"><div class="highlight"><pre>$ pip install pyopenssl ndg-httpsclient pyasn1
</pre></div>
</div>
<p>Once the packages are installed, you can tell urllib3 to switch the ssl backend
to PyOpenSSL with <tt class="xref py py-func docutils literal"><span class="pre">inject_into_urllib3()</span></tt>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">urllib3.contrib.pyopenssl</span>
<span class="n">urllib3</span><span class="o">.</span><span class="n">contrib</span><span class="o">.</span><span class="n">pyopenssl</span><span class="o">.</span><span class="n">inject_into_urllib3</span><span class="p">()</span>
</pre></div>
</div>
<p>Now you can continue using urllib3 as you normally would.</p>
<p>For more details, check the <a class="reference internal" href="index.html#module-urllib3.contrib.pyopenssl" title="urllib3.contrib.pyopenssl"><tt class="xref py py-mod docutils literal"><span class="pre">pyopenssl</span></tt></a> module.</p>
</div>
<div class="section" id="insecurerequestwarning">
<span id="id1"></span><h3>InsecureRequestWarning<a class="headerlink" href="#insecurerequestwarning" title="Permalink to this headline">¶</a></h3>
<div class="versionadded">
<p><span class="versionmodified">New in version 1.9.</span></p>
</div>
<p>Unverified HTTPS requests will trigger a warning via Python&#8217;s <tt class="docutils literal"><span class="pre">warnings</span></tt> module:</p>
<div class="highlight-python"><div class="highlight"><pre>urllib3/connectionpool.py:736: InsecureRequestWarning: Unverified HTTPS
request is being made. Adding certificate verification is strongly advised.
See: https://urllib3.readthedocs.org/en/latest/security.html
</pre></div>
</div>
<p>This would be a great time to enable HTTPS verification:
<a class="reference internal" href="index.html#certifi-with-urllib3"><em>Using Certifi with urllib3</em></a>.</p>
<p>If you know what you&#8217;re doing and would like to disable this and other warnings,
you can use <tt class="xref py py-func docutils literal"><span class="pre">disable_warnings()</span></tt>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">urllib3</span>
<span class="n">urllib3</span><span class="o">.</span><span class="n">disable_warnings</span><span class="p">()</span>
</pre></div>
</div>
<p>Making unverified HTTPS requests is strongly discouraged. ˙ ͜ʟ˙</p>
<p>Alternatively, if you are using Python&#8217;s <tt class="docutils literal"><span class="pre">logging</span></tt> module, you can capture the
warnings to your own log:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">logging</span><span class="o">.</span><span class="n">captureWarnings</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span>
</pre></div>
</div>
<p>Capturing the warnings to your own log is much preferred over simply disabling
the warnings.</p>
</div>
<div class="section" id="insecureplatformwarning">
<h3>InsecurePlatformWarning<a class="headerlink" href="#insecureplatformwarning" title="Permalink to this headline">¶</a></h3>
<div class="versionadded">
<p><span class="versionmodified">New in version 1.11.</span></p>
</div>
<p>Certain Python platforms (specifically, versions of Python earlier than 2.7.9)
have restrictions in their <tt class="docutils literal"><span class="pre">ssl</span></tt> module that limit the configuration that
<tt class="docutils literal"><span class="pre">urllib3</span></tt> can apply. In particular, this can cause HTTPS requests that would
succeed on more featureful platforms to fail, and can cause certain security
features to be unavailable.</p>
<p>If you encounter this warning, it is strongly recommended you upgrade to a
newer Python version, or that you use pyOpenSSL as described in the
<a class="reference internal" href="index.html#pyopenssl"><em>OpenSSL / PyOpenSSL</em></a> section.</p>
<p>If you know what you are doing and would like to disable this and other
warnings, please consult the <a class="reference internal" href="index.html#insecurerequestwarning"><em>InsecureRequestWarning</em></a> section for
instructions on how to handle the warnings.</p>
</div>
</div>
<span id="document-helpers"></span><div class="section" id="helpers">
<h2>Helpers<a class="headerlink" href="#helpers" title="Permalink to this headline">¶</a></h2>
<p>Useful methods for working with <a class="reference external" href="http://docs.python.org/2.7/library/httplib.html#module-httplib" title="(in Python v2.7)"><tt class="xref py py-mod docutils literal"><span class="pre">httplib</span></tt></a>, completely decoupled from
code specific to <strong>urllib3</strong>.</p>
<div class="section" id="module-urllib3.util.timeout">
<span id="timeouts"></span><h3>Timeouts<a class="headerlink" href="#module-urllib3.util.timeout" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="urllib3.util.timeout.Timeout">
<em class="property">class </em><tt class="descclassname">urllib3.util.timeout.</tt><tt class="descname">Timeout</tt><big>(</big><em>total=None</em>, <em>connect=&lt;object object at 0x7f42c1d233f0&gt;</em>, <em>read=&lt;object object at 0x7f42c1d233f0&gt;</em><big>)</big><a class="headerlink" href="#urllib3.util.timeout.Timeout" title="Permalink to this definition">¶</a></dt>
<dd><p>Timeout configuration.</p>
<p>Timeouts can be defined as a default for a pool:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">timeout</span> <span class="o">=</span> <span class="n">Timeout</span><span class="p">(</span><span class="n">connect</span><span class="o">=</span><span class="mf">2.0</span><span class="p">,</span> <span class="n">read</span><span class="o">=</span><span class="mf">7.0</span><span class="p">)</span>
<span class="n">http</span> <span class="o">=</span> <span class="n">PoolManager</span><span class="p">(</span><span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">http</span><span class="o">.</span><span class="n">request</span><span class="p">(</span><span class="s">&#39;GET&#39;</span><span class="p">,</span> <span class="s">&#39;http://example.com/&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Or per-request (which overrides the default for the pool):</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">response</span> <span class="o">=</span> <span class="n">http</span><span class="o">.</span><span class="n">request</span><span class="p">(</span><span class="s">&#39;GET&#39;</span><span class="p">,</span> <span class="s">&#39;http://example.com/&#39;</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">Timeout</span><span class="p">(</span><span class="mi">10</span><span class="p">))</span>
</pre></div>
</div>
<p>Timeouts can be disabled by setting all the parameters to <tt class="docutils literal"><span class="pre">None</span></tt>:</p>
<div class="highlight-python"><div class="highlight"><pre>no_timeout = Timeout(connect=None, read=None)
response = http.request(&#39;GET&#39;, &#39;http://example.com/, timeout=no_timeout)
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>total</strong> (<em>integer, float, or None</em>) &#8211; <p>This combines the connect and read timeouts into one; the read timeout
will be set to the time leftover from the connect attempt. In the
event that both a connect timeout and a total are specified, or a read
timeout and a total are specified, the shorter timeout will be applied.</p>
<p>Defaults to None.</p>
</li>
<li><strong>connect</strong> (<em>integer, float, or None</em>) &#8211; The maximum amount of time to wait for a connection attempt to a server
to succeed. Omitting the parameter will default the connect timeout to
the system default, probably <a class="reference external" href="http://hg.python.org/cpython/file/603b4d593758/Lib/socket.py#l535">the global default timeout in socket.py</a>.
None will set an infinite timeout for connection attempts.</li>
<li><strong>read</strong> (<em>integer, float, or None</em>) &#8211; <p>The maximum amount of time to wait between consecutive
read operations for a response from the server. Omitting
the parameter will default the read timeout to the system
default, probably <a class="reference external" href="http://hg.python.org/cpython/file/603b4d593758/Lib/socket.py#l535">the global default timeout in socket.py</a>.
None will set an infinite timeout.</p>
</li>
</ul>
</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>Many factors can affect the total amount of time for urllib3 to return
an HTTP response.</p>
<p>For example, Python&#8217;s DNS resolver does not obey the timeout specified
on the socket. Other factors that can affect total request time include
high CPU load, high swap, the program running at a low priority level,
or other behaviors.</p>
<p>In addition, the read and total timeouts only measure the time between
read operations on the socket connecting the client and the server,
not the total amount of time for the request to return a complete
response. For most requests, the timeout is raised because the server
has not sent the first byte in the specified time. This is not always
the case; if a server streams one byte every fifteen seconds, a timeout
of 20 seconds will not trigger, even though the request will take
several minutes to complete.</p>
<p class="last">If your goal is to cut off any request after a set amount of wall clock
time, consider having a second &#8220;watcher&#8221; thread to cut off a slow
request.</p>
</div>
<dl class="attribute">
<dt id="urllib3.util.timeout.Timeout.DEFAULT_TIMEOUT">
<tt class="descname">DEFAULT_TIMEOUT</tt><em class="property"> = &lt;object object at 0x7f42c1d23240&gt;</em><a class="headerlink" href="#urllib3.util.timeout.Timeout.DEFAULT_TIMEOUT" title="Permalink to this definition">¶</a></dt>
<dd><p>A sentinel object representing the default timeout value</p>
</dd></dl>

<dl class="method">
<dt id="urllib3.util.timeout.Timeout.clone">
<tt class="descname">clone</tt><big>(</big><big>)</big><a class="headerlink" href="#urllib3.util.timeout.Timeout.clone" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a copy of the timeout object</p>
<p>Timeout properties are stored per-pool but each request needs a fresh
Timeout object to ensure each one has its own start/stop configured.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">a copy of the timeout object</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference internal" href="index.html#urllib3.util.timeout.Timeout" title="urllib3.util.timeout.Timeout"><tt class="xref py py-class docutils literal"><span class="pre">Timeout</span></tt></a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="urllib3.util.timeout.Timeout.connect_timeout">
<tt class="descname">connect_timeout</tt><a class="headerlink" href="#urllib3.util.timeout.Timeout.connect_timeout" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the value to use when setting a connection timeout.</p>
<p>This will be a positive float or integer, the value None
(never timeout), or the default system timeout.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">Connect timeout.</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body">int, float, <a class="reference internal" href="index.html#urllib3.util.timeout.Timeout.DEFAULT_TIMEOUT" title="urllib3.util.timeout.Timeout.DEFAULT_TIMEOUT"><tt class="xref py py-attr docutils literal"><span class="pre">Timeout.DEFAULT_TIMEOUT</span></tt></a> or None</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="classmethod">
<dt id="urllib3.util.timeout.Timeout.from_float">
<em class="property">classmethod </em><tt class="descname">from_float</tt><big>(</big><em>timeout</em><big>)</big><a class="headerlink" href="#urllib3.util.timeout.Timeout.from_float" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a new Timeout from a legacy timeout value.</p>
<p>The timeout value used by httplib.py sets the same timeout on the
connect(), and recv() socket requests. This creates a <a class="reference internal" href="index.html#urllib3.util.timeout.Timeout" title="urllib3.util.timeout.Timeout"><tt class="xref py py-class docutils literal"><span class="pre">Timeout</span></tt></a>
object that sets the individual timeouts to the <tt class="docutils literal"><span class="pre">timeout</span></tt> value
passed to this function.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>timeout</strong> (<em>integer, float, sentinel default object, or None</em>) &#8211; The legacy timeout value.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">Timeout object</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference internal" href="index.html#urllib3.util.timeout.Timeout" title="urllib3.util.timeout.Timeout"><tt class="xref py py-class docutils literal"><span class="pre">Timeout</span></tt></a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="urllib3.util.timeout.Timeout.get_connect_duration">
<tt class="descname">get_connect_duration</tt><big>(</big><big>)</big><a class="headerlink" href="#urllib3.util.timeout.Timeout.get_connect_duration" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets the time elapsed since the call to <a class="reference internal" href="index.html#urllib3.util.timeout.Timeout.start_connect" title="urllib3.util.timeout.Timeout.start_connect"><tt class="xref py py-meth docutils literal"><span class="pre">start_connect()</span></tt></a>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">Elapsed time.</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body">float</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">Raises <a class="reference internal" href="index.html#urllib3.exceptions.TimeoutStateError" title="urllib3.exceptions.TimeoutStateError">urllib3.exceptions.TimeoutStateError</a>:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">if you attempt
to get duration for a timer that hasn&#8217;t been started.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="urllib3.util.timeout.Timeout.read_timeout">
<tt class="descname">read_timeout</tt><a class="headerlink" href="#urllib3.util.timeout.Timeout.read_timeout" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the value for the read timeout.</p>
<p>This assumes some time has elapsed in the connection timeout and
computes the read timeout appropriately.</p>
<p>If self.total is set, the read timeout is dependent on the amount of
time taken by the connect timeout. If the connection time has not been
established, a <a class="reference internal" href="index.html#urllib3.exceptions.TimeoutStateError" title="urllib3.exceptions.TimeoutStateError"><tt class="xref py py-exc docutils literal"><span class="pre">TimeoutStateError</span></tt></a> will be
raised.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">Value to use for the read timeout.</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body">int, float, <a class="reference internal" href="index.html#urllib3.util.timeout.Timeout.DEFAULT_TIMEOUT" title="urllib3.util.timeout.Timeout.DEFAULT_TIMEOUT"><tt class="xref py py-attr docutils literal"><span class="pre">Timeout.DEFAULT_TIMEOUT</span></tt></a> or None</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">Raises <a class="reference internal" href="index.html#urllib3.exceptions.TimeoutStateError" title="urllib3.exceptions.TimeoutStateError">urllib3.exceptions.TimeoutStateError</a>:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">If <a class="reference internal" href="index.html#urllib3.util.timeout.Timeout.start_connect" title="urllib3.util.timeout.Timeout.start_connect"><tt class="xref py py-meth docutils literal"><span class="pre">start_connect()</span></tt></a>
has not yet been called on this object.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="urllib3.util.timeout.Timeout.start_connect">
<tt class="descname">start_connect</tt><big>(</big><big>)</big><a class="headerlink" href="#urllib3.util.timeout.Timeout.start_connect" title="Permalink to this definition">¶</a></dt>
<dd><p>Start the timeout clock, used during a connect() attempt</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name" colspan="2">Raises <a class="reference internal" href="index.html#urllib3.exceptions.TimeoutStateError" title="urllib3.exceptions.TimeoutStateError">urllib3.exceptions.TimeoutStateError</a>:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">if you attempt
to start a timer that has been started already.</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="urllib3.util.timeout.current_time">
<tt class="descclassname">urllib3.util.timeout.</tt><tt class="descname">current_time</tt><big>(</big><big>)</big><a class="headerlink" href="#urllib3.util.timeout.current_time" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve the current time. This function is mocked out in unit testing.</p>
</dd></dl>

</div>
<div class="section" id="module-urllib3.util.retry">
<span id="retries"></span><h3>Retries<a class="headerlink" href="#module-urllib3.util.retry" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="urllib3.util.retry.Retry">
<em class="property">class </em><tt class="descclassname">urllib3.util.retry.</tt><tt class="descname">Retry</tt><big>(</big><em>total=10</em>, <em>connect=None</em>, <em>read=None</em>, <em>redirect=None</em>, <em>method_whitelist=frozenset(['HEAD'</em>, <em>'TRACE'</em>, <em>'GET'</em>, <em>'PUT'</em>, <em>'OPTIONS'</em>, <em>'DELETE'])</em>, <em>status_forcelist=None</em>, <em>backoff_factor=0</em>, <em>raise_on_redirect=True</em>, <em>_observed_errors=0</em><big>)</big><a class="headerlink" href="#urllib3.util.retry.Retry" title="Permalink to this definition">¶</a></dt>
<dd><p>Retry configuration.</p>
<p>Each retry attempt will create a new Retry object with updated values, so
they can be safely reused.</p>
<p>Retries can be defined as a default for a pool:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">retries</span> <span class="o">=</span> <span class="n">Retry</span><span class="p">(</span><span class="n">connect</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">read</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">redirect</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
<span class="n">http</span> <span class="o">=</span> <span class="n">PoolManager</span><span class="p">(</span><span class="n">retries</span><span class="o">=</span><span class="n">retries</span><span class="p">)</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">http</span><span class="o">.</span><span class="n">request</span><span class="p">(</span><span class="s">&#39;GET&#39;</span><span class="p">,</span> <span class="s">&#39;http://example.com/&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Or per-request (which overrides the default for the pool):</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">response</span> <span class="o">=</span> <span class="n">http</span><span class="o">.</span><span class="n">request</span><span class="p">(</span><span class="s">&#39;GET&#39;</span><span class="p">,</span> <span class="s">&#39;http://example.com/&#39;</span><span class="p">,</span> <span class="n">retries</span><span class="o">=</span><span class="n">Retry</span><span class="p">(</span><span class="mi">10</span><span class="p">))</span>
</pre></div>
</div>
<p>Retries can be disabled by passing <tt class="docutils literal"><span class="pre">False</span></tt>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">response</span> <span class="o">=</span> <span class="n">http</span><span class="o">.</span><span class="n">request</span><span class="p">(</span><span class="s">&#39;GET&#39;</span><span class="p">,</span> <span class="s">&#39;http://example.com/&#39;</span><span class="p">,</span> <span class="n">retries</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
</pre></div>
</div>
<p>Errors will be wrapped in <a class="reference internal" href="index.html#urllib3.exceptions.MaxRetryError" title="urllib3.exceptions.MaxRetryError"><tt class="xref py py-class docutils literal"><span class="pre">MaxRetryError</span></tt></a> unless
retries are disabled, in which case the causing exception will be raised.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>total</strong> (<a class="reference external" href="http://docs.python.org/2.7/library/functions.html#int" title="(in Python v2.7)"><em>int</em></a>) &#8211; <p>Total number of retries to allow. Takes precedence over other counts.</p>
<p>Set to <tt class="docutils literal"><span class="pre">None</span></tt> to remove this constraint and fall back on other
counts. It&#8217;s a good idea to set this to some sensibly-high value to
account for unexpected edge cases and avoid infinite retry loops.</p>
<p>Set to <tt class="docutils literal"><span class="pre">0</span></tt> to fail on the first retry.</p>
<p>Set to <tt class="docutils literal"><span class="pre">False</span></tt> to disable and imply <tt class="docutils literal"><span class="pre">raise_on_redirect=False</span></tt>.</p>
</li>
<li><strong>connect</strong> (<a class="reference external" href="http://docs.python.org/2.7/library/functions.html#int" title="(in Python v2.7)"><em>int</em></a>) &#8211; <p>How many connection-related errors to retry on.</p>
<p>These are errors raised before the request is sent to the remote server,
which we assume has not triggered the server to process the request.</p>
<p>Set to <tt class="docutils literal"><span class="pre">0</span></tt> to fail on the first retry of this type.</p>
</li>
<li><strong>read</strong> (<a class="reference external" href="http://docs.python.org/2.7/library/functions.html#int" title="(in Python v2.7)"><em>int</em></a>) &#8211; <p>How many times to retry on read errors.</p>
<p>These errors are raised after the request was sent to the server, so the
request may have side-effects.</p>
<p>Set to <tt class="docutils literal"><span class="pre">0</span></tt> to fail on the first retry of this type.</p>
</li>
<li><strong>redirect</strong> (<a class="reference external" href="http://docs.python.org/2.7/library/functions.html#int" title="(in Python v2.7)"><em>int</em></a>) &#8211; <p>How many redirects to perform. Limit this to avoid infinite redirect
loops.</p>
<p>A redirect is a HTTP response with a status code 301, 302, 303, 307 or
308.</p>
<p>Set to <tt class="docutils literal"><span class="pre">0</span></tt> to fail on the first retry of this type.</p>
<p>Set to <tt class="docutils literal"><span class="pre">False</span></tt> to disable and imply <tt class="docutils literal"><span class="pre">raise_on_redirect=False</span></tt>.</p>
</li>
<li><strong>method_whitelist</strong> (<em>iterable</em>) &#8211; <p>Set of uppercased HTTP method verbs that we should retry on.</p>
<p>By default, we only retry on methods which are considered to be
indempotent (multiple requests with the same parameters end with the
same state). See <tt class="xref py py-attr docutils literal"><span class="pre">Retry.DEFAULT_METHOD_WHITELIST</span></tt>.</p>
</li>
<li><strong>status_forcelist</strong> (<em>iterable</em>) &#8211; <p>A set of HTTP status codes that we should force a retry on.</p>
<p>By default, this is disabled with <tt class="docutils literal"><span class="pre">None</span></tt>.</p>
</li>
<li><strong>backoff_factor</strong> (<a class="reference external" href="http://docs.python.org/2.7/library/functions.html#float" title="(in Python v2.7)"><em>float</em></a>) &#8211; <p>A backoff factor to apply between attempts. urllib3 will sleep for:</p>
<div class="highlight-python"><div class="highlight"><pre>{backoff factor} * (2 ^ ({number of total retries} - 1))
</pre></div>
</div>
<p>seconds. If the backoff_factor is 0.1, then <tt class="xref py py-func docutils literal"><span class="pre">sleep()</span></tt> will sleep
for [0.1s, 0.2s, 0.4s, ...] between retries. It will never be longer
than <tt class="xref py py-attr docutils literal"><span class="pre">Retry.MAX_BACKOFF</span></tt>.</p>
<p>By default, backoff is disabled (set to 0).</p>
</li>
<li><strong>raise_on_redirect</strong> (<a class="reference external" href="http://docs.python.org/2.7/library/functions.html#bool" title="(in Python v2.7)"><em>bool</em></a>) &#8211; Whether, if the number of redirects is
exhausted, to raise a MaxRetryError, or to return a response with a
response code in the 3xx range.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="attribute">
<dt id="urllib3.util.retry.Retry.BACKOFF_MAX">
<tt class="descname">BACKOFF_MAX</tt><em class="property"> = 120</em><a class="headerlink" href="#urllib3.util.retry.Retry.BACKOFF_MAX" title="Permalink to this definition">¶</a></dt>
<dd><p>Maximum backoff time.</p>
</dd></dl>

<dl class="classmethod">
<dt id="urllib3.util.retry.Retry.from_int">
<em class="property">classmethod </em><tt class="descname">from_int</tt><big>(</big><em>retries</em>, <em>redirect=True</em>, <em>default=None</em><big>)</big><a class="headerlink" href="#urllib3.util.retry.Retry.from_int" title="Permalink to this definition">¶</a></dt>
<dd><p>Backwards-compatibility for the old retries format.</p>
</dd></dl>

<dl class="method">
<dt id="urllib3.util.retry.Retry.get_backoff_time">
<tt class="descname">get_backoff_time</tt><big>(</big><big>)</big><a class="headerlink" href="#urllib3.util.retry.Retry.get_backoff_time" title="Permalink to this definition">¶</a></dt>
<dd><p>Formula for computing the current backoff</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">float</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="urllib3.util.retry.Retry.increment">
<tt class="descname">increment</tt><big>(</big><em>method=None</em>, <em>url=None</em>, <em>response=None</em>, <em>error=None</em>, <em>_pool=None</em>, <em>_stacktrace=None</em><big>)</big><a class="headerlink" href="#urllib3.util.retry.Retry.increment" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a new Retry object with incremented retry counters.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>response</strong> (<a class="reference internal" href="index.html#urllib3.response.HTTPResponse" title="urllib3.response.HTTPResponse"><tt class="xref py py-class docutils literal"><span class="pre">HTTPResponse</span></tt></a>) &#8211; A response object, or None, if the server did not
return a response.</li>
<li><strong>error</strong> (<em>Exception</em>) &#8211; An error encountered during the request, or
None if the response was received successfully.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">A new <tt class="docutils literal"><span class="pre">Retry</span></tt> object.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="urllib3.util.retry.Retry.is_exhausted">
<tt class="descname">is_exhausted</tt><big>(</big><big>)</big><a class="headerlink" href="#urllib3.util.retry.Retry.is_exhausted" title="Permalink to this definition">¶</a></dt>
<dd><p>Are we out of retries?</p>
</dd></dl>

<dl class="method">
<dt id="urllib3.util.retry.Retry.is_forced_retry">
<tt class="descname">is_forced_retry</tt><big>(</big><em>method</em>, <em>status_code</em><big>)</big><a class="headerlink" href="#urllib3.util.retry.Retry.is_forced_retry" title="Permalink to this definition">¶</a></dt>
<dd><p>Is this method/status code retryable? (Based on method/codes whitelists)</p>
</dd></dl>

<dl class="method">
<dt id="urllib3.util.retry.Retry.sleep">
<tt class="descname">sleep</tt><big>(</big><big>)</big><a class="headerlink" href="#urllib3.util.retry.Retry.sleep" title="Permalink to this definition">¶</a></dt>
<dd><p>Sleep between retry attempts using an exponential backoff.</p>
<p>By default, the backoff factor is 0 and this method will return
immediately.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-urllib3.util.url">
<span id="url-helpers"></span><h3>URL Helpers<a class="headerlink" href="#module-urllib3.util.url" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="urllib3.util.url.Url">
<em class="property">class </em><tt class="descclassname">urllib3.util.url.</tt><tt class="descname">Url</tt><a class="headerlink" href="#urllib3.util.url.Url" title="Permalink to this definition">¶</a></dt>
<dd><p>Datastructure for representing an HTTP URL. Used as a return value for
<a class="reference internal" href="index.html#urllib3.util.url.parse_url" title="urllib3.util.url.parse_url"><tt class="xref py py-func docutils literal"><span class="pre">parse_url()</span></tt></a>.</p>
<dl class="attribute">
<dt id="urllib3.util.url.Url.hostname">
<tt class="descname">hostname</tt><a class="headerlink" href="#urllib3.util.url.Url.hostname" title="Permalink to this definition">¶</a></dt>
<dd><p>For backwards-compatibility with urlparse. We&#8217;re nice like that.</p>
</dd></dl>

<dl class="attribute">
<dt id="urllib3.util.url.Url.netloc">
<tt class="descname">netloc</tt><a class="headerlink" href="#urllib3.util.url.Url.netloc" title="Permalink to this definition">¶</a></dt>
<dd><p>Network location including host and port</p>
</dd></dl>

<dl class="attribute">
<dt id="urllib3.util.url.Url.request_uri">
<tt class="descname">request_uri</tt><a class="headerlink" href="#urllib3.util.url.Url.request_uri" title="Permalink to this definition">¶</a></dt>
<dd><p>Absolute path including the query string.</p>
</dd></dl>

<dl class="attribute">
<dt id="urllib3.util.url.Url.url">
<tt class="descname">url</tt><a class="headerlink" href="#urllib3.util.url.Url.url" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert self into a url</p>
<p>This function should more or less round-trip with <a class="reference internal" href="index.html#urllib3.util.url.parse_url" title="urllib3.util.url.parse_url"><tt class="xref py py-func docutils literal"><span class="pre">parse_url()</span></tt></a>. The
returned url may not be exactly the same as the url inputted to
<a class="reference internal" href="index.html#urllib3.util.url.parse_url" title="urllib3.util.url.parse_url"><tt class="xref py py-func docutils literal"><span class="pre">parse_url()</span></tt></a>, but it should be equivalent by the RFC (e.g., urls
with a blank port will have : removed).</p>
<p>Example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">U</span> <span class="o">=</span> <span class="n">parse_url</span><span class="p">(</span><span class="s">&#39;http://google.com/mail/&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">U</span><span class="o">.</span><span class="n">url</span>
<span class="go">&#39;http://google.com/mail/&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Url</span><span class="p">(</span><span class="s">&#39;http&#39;</span><span class="p">,</span> <span class="s">&#39;username:password&#39;</span><span class="p">,</span> <span class="s">&#39;host.com&#39;</span><span class="p">,</span> <span class="mi">80</span><span class="p">,</span>
<span class="gp">... </span><span class="s">&#39;/path&#39;</span><span class="p">,</span> <span class="s">&#39;query&#39;</span><span class="p">,</span> <span class="s">&#39;fragment&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">url</span>
<span class="go">&#39;http://username:password@host.com:80/path?query#fragment&#39;</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="urllib3.util.url.get_host">
<tt class="descclassname">urllib3.util.url.</tt><tt class="descname">get_host</tt><big>(</big><em>url</em><big>)</big><a class="headerlink" href="#urllib3.util.url.get_host" title="Permalink to this definition">¶</a></dt>
<dd><p>Deprecated. Use <a class="reference internal" href="index.html#urllib3.util.url.parse_url" title="urllib3.util.url.parse_url"><tt class="xref py py-func docutils literal"><span class="pre">parse_url()</span></tt></a> instead.</p>
</dd></dl>

<dl class="function">
<dt id="urllib3.util.url.parse_url">
<tt class="descclassname">urllib3.util.url.</tt><tt class="descname">parse_url</tt><big>(</big><em>url</em><big>)</big><a class="headerlink" href="#urllib3.util.url.parse_url" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a url, return a parsed <a class="reference internal" href="index.html#urllib3.util.url.Url" title="urllib3.util.url.Url"><tt class="xref py py-class docutils literal"><span class="pre">Url</span></tt></a> namedtuple. Best-effort is
performed to parse incomplete urls. Fields not provided will be None.</p>
<p>Partly backwards-compatible with <a class="reference external" href="http://docs.python.org/2.7/library/urlparse.html#module-urlparse" title="(in Python v2.7)"><tt class="xref py py-mod docutils literal"><span class="pre">urlparse</span></tt></a>.</p>
<p>Example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">parse_url</span><span class="p">(</span><span class="s">&#39;http://google.com/mail/&#39;</span><span class="p">)</span>
<span class="go">Url(scheme=&#39;http&#39;, host=&#39;google.com&#39;, port=None, path=&#39;/mail/&#39;, ...)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">parse_url</span><span class="p">(</span><span class="s">&#39;google.com:80&#39;</span><span class="p">)</span>
<span class="go">Url(scheme=None, host=&#39;google.com&#39;, port=80, path=None, ...)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">parse_url</span><span class="p">(</span><span class="s">&#39;/foo?bar&#39;</span><span class="p">)</span>
<span class="go">Url(scheme=None, host=None, port=None, path=&#39;/foo&#39;, query=&#39;bar&#39;, ...)</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="urllib3.util.url.split_first">
<tt class="descclassname">urllib3.util.url.</tt><tt class="descname">split_first</tt><big>(</big><em>s</em>, <em>delims</em><big>)</big><a class="headerlink" href="#urllib3.util.url.split_first" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a string and an iterable of delimiters, split on the first found
delimiter. Return two split parts and the matched delimiter.</p>
<p>If not found, then the first part is the full input string.</p>
<p>Example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">split_first</span><span class="p">(</span><span class="s">&#39;foo/bar?baz&#39;</span><span class="p">,</span> <span class="s">&#39;?/=&#39;</span><span class="p">)</span>
<span class="go">(&#39;foo&#39;, &#39;bar?baz&#39;, &#39;/&#39;)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">split_first</span><span class="p">(</span><span class="s">&#39;foo/bar?baz&#39;</span><span class="p">,</span> <span class="s">&#39;123&#39;</span><span class="p">)</span>
<span class="go">(&#39;foo/bar?baz&#39;, &#39;&#39;, None)</span>
</pre></div>
</div>
<p>Scales linearly with number of delims. Not ideal for large number of delims.</p>
</dd></dl>

</div>
<div class="section" id="module-urllib3.filepost">
<span id="filepost"></span><h3>Filepost<a class="headerlink" href="#module-urllib3.filepost" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="urllib3.filepost.choose_boundary">
<tt class="descclassname">urllib3.filepost.</tt><tt class="descname">choose_boundary</tt><big>(</big><big>)</big><a class="headerlink" href="#urllib3.filepost.choose_boundary" title="Permalink to this definition">¶</a></dt>
<dd><p>Our embarassingly-simple replacement for mimetools.choose_boundary.</p>
</dd></dl>

<dl class="function">
<dt id="urllib3.filepost.encode_multipart_formdata">
<tt class="descclassname">urllib3.filepost.</tt><tt class="descname">encode_multipart_formdata</tt><big>(</big><em>fields</em>, <em>boundary=None</em><big>)</big><a class="headerlink" href="#urllib3.filepost.encode_multipart_formdata" title="Permalink to this definition">¶</a></dt>
<dd><p>Encode a dictionary of <tt class="docutils literal"><span class="pre">fields</span></tt> using the multipart/form-data MIME format.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>fields</strong> &#8211; Dictionary of fields or list of (key, <a class="reference internal" href="index.html#urllib3.fields.RequestField" title="urllib3.fields.RequestField"><tt class="xref py py-class docutils literal"><span class="pre">RequestField</span></tt></a>).</li>
<li><strong>boundary</strong> &#8211; If not specified, then a random boundary will be generated using
<a class="reference external" href="http://docs.python.org/2.7/library/mimetools.html#mimetools.choose_boundary" title="(in Python v2.7)"><tt class="xref py py-func docutils literal"><span class="pre">mimetools.choose_boundary()</span></tt></a>.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="urllib3.filepost.iter_field_objects">
<tt class="descclassname">urllib3.filepost.</tt><tt class="descname">iter_field_objects</tt><big>(</big><em>fields</em><big>)</big><a class="headerlink" href="#urllib3.filepost.iter_field_objects" title="Permalink to this definition">¶</a></dt>
<dd><p>Iterate over fields.</p>
<p>Supports list of (k, v) tuples and dicts, and lists of
<a class="reference internal" href="index.html#urllib3.fields.RequestField" title="urllib3.fields.RequestField"><tt class="xref py py-class docutils literal"><span class="pre">RequestField</span></tt></a>.</p>
</dd></dl>

<dl class="function">
<dt id="urllib3.filepost.iter_fields">
<tt class="descclassname">urllib3.filepost.</tt><tt class="descname">iter_fields</tt><big>(</big><em>fields</em><big>)</big><a class="headerlink" href="#urllib3.filepost.iter_fields" title="Permalink to this definition">¶</a></dt>
<dd><div class="deprecated">
<p><span class="versionmodified">Deprecated since version 1.6.</span></p>
</div>
<p>Iterate over fields.</p>
<p>The addition of <a class="reference internal" href="index.html#urllib3.fields.RequestField" title="urllib3.fields.RequestField"><tt class="xref py py-class docutils literal"><span class="pre">RequestField</span></tt></a> makes this function
obsolete. Instead, use <a class="reference internal" href="index.html#urllib3.filepost.iter_field_objects" title="urllib3.filepost.iter_field_objects"><tt class="xref py py-func docutils literal"><span class="pre">iter_field_objects()</span></tt></a>, which returns
<a class="reference internal" href="index.html#urllib3.fields.RequestField" title="urllib3.fields.RequestField"><tt class="xref py py-class docutils literal"><span class="pre">RequestField</span></tt></a> objects.</p>
<p>Supports list of (k, v) tuples and dicts.</p>
</dd></dl>

<span class="target" id="module-urllib3.fields"></span><dl class="class">
<dt id="urllib3.fields.RequestField">
<em class="property">class </em><tt class="descclassname">urllib3.fields.</tt><tt class="descname">RequestField</tt><big>(</big><em>name</em>, <em>data</em>, <em>filename=None</em>, <em>headers=None</em><big>)</big><a class="headerlink" href="#urllib3.fields.RequestField" title="Permalink to this definition">¶</a></dt>
<dd><p>A data container for request body parameters.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>name</strong> &#8211; The name of this request field.</li>
<li><strong>data</strong> &#8211; The data/value body.</li>
<li><strong>filename</strong> &#8211; An optional filename of the request field.</li>
<li><strong>headers</strong> &#8211; An optional dict-like object of headers to initially use for the field.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="classmethod">
<dt id="urllib3.fields.RequestField.from_tuples">
<em class="property">classmethod </em><tt class="descname">from_tuples</tt><big>(</big><em>fieldname</em>, <em>value</em><big>)</big><a class="headerlink" href="#urllib3.fields.RequestField.from_tuples" title="Permalink to this definition">¶</a></dt>
<dd><p>A <a class="reference internal" href="index.html#urllib3.fields.RequestField" title="urllib3.fields.RequestField"><tt class="xref py py-class docutils literal"><span class="pre">RequestField</span></tt></a> factory from old-style tuple parameters.</p>
<p>Supports constructing <a class="reference internal" href="index.html#urllib3.fields.RequestField" title="urllib3.fields.RequestField"><tt class="xref py py-class docutils literal"><span class="pre">RequestField</span></tt></a> from
parameter of key/value strings AND key/filetuple. A filetuple is a
(filename, data, MIME type) tuple where the MIME type is optional.
For example:</p>
<div class="highlight-python"><div class="highlight"><pre>&#39;foo&#39;: &#39;bar&#39;,
&#39;fakefile&#39;: (&#39;foofile.txt&#39;, &#39;contents of foofile&#39;),
&#39;realfile&#39;: (&#39;barfile.txt&#39;, open(&#39;realfile&#39;).read()),
&#39;typedfile&#39;: (&#39;bazfile.bin&#39;, open(&#39;bazfile&#39;).read(), &#39;image/jpeg&#39;),
&#39;nonamefile&#39;: &#39;contents of nonamefile field&#39;,
</pre></div>
</div>
<p>Field names and filenames must be unicode.</p>
</dd></dl>

<dl class="method">
<dt id="urllib3.fields.RequestField.make_multipart">
<tt class="descname">make_multipart</tt><big>(</big><em>content_disposition=None</em>, <em>content_type=None</em>, <em>content_location=None</em><big>)</big><a class="headerlink" href="#urllib3.fields.RequestField.make_multipart" title="Permalink to this definition">¶</a></dt>
<dd><p>Makes this request field into a multipart request field.</p>
<p>This method overrides &#8220;Content-Disposition&#8221;, &#8220;Content-Type&#8221; and
&#8220;Content-Location&#8221; headers to the request parameter.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>content_type</strong> &#8211; The &#8216;Content-Type&#8217; of the request body.</li>
<li><strong>content_location</strong> &#8211; The &#8216;Content-Location&#8217; of the request body.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="urllib3.fields.RequestField.render_headers">
<tt class="descname">render_headers</tt><big>(</big><big>)</big><a class="headerlink" href="#urllib3.fields.RequestField.render_headers" title="Permalink to this definition">¶</a></dt>
<dd><p>Renders the headers for this request field.</p>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="urllib3.fields.format_header_param">
<tt class="descclassname">urllib3.fields.</tt><tt class="descname">format_header_param</tt><big>(</big><em>name</em>, <em>value</em><big>)</big><a class="headerlink" href="#urllib3.fields.format_header_param" title="Permalink to this definition">¶</a></dt>
<dd><p>Helper function to format and quote a single header parameter.</p>
<p>Particularly useful for header parameters which might contain
non-ASCII values, like file names. This follows RFC 2231, as
suggested by RFC 2388 Section 4.4.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>name</strong> &#8211; The name of the parameter, a string expected to be ASCII only.</li>
<li><strong>value</strong> &#8211; The value of the parameter, provided as a unicode string.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="urllib3.fields.guess_content_type">
<tt class="descclassname">urllib3.fields.</tt><tt class="descname">guess_content_type</tt><big>(</big><em>filename</em>, <em>default='application/octet-stream'</em><big>)</big><a class="headerlink" href="#urllib3.fields.guess_content_type" title="Permalink to this definition">¶</a></dt>
<dd><p>Guess the &#8220;Content-Type&#8221; of a file.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>filename</strong> &#8211; The filename to guess the &#8220;Content-Type&#8221; of using <a class="reference external" href="http://docs.python.org/2.7/library/mimetypes.html#module-mimetypes" title="(in Python v2.7)"><tt class="xref py py-mod docutils literal"><span class="pre">mimetypes</span></tt></a>.</li>
<li><strong>default</strong> &#8211; If no &#8220;Content-Type&#8221; can be guessed, default to <cite>default</cite>.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="module-urllib3.request">
<span id="request"></span><h3>Request<a class="headerlink" href="#module-urllib3.request" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="urllib3.request.RequestMethods">
<em class="property">class </em><tt class="descclassname">urllib3.request.</tt><tt class="descname">RequestMethods</tt><big>(</big><em>headers=None</em><big>)</big><a class="headerlink" href="#urllib3.request.RequestMethods" title="Permalink to this definition">¶</a></dt>
<dd><p>Convenience mixin for classes who implement a <tt class="xref py py-meth docutils literal"><span class="pre">urlopen()</span></tt> method, such
as <a class="reference internal" href="index.html#urllib3.connectionpool.HTTPConnectionPool" title="urllib3.connectionpool.HTTPConnectionPool"><tt class="xref py py-class docutils literal"><span class="pre">HTTPConnectionPool</span></tt></a> and
<a class="reference internal" href="index.html#urllib3.poolmanager.PoolManager" title="urllib3.poolmanager.PoolManager"><tt class="xref py py-class docutils literal"><span class="pre">PoolManager</span></tt></a>.</p>
<p>Provides behavior for making common types of HTTP request methods and
decides which type of request field encoding to use.</p>
<p>Specifically,</p>
<p><a class="reference internal" href="index.html#urllib3.request.RequestMethods.request_encode_url" title="urllib3.request.RequestMethods.request_encode_url"><tt class="xref py py-meth docutils literal"><span class="pre">request_encode_url()</span></tt></a> is for sending requests whose fields are
encoded in the URL (such as GET, HEAD, DELETE).</p>
<p><a class="reference internal" href="index.html#urllib3.request.RequestMethods.request_encode_body" title="urllib3.request.RequestMethods.request_encode_body"><tt class="xref py py-meth docutils literal"><span class="pre">request_encode_body()</span></tt></a> is for sending requests whose fields are
encoded in the <em>body</em> of the request using multipart or www-form-urlencoded
(such as for POST, PUT, PATCH).</p>
<p><a class="reference internal" href="index.html#urllib3.request.RequestMethods.request" title="urllib3.request.RequestMethods.request"><tt class="xref py py-meth docutils literal"><span class="pre">request()</span></tt></a> is for making any kind of request, it will look up the
appropriate encoding format and use one of the above two methods to make
the request.</p>
<p>Initializer parameters:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>headers</strong> &#8211; Headers to include with all requests, unless other headers are given
explicitly.</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="urllib3.request.RequestMethods.request">
<tt class="descname">request</tt><big>(</big><em>method</em>, <em>url</em>, <em>fields=None</em>, <em>headers=None</em>, <em>**urlopen_kw</em><big>)</big><a class="headerlink" href="#urllib3.request.RequestMethods.request" title="Permalink to this definition">¶</a></dt>
<dd><p>Make a request using <tt class="xref py py-meth docutils literal"><span class="pre">urlopen()</span></tt> with the appropriate encoding of
<tt class="docutils literal"><span class="pre">fields</span></tt> based on the <tt class="docutils literal"><span class="pre">method</span></tt> used.</p>
<p>This is a convenience method that requires the least amount of manual
effort. It can be used in most situations, while still having the
option to drop down to more specific methods when necessary, such as
<a class="reference internal" href="index.html#urllib3.request.RequestMethods.request_encode_url" title="urllib3.request.RequestMethods.request_encode_url"><tt class="xref py py-meth docutils literal"><span class="pre">request_encode_url()</span></tt></a>, <a class="reference internal" href="index.html#urllib3.request.RequestMethods.request_encode_body" title="urllib3.request.RequestMethods.request_encode_body"><tt class="xref py py-meth docutils literal"><span class="pre">request_encode_body()</span></tt></a>,
or even the lowest level <tt class="xref py py-meth docutils literal"><span class="pre">urlopen()</span></tt>.</p>
</dd></dl>

<dl class="method">
<dt id="urllib3.request.RequestMethods.request_encode_body">
<tt class="descname">request_encode_body</tt><big>(</big><em>method</em>, <em>url</em>, <em>fields=None</em>, <em>headers=None</em>, <em>encode_multipart=True</em>, <em>multipart_boundary=None</em>, <em>**urlopen_kw</em><big>)</big><a class="headerlink" href="#urllib3.request.RequestMethods.request_encode_body" title="Permalink to this definition">¶</a></dt>
<dd><p>Make a request using <tt class="xref py py-meth docutils literal"><span class="pre">urlopen()</span></tt> with the <tt class="docutils literal"><span class="pre">fields</span></tt> encoded in
the body. This is useful for request methods like POST, PUT, PATCH, etc.</p>
<p>When <tt class="docutils literal"><span class="pre">encode_multipart=True</span></tt> (default), then
<a class="reference internal" href="index.html#urllib3.filepost.encode_multipart_formdata" title="urllib3.filepost.encode_multipart_formdata"><tt class="xref py py-meth docutils literal"><span class="pre">urllib3.filepost.encode_multipart_formdata()</span></tt></a> is used to encode
the payload with the appropriate content type. Otherwise
<tt class="xref py py-meth docutils literal"><span class="pre">urllib.urlencode()</span></tt> is used with the
&#8216;application/x-www-form-urlencoded&#8217; content type.</p>
<p>Multipart encoding must be used when posting files, and it&#8217;s reasonably
safe to use it in other times too. However, it may break request
signing, such as with OAuth.</p>
<p>Supports an optional <tt class="docutils literal"><span class="pre">fields</span></tt> parameter of key/value strings AND
key/filetuple. A filetuple is a (filename, data, MIME type) tuple where
the MIME type is optional. For example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">fields</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">&#39;foo&#39;</span><span class="p">:</span> <span class="s">&#39;bar&#39;</span><span class="p">,</span>
    <span class="s">&#39;fakefile&#39;</span><span class="p">:</span> <span class="p">(</span><span class="s">&#39;foofile.txt&#39;</span><span class="p">,</span> <span class="s">&#39;contents of foofile&#39;</span><span class="p">),</span>
    <span class="s">&#39;realfile&#39;</span><span class="p">:</span> <span class="p">(</span><span class="s">&#39;barfile.txt&#39;</span><span class="p">,</span> <span class="nb">open</span><span class="p">(</span><span class="s">&#39;realfile&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">read</span><span class="p">()),</span>
    <span class="s">&#39;typedfile&#39;</span><span class="p">:</span> <span class="p">(</span><span class="s">&#39;bazfile.bin&#39;</span><span class="p">,</span> <span class="nb">open</span><span class="p">(</span><span class="s">&#39;bazfile&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">read</span><span class="p">(),</span>
                  <span class="s">&#39;image/jpeg&#39;</span><span class="p">),</span>
    <span class="s">&#39;nonamefile&#39;</span><span class="p">:</span> <span class="s">&#39;contents of nonamefile field&#39;</span><span class="p">,</span>
<span class="p">}</span>
</pre></div>
</div>
<p>When uploading a file, providing a filename (the first parameter of the
tuple) is optional but recommended to best mimick behavior of browsers.</p>
<p>Note that if <tt class="docutils literal"><span class="pre">headers</span></tt> are supplied, the &#8216;Content-Type&#8217; header will
be overwritten because it depends on the dynamic random boundary string
which is used to compose the body of the request. The random boundary
string can be explicitly set with the <tt class="docutils literal"><span class="pre">multipart_boundary</span></tt> parameter.</p>
</dd></dl>

<dl class="method">
<dt id="urllib3.request.RequestMethods.request_encode_url">
<tt class="descname">request_encode_url</tt><big>(</big><em>method</em>, <em>url</em>, <em>fields=None</em>, <em>**urlopen_kw</em><big>)</big><a class="headerlink" href="#urllib3.request.RequestMethods.request_encode_url" title="Permalink to this definition">¶</a></dt>
<dd><p>Make a request using <tt class="xref py py-meth docutils literal"><span class="pre">urlopen()</span></tt> with the <tt class="docutils literal"><span class="pre">fields</span></tt> encoded in
the url. This is useful for request methods like GET, HEAD, DELETE, etc.</p>
</dd></dl>

</dd></dl>

<span class="target" id="module-urllib3.util.request"></span><dl class="function">
<dt id="urllib3.util.request.make_headers">
<tt class="descclassname">urllib3.util.request.</tt><tt class="descname">make_headers</tt><big>(</big><em>keep_alive=None</em>, <em>accept_encoding=None</em>, <em>user_agent=None</em>, <em>basic_auth=None</em>, <em>proxy_basic_auth=None</em>, <em>disable_cache=None</em><big>)</big><a class="headerlink" href="#urllib3.util.request.make_headers" title="Permalink to this definition">¶</a></dt>
<dd><p>Shortcuts for generating request headers.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>keep_alive</strong> &#8211; If <tt class="docutils literal"><span class="pre">True</span></tt>, adds &#8216;connection: keep-alive&#8217; header.</li>
<li><strong>accept_encoding</strong> &#8211; Can be a boolean, list, or string.
<tt class="docutils literal"><span class="pre">True</span></tt> translates to &#8216;gzip,deflate&#8217;.
List will get joined by comma.
String will be used as provided.</li>
<li><strong>user_agent</strong> &#8211; String representing the user-agent you want, such as
&#8220;python-urllib3/0.6&#8221;</li>
<li><strong>basic_auth</strong> &#8211; Colon-separated username:password string for &#8216;authorization: basic ...&#8217;
auth header.</li>
<li><strong>proxy_basic_auth</strong> &#8211; Colon-separated username:password string for &#8216;proxy-authorization: basic ...&#8217;
auth header.</li>
<li><strong>disable_cache</strong> &#8211; If <tt class="docutils literal"><span class="pre">True</span></tt>, adds &#8216;cache-control: no-cache&#8217; header.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>Example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">make_headers</span><span class="p">(</span><span class="n">keep_alive</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">user_agent</span><span class="o">=</span><span class="s">&quot;Batman/1.0&quot;</span><span class="p">)</span>
<span class="go">{&#39;connection&#39;: &#39;keep-alive&#39;, &#39;user-agent&#39;: &#39;Batman/1.0&#39;}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">make_headers</span><span class="p">(</span><span class="n">accept_encoding</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="go">{&#39;accept-encoding&#39;: &#39;gzip,deflate&#39;}</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="module-urllib3.response">
<span id="response"></span><h3>Response<a class="headerlink" href="#module-urllib3.response" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="urllib3.response.DeflateDecoder">
<em class="property">class </em><tt class="descclassname">urllib3.response.</tt><tt class="descname">DeflateDecoder</tt><a class="headerlink" href="#urllib3.response.DeflateDecoder" title="Permalink to this definition">¶</a></dt>
<dd><dl class="method">
<dt id="urllib3.response.DeflateDecoder.decompress">
<tt class="descname">decompress</tt><big>(</big><em>data</em><big>)</big><a class="headerlink" href="#urllib3.response.DeflateDecoder.decompress" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="urllib3.response.GzipDecoder">
<em class="property">class </em><tt class="descclassname">urllib3.response.</tt><tt class="descname">GzipDecoder</tt><a class="headerlink" href="#urllib3.response.GzipDecoder" title="Permalink to this definition">¶</a></dt>
<dd><dl class="method">
<dt id="urllib3.response.GzipDecoder.decompress">
<tt class="descname">decompress</tt><big>(</big><em>data</em><big>)</big><a class="headerlink" href="#urllib3.response.GzipDecoder.decompress" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="urllib3.response.HTTPResponse">
<em class="property">class </em><tt class="descclassname">urllib3.response.</tt><tt class="descname">HTTPResponse</tt><big>(</big><em>body=''</em>, <em>headers=None</em>, <em>status=0</em>, <em>version=0</em>, <em>reason=None</em>, <em>strict=0</em>, <em>preload_content=True</em>, <em>decode_content=True</em>, <em>original_response=None</em>, <em>pool=None</em>, <em>connection=None</em><big>)</big><a class="headerlink" href="#urllib3.response.HTTPResponse" title="Permalink to this definition">¶</a></dt>
<dd><p>HTTP Response container.</p>
<p>Backwards-compatible to httplib&#8217;s HTTPResponse but the response <tt class="docutils literal"><span class="pre">body</span></tt> is
loaded and decoded on-demand when the <tt class="docutils literal"><span class="pre">data</span></tt> property is accessed.  This
class is also compatible with the Python standard library&#8217;s <a class="reference external" href="http://docs.python.org/2.7/library/io.html#module-io" title="(in Python v2.7)"><tt class="xref py py-mod docutils literal"><span class="pre">io</span></tt></a>
module, and can hence be treated as a readable object in the context of that
framework.</p>
<p>Extra parameters for behaviour not present in httplib.HTTPResponse:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>preload_content</strong> &#8211; If True, the response&#8217;s body will be preloaded during construction.</li>
<li><strong>decode_content</strong> &#8211; If True, attempts to decode specific content-encoding&#8217;s based on headers
(like &#8216;gzip&#8217; and &#8216;deflate&#8217;) will be skipped and raw data will be used
instead.</li>
<li><strong>original_response</strong> &#8211; When this HTTPResponse wrapper is generated from an httplib.HTTPResponse
object, it&#8217;s convenient to include the original for debug purposes. It&#8217;s
otherwise unused.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="attribute">
<dt id="urllib3.response.HTTPResponse.CONTENT_DECODERS">
<tt class="descname">CONTENT_DECODERS</tt><em class="property"> = ['gzip', 'deflate']</em><a class="headerlink" href="#urllib3.response.HTTPResponse.CONTENT_DECODERS" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="urllib3.response.HTTPResponse.REDIRECT_STATUSES">
<tt class="descname">REDIRECT_STATUSES</tt><em class="property"> = [301, 302, 303, 307, 308]</em><a class="headerlink" href="#urllib3.response.HTTPResponse.REDIRECT_STATUSES" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="urllib3.response.HTTPResponse.close">
<tt class="descname">close</tt><big>(</big><big>)</big><a class="headerlink" href="#urllib3.response.HTTPResponse.close" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="urllib3.response.HTTPResponse.closed">
<tt class="descname">closed</tt><a class="headerlink" href="#urllib3.response.HTTPResponse.closed" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="urllib3.response.HTTPResponse.data">
<tt class="descname">data</tt><a class="headerlink" href="#urllib3.response.HTTPResponse.data" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="urllib3.response.HTTPResponse.fileno">
<tt class="descname">fileno</tt><big>(</big><big>)</big><a class="headerlink" href="#urllib3.response.HTTPResponse.fileno" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="urllib3.response.HTTPResponse.flush">
<tt class="descname">flush</tt><big>(</big><big>)</big><a class="headerlink" href="#urllib3.response.HTTPResponse.flush" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="classmethod">
<dt id="urllib3.response.HTTPResponse.from_httplib">
<em class="property">classmethod </em><tt class="descname">from_httplib</tt><big>(</big><em>ResponseCls</em>, <em>r</em>, <em>**response_kw</em><big>)</big><a class="headerlink" href="#urllib3.response.HTTPResponse.from_httplib" title="Permalink to this definition">¶</a></dt>
<dd><p>Given an <a class="reference external" href="http://docs.python.org/2.7/library/httplib.html#httplib.HTTPResponse" title="(in Python v2.7)"><tt class="xref py py-class docutils literal"><span class="pre">httplib.HTTPResponse</span></tt></a> instance <tt class="docutils literal"><span class="pre">r</span></tt>, return a
corresponding <a class="reference internal" href="index.html#urllib3.response.HTTPResponse" title="urllib3.response.HTTPResponse"><tt class="xref py py-class docutils literal"><span class="pre">urllib3.response.HTTPResponse</span></tt></a> object.</p>
<p>Remaining parameters are passed to the HTTPResponse constructor, along
with <tt class="docutils literal"><span class="pre">original_response=r</span></tt>.</p>
</dd></dl>

<dl class="method">
<dt id="urllib3.response.HTTPResponse.get_redirect_location">
<tt class="descname">get_redirect_location</tt><big>(</big><big>)</big><a class="headerlink" href="#urllib3.response.HTTPResponse.get_redirect_location" title="Permalink to this definition">¶</a></dt>
<dd><p>Should we redirect and where to?</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">Truthy redirect location string if we got a redirect status
code and valid location. <tt class="docutils literal"><span class="pre">None</span></tt> if redirect status and no
location. <tt class="docutils literal"><span class="pre">False</span></tt> if not a redirect status code.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="urllib3.response.HTTPResponse.getheader">
<tt class="descname">getheader</tt><big>(</big><em>name</em>, <em>default=None</em><big>)</big><a class="headerlink" href="#urllib3.response.HTTPResponse.getheader" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="urllib3.response.HTTPResponse.getheaders">
<tt class="descname">getheaders</tt><big>(</big><big>)</big><a class="headerlink" href="#urllib3.response.HTTPResponse.getheaders" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="urllib3.response.HTTPResponse.read">
<tt class="descname">read</tt><big>(</big><em>amt=None</em>, <em>decode_content=None</em>, <em>cache_content=False</em><big>)</big><a class="headerlink" href="#urllib3.response.HTTPResponse.read" title="Permalink to this definition">¶</a></dt>
<dd><p>Similar to <a class="reference external" href="http://docs.python.org/2.7/library/httplib.html#httplib.HTTPResponse.read" title="(in Python v2.7)"><tt class="xref py py-meth docutils literal"><span class="pre">httplib.HTTPResponse.read()</span></tt></a>, but with two additional
parameters: <tt class="docutils literal"><span class="pre">decode_content</span></tt> and <tt class="docutils literal"><span class="pre">cache_content</span></tt>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>amt</strong> &#8211; How much of the content to read. If specified, caching is skipped
because it doesn&#8217;t make sense to cache partial content as the full
response.</li>
<li><strong>decode_content</strong> &#8211; If True, will attempt to decode the body based on the
&#8216;content-encoding&#8217; header.</li>
<li><strong>cache_content</strong> &#8211; If True, will save the returned data such that the same result is
returned despite of the state of the underlying file object. This
is useful if you want the <tt class="docutils literal"><span class="pre">.data</span></tt> property to continue working
after having <tt class="docutils literal"><span class="pre">.read()</span></tt> the file object. (Overridden if <tt class="docutils literal"><span class="pre">amt</span></tt> is
set.)</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="urllib3.response.HTTPResponse.read_chunked">
<tt class="descname">read_chunked</tt><big>(</big><em>amt=None</em>, <em>decode_content=None</em><big>)</big><a class="headerlink" href="#urllib3.response.HTTPResponse.read_chunked" title="Permalink to this definition">¶</a></dt>
<dd><p>Similar to <a class="reference internal" href="index.html#urllib3.response.HTTPResponse.read" title="urllib3.response.HTTPResponse.read"><tt class="xref py py-meth docutils literal"><span class="pre">HTTPResponse.read()</span></tt></a>, but with an additional
parameter: <tt class="docutils literal"><span class="pre">decode_content</span></tt>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>decode_content</strong> &#8211; If True, will attempt to decode the body based on the
&#8216;content-encoding&#8217; header.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="urllib3.response.HTTPResponse.readable">
<tt class="descname">readable</tt><big>(</big><big>)</big><a class="headerlink" href="#urllib3.response.HTTPResponse.readable" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="urllib3.response.HTTPResponse.readinto">
<tt class="descname">readinto</tt><big>(</big><em>b</em><big>)</big><a class="headerlink" href="#urllib3.response.HTTPResponse.readinto" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="urllib3.response.HTTPResponse.release_conn">
<tt class="descname">release_conn</tt><big>(</big><big>)</big><a class="headerlink" href="#urllib3.response.HTTPResponse.release_conn" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="urllib3.response.HTTPResponse.stream">
<tt class="descname">stream</tt><big>(</big><em>amt=65536</em>, <em>decode_content=None</em><big>)</big><a class="headerlink" href="#urllib3.response.HTTPResponse.stream" title="Permalink to this definition">¶</a></dt>
<dd><p>A generator wrapper for the read() method. A call will block until
<tt class="docutils literal"><span class="pre">amt</span></tt> bytes have been read from the connection or until the
connection is closed.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>amt</strong> &#8211; How much of the content to read. The generator will return up to
much data per iteration, but may return less. This is particularly
likely when using compressed data. However, the empty string will
never be returned.</li>
<li><strong>decode_content</strong> &#8211; If True, will attempt to decode the body based on the
&#8216;content-encoding&#8217; header.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="urllib3.response.HTTPResponse.tell">
<tt class="descname">tell</tt><big>(</big><big>)</big><a class="headerlink" href="#urllib3.response.HTTPResponse.tell" title="Permalink to this definition">¶</a></dt>
<dd><p>Obtain the number of bytes pulled over the wire so far. May differ from
the amount of content returned by :meth:<tt class="docutils literal"><span class="pre">HTTPResponse.read</span></tt> if bytes
are encoded on the wire (e.g, compressed).</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-urllib3.util.ssl_">
<span id="ssl-tls-helpers"></span><h3>SSL/TLS Helpers<a class="headerlink" href="#module-urllib3.util.ssl_" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="urllib3.util.ssl_.assert_fingerprint">
<tt class="descclassname">urllib3.util.ssl_.</tt><tt class="descname">assert_fingerprint</tt><big>(</big><em>cert</em>, <em>fingerprint</em><big>)</big><a class="headerlink" href="#urllib3.util.ssl_.assert_fingerprint" title="Permalink to this definition">¶</a></dt>
<dd><p>Checks if given fingerprint matches the supplied certificate.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>cert</strong> &#8211; Certificate as bytes object.</li>
<li><strong>fingerprint</strong> &#8211; Fingerprint as string of hexdigits, can be interspersed by colons.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="urllib3.util.ssl_.create_urllib3_context">
<tt class="descclassname">urllib3.util.ssl_.</tt><tt class="descname">create_urllib3_context</tt><big>(</big><em>ssl_version=None</em>, <em>cert_reqs=None</em>, <em>options=None</em>, <em>ciphers=None</em><big>)</big><a class="headerlink" href="#urllib3.util.ssl_.create_urllib3_context" title="Permalink to this definition">¶</a></dt>
<dd><p>All arguments have the same meaning as <tt class="docutils literal"><span class="pre">ssl_wrap_socket</span></tt>.</p>
<p>By default, this function does a lot of the same work that
<tt class="docutils literal"><span class="pre">ssl.create_default_context</span></tt> does on Python 3.4+. It:</p>
<ul class="simple">
<li>Disables SSLv2, SSLv3, and compression</li>
<li>Sets a restricted set of server ciphers</li>
</ul>
<p>If you wish to enable SSLv3, you can do:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">urllib3.util</span> <span class="kn">import</span> <span class="n">ssl_</span>
<span class="n">context</span> <span class="o">=</span> <span class="n">ssl_</span><span class="o">.</span><span class="n">create_urllib3_context</span><span class="p">()</span>
<span class="n">context</span><span class="o">.</span><span class="n">options</span> <span class="o">&amp;=</span> <span class="o">~</span><span class="n">ssl_</span><span class="o">.</span><span class="n">OP_NO_SSLv3</span>
</pre></div>
</div>
<p>You can do the same to enable compression (substituting <tt class="docutils literal"><span class="pre">COMPRESSION</span></tt>
for <tt class="docutils literal"><span class="pre">SSLv3</span></tt> in the last line above).</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>ssl_version</strong> &#8211; The desired protocol version to use. This will default to
PROTOCOL_SSLv23 which will negotiate the highest protocol that both
the server and your installation of OpenSSL support.</li>
<li><strong>cert_reqs</strong> &#8211; Whether to require the certificate verification. This defaults to
<tt class="docutils literal"><span class="pre">ssl.CERT_REQUIRED</span></tt>.</li>
<li><strong>options</strong> &#8211; Specific OpenSSL options. These default to <tt class="docutils literal"><span class="pre">ssl.OP_NO_SSLv2</span></tt>,
<tt class="docutils literal"><span class="pre">ssl.OP_NO_SSLv3</span></tt>, <tt class="docutils literal"><span class="pre">ssl.OP_NO_COMPRESSION</span></tt>.</li>
<li><strong>ciphers</strong> &#8211; Which cipher suites to allow the server to select.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">Constructed SSLContext object with specified options</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">SSLContext</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="urllib3.util.ssl_.resolve_cert_reqs">
<tt class="descclassname">urllib3.util.ssl_.</tt><tt class="descname">resolve_cert_reqs</tt><big>(</big><em>candidate</em><big>)</big><a class="headerlink" href="#urllib3.util.ssl_.resolve_cert_reqs" title="Permalink to this definition">¶</a></dt>
<dd><p>Resolves the argument to a numeric constant, which can be passed to
the wrap_socket function/method from the ssl module.
Defaults to <a class="reference external" href="http://docs.python.org/2.7/library/ssl.html#ssl.CERT_NONE" title="(in Python v2.7)"><tt class="xref py py-data docutils literal"><span class="pre">ssl.CERT_NONE</span></tt></a>.
If given a string it is assumed to be the name of the constant in the
<a class="reference external" href="http://docs.python.org/2.7/library/ssl.html#module-ssl" title="(in Python v2.7)"><tt class="xref py py-mod docutils literal"><span class="pre">ssl</span></tt></a> module or its abbrevation.
(So you can specify <cite>REQUIRED</cite> instead of <cite>CERT_REQUIRED</cite>.
If it&#8217;s neither <cite>None</cite> nor a string we assume it is already the numeric
constant which can directly be passed to wrap_socket.</p>
</dd></dl>

<dl class="function">
<dt id="urllib3.util.ssl_.resolve_ssl_version">
<tt class="descclassname">urllib3.util.ssl_.</tt><tt class="descname">resolve_ssl_version</tt><big>(</big><em>candidate</em><big>)</big><a class="headerlink" href="#urllib3.util.ssl_.resolve_ssl_version" title="Permalink to this definition">¶</a></dt>
<dd><p>like resolve_cert_reqs</p>
</dd></dl>

<dl class="function">
<dt id="urllib3.util.ssl_.ssl_wrap_socket">
<tt class="descclassname">urllib3.util.ssl_.</tt><tt class="descname">ssl_wrap_socket</tt><big>(</big><em>sock</em>, <em>keyfile=None</em>, <em>certfile=None</em>, <em>cert_reqs=None</em>, <em>ca_certs=None</em>, <em>server_hostname=None</em>, <em>ssl_version=None</em>, <em>ciphers=None</em>, <em>ssl_context=None</em><big>)</big><a class="headerlink" href="#urllib3.util.ssl_.ssl_wrap_socket" title="Permalink to this definition">¶</a></dt>
<dd><p>All arguments except for server_hostname and ssl_context have the same
meaning as they do when using <a class="reference external" href="http://docs.python.org/2.7/library/ssl.html#ssl.wrap_socket" title="(in Python v2.7)"><tt class="xref py py-func docutils literal"><span class="pre">ssl.wrap_socket()</span></tt></a>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>server_hostname</strong> &#8211; When SNI is supported, the expected hostname of the certificate</li>
<li><strong>ssl_context</strong> &#8211; A pre-made <tt class="xref py py-class docutils literal"><span class="pre">SSLContext</span></tt> object. If none is provided, one will
be created using <a class="reference internal" href="index.html#urllib3.util.ssl_.create_urllib3_context" title="urllib3.util.ssl_.create_urllib3_context"><tt class="xref py py-func docutils literal"><span class="pre">create_urllib3_context()</span></tt></a>.</li>
<li><strong>ciphers</strong> &#8211; A string of ciphers we wish the client to support. This is not
supported on Python 2.6 as the ssl module does not support it.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
</div>
<span id="document-collections"></span><div class="section" id="collections">
<h2>Collections<a class="headerlink" href="#collections" title="Permalink to this headline">¶</a></h2>
<p>These datastructures are used to implement the behaviour of various urllib3
components in a decoupled and application-agnostic design.</p>
<span class="target" id="module-urllib3._collections"></span><dl class="class">
<dt id="urllib3._collections.RecentlyUsedContainer">
<em class="property">class </em><tt class="descclassname">urllib3._collections.</tt><tt class="descname">RecentlyUsedContainer</tt><big>(</big><em>maxsize=10</em>, <em>dispose_func=None</em><big>)</big><a class="headerlink" href="#urllib3._collections.RecentlyUsedContainer" title="Permalink to this definition">¶</a></dt>
<dd><p>Provides a thread-safe dict-like container which maintains up to
<tt class="docutils literal"><span class="pre">maxsize</span></tt> keys while throwing away the least-recently-used keys beyond
<tt class="docutils literal"><span class="pre">maxsize</span></tt>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>maxsize</strong> &#8211; Maximum number of recent elements to retain.</li>
<li><strong>dispose_func</strong> &#8211; Every time an item is evicted from the container,
<tt class="docutils literal"><span class="pre">dispose_func(value)</span></tt> is called.  Callback which will get called</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="attribute">
<dt id="urllib3._collections.RecentlyUsedContainer.ContainerCls">
<tt class="descname">ContainerCls</tt><a class="headerlink" href="#urllib3._collections.RecentlyUsedContainer.ContainerCls" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <tt class="xref py py-class docutils literal"><span class="pre">OrderedDict</span></tt></p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="urllib3._collections.HTTPHeaderDict">
<em class="property">class </em><tt class="descclassname">urllib3._collections.</tt><tt class="descname">HTTPHeaderDict</tt><big>(</big><em>headers=None</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#urllib3._collections.HTTPHeaderDict" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>headers</strong> &#8211; An iterable of field-value pairs. Must not contain multiple field names
when compared case-insensitively.</li>
<li><strong>kwargs</strong> &#8211; Additional field-value pairs to pass in to <tt class="docutils literal"><span class="pre">dict.update</span></tt>.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>A <tt class="docutils literal"><span class="pre">dict</span></tt> like container for storing HTTP Headers.</p>
<p>Field names are stored and compared case-insensitively in compliance with
RFC 7230. Iteration provides the first case-sensitive key seen for each
case-insensitive pair.</p>
<p>Using <tt class="docutils literal"><span class="pre">__setitem__</span></tt> syntax overwrites fields that compare equal
case-insensitively in order to maintain <tt class="docutils literal"><span class="pre">dict</span></tt>&#8216;s api. For fields that
compare equal, instead create a new <tt class="docutils literal"><span class="pre">HTTPHeaderDict</span></tt> and use <tt class="docutils literal"><span class="pre">.add</span></tt>
in a loop.</p>
<p>If multiple fields that are equal case-insensitively are passed to the
constructor or <tt class="docutils literal"><span class="pre">.update</span></tt>, the behavior is undefined and some will be
lost.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">headers</span> <span class="o">=</span> <span class="n">HTTPHeaderDict</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">headers</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s">&#39;Set-Cookie&#39;</span><span class="p">,</span> <span class="s">&#39;foo=bar&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">headers</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s">&#39;set-cookie&#39;</span><span class="p">,</span> <span class="s">&#39;baz=quxx&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">headers</span><span class="p">[</span><span class="s">&#39;content-length&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&#39;7&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">headers</span><span class="p">[</span><span class="s">&#39;SET-cookie&#39;</span><span class="p">]</span>
<span class="go">&#39;foo=bar, baz=quxx&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">headers</span><span class="p">[</span><span class="s">&#39;Content-Length&#39;</span><span class="p">]</span>
<span class="go">&#39;7&#39;</span>
</pre></div>
</div>
<dl class="method">
<dt id="urllib3._collections.HTTPHeaderDict.add">
<tt class="descname">add</tt><big>(</big><em>key</em>, <em>val</em><big>)</big><a class="headerlink" href="#urllib3._collections.HTTPHeaderDict.add" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds a (name, value) pair, doesn&#8217;t overwrite the value if it already
exists.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">headers</span> <span class="o">=</span> <span class="n">HTTPHeaderDict</span><span class="p">(</span><span class="n">foo</span><span class="o">=</span><span class="s">&#39;bar&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">headers</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s">&#39;Foo&#39;</span><span class="p">,</span> <span class="s">&#39;baz&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">headers</span><span class="p">[</span><span class="s">&#39;foo&#39;</span><span class="p">]</span>
<span class="go">&#39;bar, baz&#39;</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="urllib3._collections.HTTPHeaderDict.extend">
<tt class="descname">extend</tt><big>(</big><em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#urllib3._collections.HTTPHeaderDict.extend" title="Permalink to this definition">¶</a></dt>
<dd><p>Generic import function for any type of header-like object.
Adapted version of MutableMapping.update in order to insert items
with self.add instead of self.__setitem__</p>
</dd></dl>

<dl class="classmethod">
<dt id="urllib3._collections.HTTPHeaderDict.from_httplib">
<em class="property">classmethod </em><tt class="descname">from_httplib</tt><big>(</big><em>message</em><big>)</big><a class="headerlink" href="#urllib3._collections.HTTPHeaderDict.from_httplib" title="Permalink to this definition">¶</a></dt>
<dd><p>Read headers from a Python 2 httplib message object.</p>
</dd></dl>

<dl class="method">
<dt id="urllib3._collections.HTTPHeaderDict.get">
<tt class="descname">get</tt><big>(</big><em>k</em><span class="optional">[</span>, <em>d</em><span class="optional">]</span><big>)</big> &rarr; D[k] if k in D, else d.  d defaults to None.<a class="headerlink" href="#urllib3._collections.HTTPHeaderDict.get" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="urllib3._collections.HTTPHeaderDict.getallmatchingheaders">
<tt class="descname">getallmatchingheaders</tt><big>(</big><em>key</em><big>)</big><a class="headerlink" href="#urllib3._collections.HTTPHeaderDict.getallmatchingheaders" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a list of all the values for the named field. Returns an
empty list if the key doesn&#8217;t exist.</p>
</dd></dl>

<dl class="method">
<dt id="urllib3._collections.HTTPHeaderDict.getheaders">
<tt class="descname">getheaders</tt><big>(</big><em>key</em><big>)</big><a class="headerlink" href="#urllib3._collections.HTTPHeaderDict.getheaders" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a list of all the values for the named field. Returns an
empty list if the key doesn&#8217;t exist.</p>
</dd></dl>

<dl class="method">
<dt id="urllib3._collections.HTTPHeaderDict.getlist">
<tt class="descname">getlist</tt><big>(</big><em>key</em><big>)</big><a class="headerlink" href="#urllib3._collections.HTTPHeaderDict.getlist" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a list of all the values for the named field. Returns an
empty list if the key doesn&#8217;t exist.</p>
</dd></dl>

<dl class="method">
<dt id="urllib3._collections.HTTPHeaderDict.iget">
<tt class="descname">iget</tt><big>(</big><em>key</em><big>)</big><a class="headerlink" href="#urllib3._collections.HTTPHeaderDict.iget" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a list of all the values for the named field. Returns an
empty list if the key doesn&#8217;t exist.</p>
</dd></dl>

<dl class="method">
<dt id="urllib3._collections.HTTPHeaderDict.iteritems">
<tt class="descname">iteritems</tt><big>(</big><big>)</big><a class="headerlink" href="#urllib3._collections.HTTPHeaderDict.iteritems" title="Permalink to this definition">¶</a></dt>
<dd><p>Iterate over all header lines, including duplicate ones.</p>
</dd></dl>

<dl class="method">
<dt id="urllib3._collections.HTTPHeaderDict.iterkeys">
<tt class="descname">iterkeys</tt><big>(</big><big>)</big> &rarr; an iterator over the keys of D<a class="headerlink" href="#urllib3._collections.HTTPHeaderDict.iterkeys" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="urllib3._collections.HTTPHeaderDict.itermerged">
<tt class="descname">itermerged</tt><big>(</big><big>)</big><a class="headerlink" href="#urllib3._collections.HTTPHeaderDict.itermerged" title="Permalink to this definition">¶</a></dt>
<dd><p>Iterate over all headers, merging duplicate ones together.</p>
</dd></dl>

<dl class="method">
<dt id="urllib3._collections.HTTPHeaderDict.itervalues">
<tt class="descname">itervalues</tt><big>(</big><big>)</big> &rarr; an iterator over the values of D<a class="headerlink" href="#urllib3._collections.HTTPHeaderDict.itervalues" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="urllib3._collections.HTTPHeaderDict.pop">
<tt class="descname">pop</tt><big>(</big><em>k</em><span class="optional">[</span>, <em>d</em><span class="optional">]</span><big>)</big> &rarr; v, remove specified key and return the corresponding value.<a class="headerlink" href="#urllib3._collections.HTTPHeaderDict.pop" title="Permalink to this definition">¶</a></dt>
<dd><p>If key is not found, d is returned if given, otherwise KeyError is raised.</p>
</dd></dl>

<dl class="method">
<dt id="urllib3._collections.HTTPHeaderDict.update">
<tt class="descname">update</tt><big>(</big><span class="optional">[</span><em>E</em>, <span class="optional">]</span><em>**F</em><big>)</big> &rarr; None.  Update D from mapping/iterable E and F.<a class="headerlink" href="#urllib3._collections.HTTPHeaderDict.update" title="Permalink to this definition">¶</a></dt>
<dd><p>If E present and has a .keys() method, does:     for k in E: D[k] = E[k]
If E present and lacks .keys() method, does:     for (k, v) in E: D[k] = v
In either case, this is followed by: for k, v in F.items(): D[k] = v</p>
</dd></dl>

<dl class="method">
<dt id="urllib3._collections.HTTPHeaderDict.values">
<tt class="descname">values</tt><big>(</big><big>)</big> &rarr; list of D's values<a class="headerlink" href="#urllib3._collections.HTTPHeaderDict.values" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div>
<span id="document-contrib"></span><div class="section" id="contrib-modules">
<span id="id1"></span><h2>Contrib Modules<a class="headerlink" href="#contrib-modules" title="Permalink to this headline">¶</a></h2>
<p>These modules implement various extra features, that may not be ready for
prime time.</p>
<div class="section" id="module-urllib3.contrib.pyopenssl">
<span id="sni-support-for-python-2"></span><span id="pyopenssl"></span><h3>SNI-support for Python 2<a class="headerlink" href="#module-urllib3.contrib.pyopenssl" title="Permalink to this headline">¶</a></h3>
<p>SSL with <a class="reference external" href="https://en.wikipedia.org/wiki/Server_Name_Indication">SNI</a>-support for Python 2. Follow these instructions if you would
like to verify SSL certificates in Python 2. Note, the default libraries do
<em>not</em> do certificate checking; you need to do additional work to validate
certificates yourself.</p>
<p>This needs the following packages installed:</p>
<ul class="simple">
<li>pyOpenSSL (tested with 0.13)</li>
<li>ndg-httpsclient (tested with 0.3.2)</li>
<li>pyasn1 (tested with 0.1.6)</li>
</ul>
<p>You can install them with the following command:</p>
<blockquote>
<div>pip install pyopenssl ndg-httpsclient pyasn1</div></blockquote>
<p>To activate certificate checking, call
<tt class="xref py py-func docutils literal"><span class="pre">inject_into_urllib3()</span></tt> from your Python code
before you begin making HTTP requests. This can be done in a <tt class="docutils literal"><span class="pre">sitecustomize</span></tt>
module, or at any other time before your application begins using <tt class="docutils literal"><span class="pre">urllib3</span></tt>,
like this:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">try</span><span class="p">:</span>
    <span class="kn">import</span> <span class="nn">urllib3.contrib.pyopenssl</span>
    <span class="n">urllib3</span><span class="o">.</span><span class="n">contrib</span><span class="o">.</span><span class="n">pyopenssl</span><span class="o">.</span><span class="n">inject_into_urllib3</span><span class="p">()</span>
<span class="k">except</span> <span class="ne">ImportError</span><span class="p">:</span>
    <span class="k">pass</span>
</pre></div>
</div>
<p>Now you can use <tt class="xref py py-mod docutils literal"><span class="pre">urllib3</span></tt> as you normally would, and it will support SNI
when the required modules are installed.</p>
<p>Activating this module also has the positive side effect of disabling SSL/TLS
compression in Python 2 (see <a class="reference external" href="https://en.wikipedia.org/wiki/CRIME_(security_exploit)">CRIME attack</a>).</p>
<p>If you want to configure the default list of supported cipher suites, you can
set the <tt class="docutils literal"><span class="pre">urllib3.contrib.pyopenssl.DEFAULT_SSL_CIPHER_LIST</span></tt> variable.</p>
<div class="section" id="module-variables">
<h4>Module Variables<a class="headerlink" href="#module-variables" title="Permalink to this headline">¶</a></h4>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name" colspan="2">var DEFAULT_SSL_CIPHER_LIST:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">The list of supported SSL/TLS cipher suites.</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<span id="document-security"></span><div class="section" id="security-verified-https-with-ssl-tls">
<span id="security"></span><h2>Security: Verified HTTPS with SSL/TLS<a class="headerlink" href="#security-verified-https-with-ssl-tls" title="Permalink to this headline">¶</a></h2>
<p>Very important fact: <strong>By default, urllib3 does not verify HTTPS requests.</strong></p>
<p>The historic reason for this is that we rely on <tt class="docutils literal"><span class="pre">httplib</span></tt> for some of the
HTTP protocol implementation, and <tt class="docutils literal"><span class="pre">httplib</span></tt> does not verify requests out of
the box. This is not a good reason, but here we are.</p>
<p>Luckily, it&#8217;s not too hard to enable verified HTTPS requests and there are a
few ways to do it.</p>
<div class="section" id="python-with-ssl-enabled">
<h3>Python with SSL enabled<a class="headerlink" href="#python-with-ssl-enabled" title="Permalink to this headline">¶</a></h3>
<p>First we need to make sure your Python installation has SSL enabled. Easiest
way to check is to simply open a Python shell and type <cite>import ssl</cite>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">ssl</span>
<span class="gt">Traceback (most recent call last):</span>
  <span class="c">...</span>
<span class="gr">ImportError</span>: <span class="n">No module named _ssl</span>
</pre></div>
</div>
<p>If you got an <tt class="docutils literal"><span class="pre">ImportError</span></tt>, then your Python is not compiled with SSL support
and you&#8217;ll need to re-install it. Read
<a class="reference external" href="https://stackoverflow.com/questions/5128845/importerror-no-module-named-ssl">this StackOverflow thread</a>
for details.</p>
<p>Otherwise, if <tt class="docutils literal"><span class="pre">ssl</span></tt> imported cleanly, then we&#8217;re ready to setup our certificates:
<a class="reference internal" href="index.html#certifi-with-urllib3"><em>Using Certifi with urllib3</em></a>.</p>
<div class="section" id="enabling-ssl-on-google-appengine">
<h4>Enabling SSL on Google AppEngine<a class="headerlink" href="#enabling-ssl-on-google-appengine" title="Permalink to this headline">¶</a></h4>
<p>If you&#8217;re using Google App Engine, you&#8217;ll need to add <tt class="docutils literal"><span class="pre">ssl</span></tt> as a library
dependency to your yaml file, like this:</p>
<div class="highlight-python"><div class="highlight"><pre>libraries:
- name: ssl
  version: latest
</pre></div>
</div>
<p>If it&#8217;s still not working, you may need to enable billing on your account
to <a class="reference external" href="https://developers.google.com/appengine/docs/python/sockets/">enable using sockets</a>.</p>
</div>
</div>
<div class="section" id="using-certifi-with-urllib3">
<span id="certifi-with-urllib3"></span><h3>Using Certifi with urllib3<a class="headerlink" href="#using-certifi-with-urllib3" title="Permalink to this headline">¶</a></h3>
<p><a class="reference external" href="http://certifi.io/">Certifi</a> is a package which ships with Mozilla&#8217;s root
certificates for easy programmatic access.</p>
<ol class="arabic">
<li><p class="first">Install the Python <tt class="docutils literal"><span class="pre">certifi</span></tt> package:</p>
<div class="highlight-python"><div class="highlight"><pre>$ pip install certifi
</pre></div>
</div>
</li>
<li><p class="first">Setup your pool to require a certificate and provide the certifi bundle:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">urllib3</span>
<span class="kn">import</span> <span class="nn">certifi</span>

<span class="n">http</span> <span class="o">=</span> <span class="n">urllib3</span><span class="o">.</span><span class="n">PoolManager</span><span class="p">(</span>
    <span class="n">cert_reqs</span><span class="o">=</span><span class="s">&#39;CERT_REQUIRED&#39;</span><span class="p">,</span> <span class="c"># Force certificate check.</span>
    <span class="n">ca_certs</span><span class="o">=</span><span class="n">certifi</span><span class="o">.</span><span class="n">where</span><span class="p">(),</span>  <span class="c"># Path to the Certifi bundle.</span>
<span class="p">)</span>

<span class="c"># You&#39;re ready to make verified HTTPS requests.</span>
<span class="k">try</span><span class="p">:</span>
    <span class="n">r</span> <span class="o">=</span> <span class="n">http</span><span class="o">.</span><span class="n">request</span><span class="p">(</span><span class="s">&#39;GET&#39;</span><span class="p">,</span> <span class="s">&#39;https://example.com/&#39;</span><span class="p">)</span>
<span class="k">except</span> <span class="n">urllib3</span><span class="o">.</span><span class="n">exceptions</span><span class="o">.</span><span class="n">SSLError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="c"># Handle incorrect certificate error.</span>
    <span class="o">...</span>
</pre></div>
</div>
</li>
</ol>
<p>Make sure to update your <tt class="docutils literal"><span class="pre">certifi</span></tt> package regularly to get the latest root
certificates.</p>
</div>
<div class="section" id="using-your-system-s-root-certificates">
<h3>Using your system&#8217;s root certificates<a class="headerlink" href="#using-your-system-s-root-certificates" title="Permalink to this headline">¶</a></h3>
<p>Your system&#8217;s root certificates may be more up-to-date than maintaining your
own, but the trick is finding where they live. Different operating systems have
them in different places.</p>
<p>For example, on most Linux distributions they&#8217;re at
<tt class="docutils literal"><span class="pre">/etc/ssl/certs/ca-certificates.crt</span></tt>. On Windows and OS X? <a class="reference external" href="https://stackoverflow.com/questions/10095676/openssl-reasonable-default-for-trusted-ca-certificates">It&#8217;s not so simple</a>.</p>
<p>Once you find your root certificate file:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">urllib3</span>

<span class="n">ca_certs</span> <span class="o">=</span> <span class="s">&quot;/etc/ssl/certs/ca-certificates.crt&quot;</span>  <span class="c"># Or wherever it lives.</span>

<span class="n">http</span> <span class="o">=</span> <span class="n">urllib3</span><span class="o">.</span><span class="n">PoolManager</span><span class="p">(</span>
    <span class="n">cert_reqs</span><span class="o">=</span><span class="s">&#39;CERT_REQUIRED&#39;</span><span class="p">,</span> <span class="c"># Force certificate check.</span>
    <span class="n">ca_certs</span><span class="o">=</span><span class="n">ca_certs</span><span class="p">,</span>         <span class="c"># Path to your certificate bundle.</span>
<span class="p">)</span>

<span class="c"># You&#39;re ready to make verified HTTPS requests.</span>
<span class="k">try</span><span class="p">:</span>
    <span class="n">r</span> <span class="o">=</span> <span class="n">http</span><span class="o">.</span><span class="n">request</span><span class="p">(</span><span class="s">&#39;GET&#39;</span><span class="p">,</span> <span class="s">&#39;https://example.com/&#39;</span><span class="p">)</span>
<span class="k">except</span> <span class="n">urllib3</span><span class="o">.</span><span class="n">exceptions</span><span class="o">.</span><span class="n">SSLError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="c"># Handle incorrect certificate error.</span>
    <span class="o">...</span>
</pre></div>
</div>
</div>
<div class="section" id="openssl-pyopenssl">
<span id="pyopenssl"></span><h3>OpenSSL / PyOpenSSL<a class="headerlink" href="#openssl-pyopenssl" title="Permalink to this headline">¶</a></h3>
<p>By default, we use the standard library&#8217;s <tt class="docutils literal"><span class="pre">ssl</span></tt> module. Unfortunately, there
are several limitations which are addressed by PyOpenSSL:</p>
<ul class="simple">
<li>(Python 2.x) SNI support.</li>
<li>(Python 2.x-3.2) Disabling compression to mitigate <a class="reference external" href="https://en.wikipedia.org/wiki/CRIME_(security_exploit)">CRIME attack</a>.</li>
</ul>
<p>To use the Python OpenSSL bindings instead, you&#8217;ll need to install the required
packages:</p>
<div class="highlight-python"><div class="highlight"><pre>$ pip install pyopenssl ndg-httpsclient pyasn1
</pre></div>
</div>
<p>Once the packages are installed, you can tell urllib3 to switch the ssl backend
to PyOpenSSL with <tt class="xref py py-func docutils literal"><span class="pre">inject_into_urllib3()</span></tt>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">urllib3.contrib.pyopenssl</span>
<span class="n">urllib3</span><span class="o">.</span><span class="n">contrib</span><span class="o">.</span><span class="n">pyopenssl</span><span class="o">.</span><span class="n">inject_into_urllib3</span><span class="p">()</span>
</pre></div>
</div>
<p>Now you can continue using urllib3 as you normally would.</p>
<p>For more details, check the <a class="reference internal" href="index.html#module-urllib3.contrib.pyopenssl" title="urllib3.contrib.pyopenssl"><tt class="xref py py-mod docutils literal"><span class="pre">pyopenssl</span></tt></a> module.</p>
</div>
<div class="section" id="insecurerequestwarning">
<span id="id1"></span><h3>InsecureRequestWarning<a class="headerlink" href="#insecurerequestwarning" title="Permalink to this headline">¶</a></h3>
<div class="versionadded">
<p><span class="versionmodified">New in version 1.9.</span></p>
</div>
<p>Unverified HTTPS requests will trigger a warning via Python&#8217;s <tt class="docutils literal"><span class="pre">warnings</span></tt> module:</p>
<div class="highlight-python"><div class="highlight"><pre>urllib3/connectionpool.py:736: InsecureRequestWarning: Unverified HTTPS
request is being made. Adding certificate verification is strongly advised.
See: https://urllib3.readthedocs.org/en/latest/security.html
</pre></div>
</div>
<p>This would be a great time to enable HTTPS verification:
<a class="reference internal" href="index.html#certifi-with-urllib3"><em>Using Certifi with urllib3</em></a>.</p>
<p>If you know what you&#8217;re doing and would like to disable this and other warnings,
you can use <tt class="xref py py-func docutils literal"><span class="pre">disable_warnings()</span></tt>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">urllib3</span>
<span class="n">urllib3</span><span class="o">.</span><span class="n">disable_warnings</span><span class="p">()</span>
</pre></div>
</div>
<p>Making unverified HTTPS requests is strongly discouraged. ˙ ͜ʟ˙</p>
<p>Alternatively, if you are using Python&#8217;s <tt class="docutils literal"><span class="pre">logging</span></tt> module, you can capture the
warnings to your own log:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">logging</span><span class="o">.</span><span class="n">captureWarnings</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span>
</pre></div>
</div>
<p>Capturing the warnings to your own log is much preferred over simply disabling
the warnings.</p>
</div>
<div class="section" id="insecureplatformwarning">
<h3>InsecurePlatformWarning<a class="headerlink" href="#insecureplatformwarning" title="Permalink to this headline">¶</a></h3>
<div class="versionadded">
<p><span class="versionmodified">New in version 1.11.</span></p>
</div>
<p>Certain Python platforms (specifically, versions of Python earlier than 2.7.9)
have restrictions in their <tt class="docutils literal"><span class="pre">ssl</span></tt> module that limit the configuration that
<tt class="docutils literal"><span class="pre">urllib3</span></tt> can apply. In particular, this can cause HTTPS requests that would
succeed on more featureful platforms to fail, and can cause certain security
features to be unavailable.</p>
<p>If you encounter this warning, it is strongly recommended you upgrade to a
newer Python version, or that you use pyOpenSSL as described in the
<a class="reference internal" href="index.html#pyopenssl"><em>OpenSSL / PyOpenSSL</em></a> section.</p>
<p>If you know what you are doing and would like to disable this and other
warnings, please consult the <a class="reference internal" href="index.html#insecurerequestwarning"><em>InsecureRequestWarning</em></a> section for
instructions on how to handle the warnings.</p>
</div>
</div>
</div>
<div class="section" id="highlights">
<h2>Highlights<a class="headerlink" href="#highlights" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Re-use the same socket connection for multiple requests, with optional
client-side certificate verification. See:
<a class="reference internal" href="index.html#urllib3.connectionpool.HTTPConnectionPool" title="urllib3.connectionpool.HTTPConnectionPool"><tt class="xref py py-class docutils literal"><span class="pre">HTTPConnectionPool</span></tt></a> and
<a class="reference internal" href="index.html#urllib3.connectionpool.HTTPSConnectionPool" title="urllib3.connectionpool.HTTPSConnectionPool"><tt class="xref py py-class docutils literal"><span class="pre">HTTPSConnectionPool</span></tt></a></li>
<li>File posting. See:
<a class="reference internal" href="index.html#urllib3.filepost.encode_multipart_formdata" title="urllib3.filepost.encode_multipart_formdata"><tt class="xref py py-func docutils literal"><span class="pre">encode_multipart_formdata()</span></tt></a></li>
<li>Built-in redirection and retries (optional).</li>
<li>Supports gzip and deflate decoding. See:
<tt class="xref py py-func docutils literal"><span class="pre">decode_gzip()</span></tt> and
<tt class="xref py py-func docutils literal"><span class="pre">decode_deflate()</span></tt></li>
<li>Thread-safe and sanity-safe.</li>
<li>Tested on Python 2.6+ and Python 3.2+, 100% unit test coverage.</li>
<li>Works with AppEngine, gevent, eventlib, and the standard library <a class="reference external" href="http://docs.python.org/2.7/library/io.html#module-io" title="(in Python v2.7)"><tt class="xref py py-mod docutils literal"><span class="pre">io</span></tt></a> module.</li>
<li>Small and easy to understand codebase perfect for extending and building upon.
For a more comprehensive solution, have a look at
<a class="reference external" href="http://python-requests.org/">Requests</a> which is also powered by urllib3.</li>
</ul>
</div>
<div class="section" id="getting-started">
<h2>Getting Started<a class="headerlink" href="#getting-started" title="Permalink to this headline">¶</a></h2>
<div class="section" id="installing">
<h3>Installing<a class="headerlink" href="#installing" title="Permalink to this headline">¶</a></h3>
<p><tt class="docutils literal"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">urllib3</span></tt> or fetch the latest source from
<a class="reference external" href="https://github.com/shazow/urllib3">github.com/shazow/urllib3</a>.</p>
</div>
<div class="section" id="usage">
<h3>Usage<a class="headerlink" href="#usage" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">urllib3</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">http</span> <span class="o">=</span> <span class="n">urllib3</span><span class="o">.</span><span class="n">PoolManager</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">r</span> <span class="o">=</span> <span class="n">http</span><span class="o">.</span><span class="n">request</span><span class="p">(</span><span class="s">&#39;GET&#39;</span><span class="p">,</span> <span class="s">&#39;http://example.com/&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">r</span><span class="o">.</span><span class="n">status</span>
<span class="go">200</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">r</span><span class="o">.</span><span class="n">headers</span><span class="p">[</span><span class="s">&#39;server&#39;</span><span class="p">]</span>
<span class="go">&#39;ECS (iad/182A)&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="s">&#39;data: &#39;</span> <span class="o">+</span> <span class="n">r</span><span class="o">.</span><span class="n">data</span>
<span class="go">&#39;data: ...&#39;</span>
</pre></div>
</div>
<p><strong>By default, urllib3 does not verify your HTTPS requests</strong>.
You&#8217;ll need to supply a root certificate bundle, or use <a class="reference external" href="https://certifi.io/">certifi</a></p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">urllib3</span><span class="o">,</span> <span class="nn">certifi</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">http</span> <span class="o">=</span> <span class="n">urllib3</span><span class="o">.</span><span class="n">PoolManager</span><span class="p">(</span><span class="n">cert_reqs</span><span class="o">=</span><span class="s">&#39;CERT_REQUIRED&#39;</span><span class="p">,</span> <span class="n">ca_certs</span><span class="o">=</span><span class="n">certifi</span><span class="o">.</span><span class="n">where</span><span class="p">())</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">r</span> <span class="o">=</span> <span class="n">http</span><span class="o">.</span><span class="n">request</span><span class="p">(</span><span class="s">&#39;GET&#39;</span><span class="p">,</span> <span class="s">&#39;https://insecure.com/&#39;</span><span class="p">)</span>
<span class="gt">Traceback (most recent call last):</span>
  <span class="c">...</span>
<span class="gr">SSLError</span>: <span class="n">hostname &#39;insecure.com&#39; doesn&#39;t match &#39;svn.nmap.org&#39;</span>
</pre></div>
</div>
<p>For more on making secure SSL/TLS HTTPS requests, read the <a class="reference internal" href="index.html#security"><em>Security
section</em></a>.</p>
<p>urllib3&#8217;s responses respect the <a class="reference external" href="http://docs.python.org/2.7/library/io.html#module-io" title="(in Python v2.7)"><tt class="xref py py-mod docutils literal"><span class="pre">io</span></tt></a> framework from Python&#8217;s
standard library, allowing use of these standard objects for purposes
like buffering:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">http</span> <span class="o">=</span> <span class="n">urllib3</span><span class="o">.</span><span class="n">PoolManager</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">r</span> <span class="o">=</span> <span class="n">http</span><span class="o">.</span><span class="n">urlopen</span><span class="p">(</span><span class="s">&#39;GET&#39;</span><span class="p">,</span><span class="s">&#39;http://example.com/&#39;</span><span class="p">,</span> <span class="n">preload_content</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span> <span class="o">=</span> <span class="n">io</span><span class="o">.</span><span class="n">BufferedReader</span><span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="mi">2048</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">firstpart</span> <span class="o">=</span> <span class="n">b</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c"># ... your internet connection fails momentarily ...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">secondpart</span> <span class="o">=</span> <span class="n">b</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="components">
<h2>Components<a class="headerlink" href="#components" title="Permalink to this headline">¶</a></h2>
<p><tt class="xref py py-mod docutils literal"><span class="pre">urllib3</span></tt> tries to strike a fine balance between power, extendability, and
sanity. To achieve this, the codebase is a collection of small reusable
utilities and abstractions composed together in a few helpful layers.</p>
<div class="section" id="poolmanager">
<h3>PoolManager<a class="headerlink" href="#poolmanager" title="Permalink to this headline">¶</a></h3>
<p>The highest level is the <a class="reference internal" href="index.html#document-managers"><em>PoolManager(...)</em></a>.</p>
<p>The <tt class="xref py py-class docutils literal"><span class="pre">PoolManager</span></tt> will take care of reusing
connections for you whenever you request the same host. This should cover most
scenarios without significant loss of efficiency, but you can always drop down
to a lower level component for more granular control.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">urllib3</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">http</span> <span class="o">=</span> <span class="n">urllib3</span><span class="o">.</span><span class="n">PoolManager</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">r1</span> <span class="o">=</span> <span class="n">http</span><span class="o">.</span><span class="n">request</span><span class="p">(</span><span class="s">&#39;GET&#39;</span><span class="p">,</span> <span class="s">&#39;http://example.com/&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">r2</span> <span class="o">=</span> <span class="n">http</span><span class="o">.</span><span class="n">request</span><span class="p">(</span><span class="s">&#39;GET&#39;</span><span class="p">,</span> <span class="s">&#39;http://httpbin.org/&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">r3</span> <span class="o">=</span> <span class="n">http</span><span class="o">.</span><span class="n">request</span><span class="p">(</span><span class="s">&#39;GET&#39;</span><span class="p">,</span> <span class="s">&#39;http://httpbin.org/get&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">http</span><span class="o">.</span><span class="n">pools</span><span class="p">)</span>
<span class="go">2</span>
</pre></div>
</div>
<p>A <tt class="xref py py-class docutils literal"><span class="pre">PoolManager</span></tt> is a proxy for a collection of
<tt class="xref py py-class docutils literal"><span class="pre">ConnectionPool</span></tt> objects. They both inherit from
<a class="reference internal" href="index.html#urllib3.request.RequestMethods" title="urllib3.request.RequestMethods"><tt class="xref py py-class docutils literal"><span class="pre">RequestMethods</span></tt></a> to make sure that their API is
similar, so that instances of either can be passed around interchangeably.</p>
</div>
<div class="section" id="proxymanager">
<h3>ProxyManager<a class="headerlink" href="#proxymanager" title="Permalink to this headline">¶</a></h3>
<p>The <tt class="xref py py-class docutils literal"><span class="pre">ProxyManager</span></tt> is an HTTP proxy-aware
subclass of <tt class="xref py py-class docutils literal"><span class="pre">PoolManager</span></tt>. It produces a single
<a class="reference internal" href="index.html#urllib3.connectionpool.HTTPConnectionPool" title="urllib3.connectionpool.HTTPConnectionPool"><tt class="xref py py-class docutils literal"><span class="pre">HTTPConnectionPool</span></tt></a> instance for all HTTP
connections and individual per-server:port
<a class="reference internal" href="index.html#urllib3.connectionpool.HTTPSConnectionPool" title="urllib3.connectionpool.HTTPSConnectionPool"><tt class="xref py py-class docutils literal"><span class="pre">HTTPSConnectionPool</span></tt></a> instances for tunnelled
HTTPS connections:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">proxy</span> <span class="o">=</span> <span class="n">urllib3</span><span class="o">.</span><span class="n">ProxyManager</span><span class="p">(</span><span class="s">&#39;http://localhost:3128/&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">r1</span> <span class="o">=</span> <span class="n">proxy</span><span class="o">.</span><span class="n">request</span><span class="p">(</span><span class="s">&#39;GET&#39;</span><span class="p">,</span> <span class="s">&#39;http://google.com/&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">r2</span> <span class="o">=</span> <span class="n">proxy</span><span class="o">.</span><span class="n">request</span><span class="p">(</span><span class="s">&#39;GET&#39;</span><span class="p">,</span> <span class="s">&#39;http://httpbin.org/&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">proxy</span><span class="o">.</span><span class="n">pools</span><span class="p">)</span>
<span class="go">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">r3</span> <span class="o">=</span> <span class="n">proxy</span><span class="o">.</span><span class="n">request</span><span class="p">(</span><span class="s">&#39;GET&#39;</span><span class="p">,</span> <span class="s">&#39;https://httpbin.org/&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">r4</span> <span class="o">=</span> <span class="n">proxy</span><span class="o">.</span><span class="n">request</span><span class="p">(</span><span class="s">&#39;GET&#39;</span><span class="p">,</span> <span class="s">&#39;https://twitter.com/&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">proxy</span><span class="o">.</span><span class="n">pools</span><span class="p">)</span>
<span class="go">3</span>
</pre></div>
</div>
</div>
<div class="section" id="connectionpool">
<h3>ConnectionPool<a class="headerlink" href="#connectionpool" title="Permalink to this headline">¶</a></h3>
<p>The next layer is the <a class="reference internal" href="index.html#document-pools"><em>ConnectionPool(...)</em></a>.</p>
<p>The <a class="reference internal" href="index.html#urllib3.connectionpool.HTTPConnectionPool" title="urllib3.connectionpool.HTTPConnectionPool"><tt class="xref py py-class docutils literal"><span class="pre">HTTPConnectionPool</span></tt></a> and
<a class="reference internal" href="index.html#urllib3.connectionpool.HTTPSConnectionPool" title="urllib3.connectionpool.HTTPSConnectionPool"><tt class="xref py py-class docutils literal"><span class="pre">HTTPSConnectionPool</span></tt></a> classes allow you to
define a pool of connections to a single host and make requests against this
pool with automatic <strong>connection reusing</strong> and <strong>thread safety</strong>.</p>
<p>When the <a class="reference external" href="http://docs.python.org/2.7/library/ssl.html#module-ssl" title="(in Python v2.7)"><tt class="xref py py-mod docutils literal"><span class="pre">ssl</span></tt></a> module is available, then
<a class="reference internal" href="index.html#urllib3.connectionpool.HTTPSConnectionPool" title="urllib3.connectionpool.HTTPSConnectionPool"><tt class="xref py py-class docutils literal"><span class="pre">HTTPSConnectionPool</span></tt></a> objects can be configured
to check SSL certificates against specific provided certificate authorities.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">urllib3</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">conn</span> <span class="o">=</span> <span class="n">urllib3</span><span class="o">.</span><span class="n">connection_from_url</span><span class="p">(</span><span class="s">&#39;http://httpbin.org/&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">r1</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">request</span><span class="p">(</span><span class="s">&#39;GET&#39;</span><span class="p">,</span> <span class="s">&#39;http://httpbin.org/&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">r2</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">request</span><span class="p">(</span><span class="s">&#39;GET&#39;</span><span class="p">,</span> <span class="s">&#39;/user-agent&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">r3</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">request</span><span class="p">(</span><span class="s">&#39;GET&#39;</span><span class="p">,</span> <span class="s">&#39;http://example.com&#39;</span><span class="p">)</span>
<span class="gt">Traceback (most recent call last):</span>
  <span class="c">...</span>
<span class="gr">urllib3.exceptions.HostChangedError</span>: <span class="n">HTTPConnectionPool(host=&#39;httpbin.org&#39;, port=None): Tried to open a foreign host with url: http://example.com</span>
</pre></div>
</div>
<p>Again, a ConnectionPool is a pool of connections to a specific host. Trying to
access a different host through the same pool will raise a <tt class="docutils literal"><span class="pre">HostChangedError</span></tt>
exception unless you specify <tt class="docutils literal"><span class="pre">assert_same_host=False</span></tt>. Do this at your own
risk as the outcome is completely dependent on the behaviour of the host server.</p>
<p>If you need to access multiple hosts and don&#8217;t want to manage your own
collection of <a class="reference internal" href="index.html#urllib3.connectionpool.ConnectionPool" title="urllib3.connectionpool.ConnectionPool"><tt class="xref py py-class docutils literal"><span class="pre">ConnectionPool</span></tt></a> objects, then you
should use a <a class="reference internal" href="index.html#urllib3.poolmanager.PoolManager" title="urllib3.poolmanager.PoolManager"><tt class="xref py py-class docutils literal"><span class="pre">PoolManager</span></tt></a>.</p>
<p>A <a class="reference internal" href="index.html#urllib3.connectionpool.ConnectionPool" title="urllib3.connectionpool.ConnectionPool"><tt class="xref py py-class docutils literal"><span class="pre">ConnectionPool</span></tt></a> is composed of a collection
of <a class="reference external" href="http://docs.python.org/2.7/library/httplib.html#httplib.HTTPConnection" title="(in Python v2.7)"><tt class="xref py py-class docutils literal"><span class="pre">httplib.HTTPConnection</span></tt></a> objects.</p>
</div>
<div class="section" id="timeout">
<h3>Timeout<a class="headerlink" href="#timeout" title="Permalink to this headline">¶</a></h3>
<p>A timeout can be set to abort socket operations on individual connections after
the specified duration. The timeout can be defined as a float or an instance of
<a class="reference internal" href="index.html#urllib3.util.timeout.Timeout" title="urllib3.util.timeout.Timeout"><tt class="xref py py-class docutils literal"><span class="pre">Timeout</span></tt></a> which gives more granular configuration
over how much time is allowed for different stages of the request. This can be
set for the entire pool or per-request.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">urllib3</span> <span class="kn">import</span> <span class="n">PoolManager</span><span class="p">,</span> <span class="n">Timeout</span>

<span class="gp">&gt;&gt;&gt; </span><span class="c"># Manager with 3 seconds combined timeout.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">http</span> <span class="o">=</span> <span class="n">PoolManager</span><span class="p">(</span><span class="n">timeout</span><span class="o">=</span><span class="mf">3.0</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">r</span> <span class="o">=</span> <span class="n">http</span><span class="o">.</span><span class="n">request</span><span class="p">(</span><span class="s">&#39;GET&#39;</span><span class="p">,</span> <span class="s">&#39;http://httpbin.org/delay/1&#39;</span><span class="p">)</span>

<span class="gp">&gt;&gt;&gt; </span><span class="c"># Manager with 2 second timeout for the read phase, no limit for the rest.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">http</span> <span class="o">=</span> <span class="n">PoolManager</span><span class="p">(</span><span class="n">timeout</span><span class="o">=</span><span class="n">Timeout</span><span class="p">(</span><span class="n">read</span><span class="o">=</span><span class="mf">2.0</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">r</span> <span class="o">=</span> <span class="n">http</span><span class="o">.</span><span class="n">request</span><span class="p">(</span><span class="s">&#39;GET&#39;</span><span class="p">,</span> <span class="s">&#39;http://httpbin.org/delay/1&#39;</span><span class="p">)</span>

<span class="gp">&gt;&gt;&gt; </span><span class="c"># Manager with no timeout but a request with a timeout of 1 seconds for</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c"># the connect phase and 2 seconds for the read phase.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">http</span> <span class="o">=</span> <span class="n">PoolManager</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">r</span> <span class="o">=</span> <span class="n">http</span><span class="o">.</span><span class="n">request</span><span class="p">(</span><span class="s">&#39;GET&#39;</span><span class="p">,</span> <span class="s">&#39;http://httpbin.org/delay/1&#39;</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">Timeout</span><span class="p">(</span><span class="n">connect</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">read</span><span class="o">=</span><span class="mf">2.0</span><span class="p">))</span>

<span class="gp">&gt;&gt;&gt; </span><span class="c"># Same Manager but request with a 5 second total timeout.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">r</span> <span class="o">=</span> <span class="n">http</span><span class="o">.</span><span class="n">request</span><span class="p">(</span><span class="s">&#39;GET&#39;</span><span class="p">,</span> <span class="s">&#39;http://httpbin.org/delay/1&#39;</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">Timeout</span><span class="p">(</span><span class="n">total</span><span class="o">=</span><span class="mf">5.0</span><span class="p">))</span>
</pre></div>
</div>
<p>See the <a class="reference internal" href="index.html#urllib3.util.timeout.Timeout" title="urllib3.util.timeout.Timeout"><tt class="xref py py-class docutils literal"><span class="pre">Timeout</span></tt></a> definition for more details.</p>
</div>
<div class="section" id="retry">
<h3>Retry<a class="headerlink" href="#retry" title="Permalink to this headline">¶</a></h3>
<p>Retries can be configured by passing an instance of
<a class="reference internal" href="index.html#urllib3.util.retry.Retry" title="urllib3.util.retry.Retry"><tt class="xref py py-class docutils literal"><span class="pre">Retry</span></tt></a>, or disabled by passing <tt class="docutils literal"><span class="pre">False</span></tt>, to the
<tt class="docutils literal"><span class="pre">retries</span></tt> parameter.</p>
<p>Redirects are also considered to be a subset of retries but can be configured or
disabled individually.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">urllib3</span> <span class="kn">import</span> <span class="n">PoolManager</span><span class="p">,</span> <span class="n">Retry</span>

<span class="gp">&gt;&gt;&gt; </span><span class="c"># Allow 3 retries total for all requests in this pool. These are the same:</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">http</span> <span class="o">=</span> <span class="n">PoolManager</span><span class="p">(</span><span class="n">retries</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">http</span> <span class="o">=</span> <span class="n">PoolManager</span><span class="p">(</span><span class="n">retries</span><span class="o">=</span><span class="n">Retry</span><span class="p">(</span><span class="mi">3</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">http</span> <span class="o">=</span> <span class="n">PoolManager</span><span class="p">(</span><span class="n">retries</span><span class="o">=</span><span class="n">Retry</span><span class="p">(</span><span class="n">total</span><span class="o">=</span><span class="mi">3</span><span class="p">))</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">r</span> <span class="o">=</span> <span class="n">http</span><span class="o">.</span><span class="n">request</span><span class="p">(</span><span class="s">&#39;GET&#39;</span><span class="p">,</span> <span class="s">&#39;http://httpbin.org/redirect/2&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c"># r.status -&gt; 200</span>

<span class="gp">&gt;&gt;&gt; </span><span class="c"># Disable redirects for this request.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">r</span> <span class="o">=</span> <span class="n">http</span><span class="o">.</span><span class="n">request</span><span class="p">(</span><span class="s">&#39;GET&#39;</span><span class="p">,</span> <span class="s">&#39;http://httpbin.org/redirect/2&#39;</span><span class="p">,</span> <span class="n">retries</span><span class="o">=</span><span class="n">Retry</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="n">redirect</span><span class="o">=</span><span class="bp">False</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c"># r.status -&gt; 302</span>

<span class="gp">&gt;&gt;&gt; </span><span class="c"># No total limit, but only do 5 connect retries, for this request.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">r</span> <span class="o">=</span> <span class="n">http</span><span class="o">.</span><span class="n">request</span><span class="p">(</span><span class="s">&#39;GET&#39;</span><span class="p">,</span> <span class="s">&#39;http://httpbin.org/&#39;</span><span class="p">,</span> <span class="n">retries</span><span class="o">=</span><span class="n">Retry</span><span class="p">(</span><span class="n">connect</span><span class="o">=</span><span class="mi">5</span><span class="p">))</span>
</pre></div>
</div>
<p>See the <a class="reference internal" href="index.html#urllib3.util.retry.Retry" title="urllib3.util.retry.Retry"><tt class="xref py py-class docutils literal"><span class="pre">Retry</span></tt></a> definition for more details.</p>
</div>
<div class="section" id="stream">
<h3>Stream<a class="headerlink" href="#stream" title="Permalink to this headline">¶</a></h3>
<p>You may also stream your response and get data as they come (e.g. when using
<tt class="docutils literal"><span class="pre">transfer-encoding:</span> <span class="pre">chunked</span></tt>). In this case, method
<a class="reference internal" href="index.html#urllib3.response.HTTPResponse.stream" title="urllib3.response.HTTPResponse.stream"><tt class="xref py py-func docutils literal"><span class="pre">stream()</span></tt></a> will return generator.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">urllib3</span> <span class="kn">import</span> <span class="n">PoolManager</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">http</span> <span class="o">=</span> <span class="n">urllib3</span><span class="o">.</span><span class="n">PoolManager</span><span class="p">()</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">r</span> <span class="o">=</span> <span class="n">http</span><span class="o">.</span><span class="n">request</span><span class="p">(</span><span class="s">&quot;GET&quot;</span><span class="p">,</span> <span class="s">&quot;http://httpbin.org/stream/3&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">r</span><span class="o">.</span><span class="n">getheader</span><span class="p">(</span><span class="s">&quot;transfer-encoding&quot;</span><span class="p">)</span>
<span class="go">&#39;chunked&#39;</span>

<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">chunk</span> <span class="ow">in</span> <span class="n">r</span><span class="o">.</span><span class="n">stream</span><span class="p">():</span>
<span class="gp">... </span><span class="k">print</span> <span class="n">chunk</span>
<span class="go">{&quot;url&quot;: &quot;http://httpbin.org/stream/3&quot;, ..., &quot;id&quot;: 0, ...}</span>
<span class="go">{&quot;url&quot;: &quot;http://httpbin.org/stream/3&quot;, ..., &quot;id&quot;: 1, ...}</span>
<span class="go">{&quot;url&quot;: &quot;http://httpbin.org/stream/3&quot;, ..., &quot;id&quot;: 2, ...}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">r</span><span class="o">.</span><span class="n">closed</span>
<span class="go">True</span>
</pre></div>
</div>
<p>Completely consuming the stream will auto-close the response and release
the connection back to the pool. If you&#8217;re only partially consuming the
consuming a stream, make sure to manually call <tt class="docutils literal"><span class="pre">r.close()</span></tt> on the
response.</p>
</div>
<div class="section" id="foundation">
<h3>Foundation<a class="headerlink" href="#foundation" title="Permalink to this headline">¶</a></h3>
<p>At the very core, just like its predecessors, <tt class="xref py py-mod docutils literal"><span class="pre">urllib3</span></tt> is built on top of
<a class="reference external" href="http://docs.python.org/2.7/library/httplib.html#module-httplib" title="(in Python v2.7)"><tt class="xref py py-mod docutils literal"><span class="pre">httplib</span></tt></a> &#8211; the lowest level HTTP library included in the Python
standard library.</p>
<p>To aid the limited functionality of the <a class="reference external" href="http://docs.python.org/2.7/library/httplib.html#module-httplib" title="(in Python v2.7)"><tt class="xref py py-mod docutils literal"><span class="pre">httplib</span></tt></a> module, <tt class="xref py py-mod docutils literal"><span class="pre">urllib3</span></tt>
provides various helper methods which are used with the higher level components
but can also be used independently.</p>
<div class="toctree-wrapper compound">
<span id="document-helpers"></span><div class="section" id="helpers">
<h4>Helpers<a class="headerlink" href="#helpers" title="Permalink to this headline">¶</a></h4>
<p>Useful methods for working with <a class="reference external" href="http://docs.python.org/2.7/library/httplib.html#module-httplib" title="(in Python v2.7)"><tt class="xref py py-mod docutils literal"><span class="pre">httplib</span></tt></a>, completely decoupled from
code specific to <strong>urllib3</strong>.</p>
<div class="section" id="module-urllib3.util.timeout">
<span id="timeouts"></span><h5>Timeouts<a class="headerlink" href="#module-urllib3.util.timeout" title="Permalink to this headline">¶</a></h5>
<dl class="class">
<dt id="urllib3.util.timeout.Timeout">
<em class="property">class </em><tt class="descclassname">urllib3.util.timeout.</tt><tt class="descname">Timeout</tt><big>(</big><em>total=None</em>, <em>connect=&lt;object object at 0x7f42c1d233f0&gt;</em>, <em>read=&lt;object object at 0x7f42c1d233f0&gt;</em><big>)</big><a class="headerlink" href="#urllib3.util.timeout.Timeout" title="Permalink to this definition">¶</a></dt>
<dd><p>Timeout configuration.</p>
<p>Timeouts can be defined as a default for a pool:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">timeout</span> <span class="o">=</span> <span class="n">Timeout</span><span class="p">(</span><span class="n">connect</span><span class="o">=</span><span class="mf">2.0</span><span class="p">,</span> <span class="n">read</span><span class="o">=</span><span class="mf">7.0</span><span class="p">)</span>
<span class="n">http</span> <span class="o">=</span> <span class="n">PoolManager</span><span class="p">(</span><span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">http</span><span class="o">.</span><span class="n">request</span><span class="p">(</span><span class="s">&#39;GET&#39;</span><span class="p">,</span> <span class="s">&#39;http://example.com/&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Or per-request (which overrides the default for the pool):</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">response</span> <span class="o">=</span> <span class="n">http</span><span class="o">.</span><span class="n">request</span><span class="p">(</span><span class="s">&#39;GET&#39;</span><span class="p">,</span> <span class="s">&#39;http://example.com/&#39;</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">Timeout</span><span class="p">(</span><span class="mi">10</span><span class="p">))</span>
</pre></div>
</div>
<p>Timeouts can be disabled by setting all the parameters to <tt class="docutils literal"><span class="pre">None</span></tt>:</p>
<div class="highlight-python"><div class="highlight"><pre>no_timeout = Timeout(connect=None, read=None)
response = http.request(&#39;GET&#39;, &#39;http://example.com/, timeout=no_timeout)
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>total</strong> (<em>integer, float, or None</em>) &#8211; <p>This combines the connect and read timeouts into one; the read timeout
will be set to the time leftover from the connect attempt. In the
event that both a connect timeout and a total are specified, or a read
timeout and a total are specified, the shorter timeout will be applied.</p>
<p>Defaults to None.</p>
</li>
<li><strong>connect</strong> (<em>integer, float, or None</em>) &#8211; The maximum amount of time to wait for a connection attempt to a server
to succeed. Omitting the parameter will default the connect timeout to
the system default, probably <a class="reference external" href="http://hg.python.org/cpython/file/603b4d593758/Lib/socket.py#l535">the global default timeout in socket.py</a>.
None will set an infinite timeout for connection attempts.</li>
<li><strong>read</strong> (<em>integer, float, or None</em>) &#8211; <p>The maximum amount of time to wait between consecutive
read operations for a response from the server. Omitting
the parameter will default the read timeout to the system
default, probably <a class="reference external" href="http://hg.python.org/cpython/file/603b4d593758/Lib/socket.py#l535">the global default timeout in socket.py</a>.
None will set an infinite timeout.</p>
</li>
</ul>
</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>Many factors can affect the total amount of time for urllib3 to return
an HTTP response.</p>
<p>For example, Python&#8217;s DNS resolver does not obey the timeout specified
on the socket. Other factors that can affect total request time include
high CPU load, high swap, the program running at a low priority level,
or other behaviors.</p>
<p>In addition, the read and total timeouts only measure the time between
read operations on the socket connecting the client and the server,
not the total amount of time for the request to return a complete
response. For most requests, the timeout is raised because the server
has not sent the first byte in the specified time. This is not always
the case; if a server streams one byte every fifteen seconds, a timeout
of 20 seconds will not trigger, even though the request will take
several minutes to complete.</p>
<p class="last">If your goal is to cut off any request after a set amount of wall clock
time, consider having a second &#8220;watcher&#8221; thread to cut off a slow
request.</p>
</div>
<dl class="attribute">
<dt id="urllib3.util.timeout.Timeout.DEFAULT_TIMEOUT">
<tt class="descname">DEFAULT_TIMEOUT</tt><em class="property"> = &lt;object object at 0x7f42c1d23240&gt;</em><a class="headerlink" href="#urllib3.util.timeout.Timeout.DEFAULT_TIMEOUT" title="Permalink to this definition">¶</a></dt>
<dd><p>A sentinel object representing the default timeout value</p>
</dd></dl>

<dl class="method">
<dt id="urllib3.util.timeout.Timeout.clone">
<tt class="descname">clone</tt><big>(</big><big>)</big><a class="headerlink" href="#urllib3.util.timeout.Timeout.clone" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a copy of the timeout object</p>
<p>Timeout properties are stored per-pool but each request needs a fresh
Timeout object to ensure each one has its own start/stop configured.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">a copy of the timeout object</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference internal" href="index.html#urllib3.util.timeout.Timeout" title="urllib3.util.timeout.Timeout"><tt class="xref py py-class docutils literal"><span class="pre">Timeout</span></tt></a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="urllib3.util.timeout.Timeout.connect_timeout">
<tt class="descname">connect_timeout</tt><a class="headerlink" href="#urllib3.util.timeout.Timeout.connect_timeout" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the value to use when setting a connection timeout.</p>
<p>This will be a positive float or integer, the value None
(never timeout), or the default system timeout.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">Connect timeout.</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body">int, float, <a class="reference internal" href="index.html#urllib3.util.timeout.Timeout.DEFAULT_TIMEOUT" title="urllib3.util.timeout.Timeout.DEFAULT_TIMEOUT"><tt class="xref py py-attr docutils literal"><span class="pre">Timeout.DEFAULT_TIMEOUT</span></tt></a> or None</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="classmethod">
<dt id="urllib3.util.timeout.Timeout.from_float">
<em class="property">classmethod </em><tt class="descname">from_float</tt><big>(</big><em>timeout</em><big>)</big><a class="headerlink" href="#urllib3.util.timeout.Timeout.from_float" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a new Timeout from a legacy timeout value.</p>
<p>The timeout value used by httplib.py sets the same timeout on the
connect(), and recv() socket requests. This creates a <a class="reference internal" href="index.html#urllib3.util.timeout.Timeout" title="urllib3.util.timeout.Timeout"><tt class="xref py py-class docutils literal"><span class="pre">Timeout</span></tt></a>
object that sets the individual timeouts to the <tt class="docutils literal"><span class="pre">timeout</span></tt> value
passed to this function.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>timeout</strong> (<em>integer, float, sentinel default object, or None</em>) &#8211; The legacy timeout value.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">Timeout object</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference internal" href="index.html#urllib3.util.timeout.Timeout" title="urllib3.util.timeout.Timeout"><tt class="xref py py-class docutils literal"><span class="pre">Timeout</span></tt></a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="urllib3.util.timeout.Timeout.get_connect_duration">
<tt class="descname">get_connect_duration</tt><big>(</big><big>)</big><a class="headerlink" href="#urllib3.util.timeout.Timeout.get_connect_duration" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets the time elapsed since the call to <a class="reference internal" href="index.html#urllib3.util.timeout.Timeout.start_connect" title="urllib3.util.timeout.Timeout.start_connect"><tt class="xref py py-meth docutils literal"><span class="pre">start_connect()</span></tt></a>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">Elapsed time.</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body">float</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">Raises <a class="reference internal" href="index.html#urllib3.exceptions.TimeoutStateError" title="urllib3.exceptions.TimeoutStateError">urllib3.exceptions.TimeoutStateError</a>:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">if you attempt
to get duration for a timer that hasn&#8217;t been started.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="urllib3.util.timeout.Timeout.read_timeout">
<tt class="descname">read_timeout</tt><a class="headerlink" href="#urllib3.util.timeout.Timeout.read_timeout" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the value for the read timeout.</p>
<p>This assumes some time has elapsed in the connection timeout and
computes the read timeout appropriately.</p>
<p>If self.total is set, the read timeout is dependent on the amount of
time taken by the connect timeout. If the connection time has not been
established, a <a class="reference internal" href="index.html#urllib3.exceptions.TimeoutStateError" title="urllib3.exceptions.TimeoutStateError"><tt class="xref py py-exc docutils literal"><span class="pre">TimeoutStateError</span></tt></a> will be
raised.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">Value to use for the read timeout.</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body">int, float, <a class="reference internal" href="index.html#urllib3.util.timeout.Timeout.DEFAULT_TIMEOUT" title="urllib3.util.timeout.Timeout.DEFAULT_TIMEOUT"><tt class="xref py py-attr docutils literal"><span class="pre">Timeout.DEFAULT_TIMEOUT</span></tt></a> or None</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">Raises <a class="reference internal" href="index.html#urllib3.exceptions.TimeoutStateError" title="urllib3.exceptions.TimeoutStateError">urllib3.exceptions.TimeoutStateError</a>:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">If <a class="reference internal" href="index.html#urllib3.util.timeout.Timeout.start_connect" title="urllib3.util.timeout.Timeout.start_connect"><tt class="xref py py-meth docutils literal"><span class="pre">start_connect()</span></tt></a>
has not yet been called on this object.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="urllib3.util.timeout.Timeout.start_connect">
<tt class="descname">start_connect</tt><big>(</big><big>)</big><a class="headerlink" href="#urllib3.util.timeout.Timeout.start_connect" title="Permalink to this definition">¶</a></dt>
<dd><p>Start the timeout clock, used during a connect() attempt</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name" colspan="2">Raises <a class="reference internal" href="index.html#urllib3.exceptions.TimeoutStateError" title="urllib3.exceptions.TimeoutStateError">urllib3.exceptions.TimeoutStateError</a>:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">if you attempt
to start a timer that has been started already.</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="urllib3.util.timeout.current_time">
<tt class="descclassname">urllib3.util.timeout.</tt><tt class="descname">current_time</tt><big>(</big><big>)</big><a class="headerlink" href="#urllib3.util.timeout.current_time" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve the current time. This function is mocked out in unit testing.</p>
</dd></dl>

</div>
<div class="section" id="module-urllib3.util.retry">
<span id="retries"></span><h5>Retries<a class="headerlink" href="#module-urllib3.util.retry" title="Permalink to this headline">¶</a></h5>
<dl class="class">
<dt id="urllib3.util.retry.Retry">
<em class="property">class </em><tt class="descclassname">urllib3.util.retry.</tt><tt class="descname">Retry</tt><big>(</big><em>total=10</em>, <em>connect=None</em>, <em>read=None</em>, <em>redirect=None</em>, <em>method_whitelist=frozenset(['HEAD'</em>, <em>'TRACE'</em>, <em>'GET'</em>, <em>'PUT'</em>, <em>'OPTIONS'</em>, <em>'DELETE'])</em>, <em>status_forcelist=None</em>, <em>backoff_factor=0</em>, <em>raise_on_redirect=True</em>, <em>_observed_errors=0</em><big>)</big><a class="headerlink" href="#urllib3.util.retry.Retry" title="Permalink to this definition">¶</a></dt>
<dd><p>Retry configuration.</p>
<p>Each retry attempt will create a new Retry object with updated values, so
they can be safely reused.</p>
<p>Retries can be defined as a default for a pool:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">retries</span> <span class="o">=</span> <span class="n">Retry</span><span class="p">(</span><span class="n">connect</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">read</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">redirect</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
<span class="n">http</span> <span class="o">=</span> <span class="n">PoolManager</span><span class="p">(</span><span class="n">retries</span><span class="o">=</span><span class="n">retries</span><span class="p">)</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">http</span><span class="o">.</span><span class="n">request</span><span class="p">(</span><span class="s">&#39;GET&#39;</span><span class="p">,</span> <span class="s">&#39;http://example.com/&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Or per-request (which overrides the default for the pool):</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">response</span> <span class="o">=</span> <span class="n">http</span><span class="o">.</span><span class="n">request</span><span class="p">(</span><span class="s">&#39;GET&#39;</span><span class="p">,</span> <span class="s">&#39;http://example.com/&#39;</span><span class="p">,</span> <span class="n">retries</span><span class="o">=</span><span class="n">Retry</span><span class="p">(</span><span class="mi">10</span><span class="p">))</span>
</pre></div>
</div>
<p>Retries can be disabled by passing <tt class="docutils literal"><span class="pre">False</span></tt>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">response</span> <span class="o">=</span> <span class="n">http</span><span class="o">.</span><span class="n">request</span><span class="p">(</span><span class="s">&#39;GET&#39;</span><span class="p">,</span> <span class="s">&#39;http://example.com/&#39;</span><span class="p">,</span> <span class="n">retries</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
</pre></div>
</div>
<p>Errors will be wrapped in <a class="reference internal" href="index.html#urllib3.exceptions.MaxRetryError" title="urllib3.exceptions.MaxRetryError"><tt class="xref py py-class docutils literal"><span class="pre">MaxRetryError</span></tt></a> unless
retries are disabled, in which case the causing exception will be raised.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>total</strong> (<a class="reference external" href="http://docs.python.org/2.7/library/functions.html#int" title="(in Python v2.7)"><em>int</em></a>) &#8211; <p>Total number of retries to allow. Takes precedence over other counts.</p>
<p>Set to <tt class="docutils literal"><span class="pre">None</span></tt> to remove this constraint and fall back on other
counts. It&#8217;s a good idea to set this to some sensibly-high value to
account for unexpected edge cases and avoid infinite retry loops.</p>
<p>Set to <tt class="docutils literal"><span class="pre">0</span></tt> to fail on the first retry.</p>
<p>Set to <tt class="docutils literal"><span class="pre">False</span></tt> to disable and imply <tt class="docutils literal"><span class="pre">raise_on_redirect=False</span></tt>.</p>
</li>
<li><strong>connect</strong> (<a class="reference external" href="http://docs.python.org/2.7/library/functions.html#int" title="(in Python v2.7)"><em>int</em></a>) &#8211; <p>How many connection-related errors to retry on.</p>
<p>These are errors raised before the request is sent to the remote server,
which we assume has not triggered the server to process the request.</p>
<p>Set to <tt class="docutils literal"><span class="pre">0</span></tt> to fail on the first retry of this type.</p>
</li>
<li><strong>read</strong> (<a class="reference external" href="http://docs.python.org/2.7/library/functions.html#int" title="(in Python v2.7)"><em>int</em></a>) &#8211; <p>How many times to retry on read errors.</p>
<p>These errors are raised after the request was sent to the server, so the
request may have side-effects.</p>
<p>Set to <tt class="docutils literal"><span class="pre">0</span></tt> to fail on the first retry of this type.</p>
</li>
<li><strong>redirect</strong> (<a class="reference external" href="http://docs.python.org/2.7/library/functions.html#int" title="(in Python v2.7)"><em>int</em></a>) &#8211; <p>How many redirects to perform. Limit this to avoid infinite redirect
loops.</p>
<p>A redirect is a HTTP response with a status code 301, 302, 303, 307 or
308.</p>
<p>Set to <tt class="docutils literal"><span class="pre">0</span></tt> to fail on the first retry of this type.</p>
<p>Set to <tt class="docutils literal"><span class="pre">False</span></tt> to disable and imply <tt class="docutils literal"><span class="pre">raise_on_redirect=False</span></tt>.</p>
</li>
<li><strong>method_whitelist</strong> (<em>iterable</em>) &#8211; <p>Set of uppercased HTTP method verbs that we should retry on.</p>
<p>By default, we only retry on methods which are considered to be
indempotent (multiple requests with the same parameters end with the
same state). See <tt class="xref py py-attr docutils literal"><span class="pre">Retry.DEFAULT_METHOD_WHITELIST</span></tt>.</p>
</li>
<li><strong>status_forcelist</strong> (<em>iterable</em>) &#8211; <p>A set of HTTP status codes that we should force a retry on.</p>
<p>By default, this is disabled with <tt class="docutils literal"><span class="pre">None</span></tt>.</p>
</li>
<li><strong>backoff_factor</strong> (<a class="reference external" href="http://docs.python.org/2.7/library/functions.html#float" title="(in Python v2.7)"><em>float</em></a>) &#8211; <p>A backoff factor to apply between attempts. urllib3 will sleep for:</p>
<div class="highlight-python"><div class="highlight"><pre>{backoff factor} * (2 ^ ({number of total retries} - 1))
</pre></div>
</div>
<p>seconds. If the backoff_factor is 0.1, then <tt class="xref py py-func docutils literal"><span class="pre">sleep()</span></tt> will sleep
for [0.1s, 0.2s, 0.4s, ...] between retries. It will never be longer
than <tt class="xref py py-attr docutils literal"><span class="pre">Retry.MAX_BACKOFF</span></tt>.</p>
<p>By default, backoff is disabled (set to 0).</p>
</li>
<li><strong>raise_on_redirect</strong> (<a class="reference external" href="http://docs.python.org/2.7/library/functions.html#bool" title="(in Python v2.7)"><em>bool</em></a>) &#8211; Whether, if the number of redirects is
exhausted, to raise a MaxRetryError, or to return a response with a
response code in the 3xx range.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="attribute">
<dt id="urllib3.util.retry.Retry.BACKOFF_MAX">
<tt class="descname">BACKOFF_MAX</tt><em class="property"> = 120</em><a class="headerlink" href="#urllib3.util.retry.Retry.BACKOFF_MAX" title="Permalink to this definition">¶</a></dt>
<dd><p>Maximum backoff time.</p>
</dd></dl>

<dl class="classmethod">
<dt id="urllib3.util.retry.Retry.from_int">
<em class="property">classmethod </em><tt class="descname">from_int</tt><big>(</big><em>retries</em>, <em>redirect=True</em>, <em>default=None</em><big>)</big><a class="headerlink" href="#urllib3.util.retry.Retry.from_int" title="Permalink to this definition">¶</a></dt>
<dd><p>Backwards-compatibility for the old retries format.</p>
</dd></dl>

<dl class="method">
<dt id="urllib3.util.retry.Retry.get_backoff_time">
<tt class="descname">get_backoff_time</tt><big>(</big><big>)</big><a class="headerlink" href="#urllib3.util.retry.Retry.get_backoff_time" title="Permalink to this definition">¶</a></dt>
<dd><p>Formula for computing the current backoff</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">float</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="urllib3.util.retry.Retry.increment">
<tt class="descname">increment</tt><big>(</big><em>method=None</em>, <em>url=None</em>, <em>response=None</em>, <em>error=None</em>, <em>_pool=None</em>, <em>_stacktrace=None</em><big>)</big><a class="headerlink" href="#urllib3.util.retry.Retry.increment" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a new Retry object with incremented retry counters.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>response</strong> (<a class="reference internal" href="index.html#urllib3.response.HTTPResponse" title="urllib3.response.HTTPResponse"><tt class="xref py py-class docutils literal"><span class="pre">HTTPResponse</span></tt></a>) &#8211; A response object, or None, if the server did not
return a response.</li>
<li><strong>error</strong> (<em>Exception</em>) &#8211; An error encountered during the request, or
None if the response was received successfully.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">A new <tt class="docutils literal"><span class="pre">Retry</span></tt> object.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="urllib3.util.retry.Retry.is_exhausted">
<tt class="descname">is_exhausted</tt><big>(</big><big>)</big><a class="headerlink" href="#urllib3.util.retry.Retry.is_exhausted" title="Permalink to this definition">¶</a></dt>
<dd><p>Are we out of retries?</p>
</dd></dl>

<dl class="method">
<dt id="urllib3.util.retry.Retry.is_forced_retry">
<tt class="descname">is_forced_retry</tt><big>(</big><em>method</em>, <em>status_code</em><big>)</big><a class="headerlink" href="#urllib3.util.retry.Retry.is_forced_retry" title="Permalink to this definition">¶</a></dt>
<dd><p>Is this method/status code retryable? (Based on method/codes whitelists)</p>
</dd></dl>

<dl class="method">
<dt id="urllib3.util.retry.Retry.sleep">
<tt class="descname">sleep</tt><big>(</big><big>)</big><a class="headerlink" href="#urllib3.util.retry.Retry.sleep" title="Permalink to this definition">¶</a></dt>
<dd><p>Sleep between retry attempts using an exponential backoff.</p>
<p>By default, the backoff factor is 0 and this method will return
immediately.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-urllib3.util.url">
<span id="url-helpers"></span><h5>URL Helpers<a class="headerlink" href="#module-urllib3.util.url" title="Permalink to this headline">¶</a></h5>
<dl class="class">
<dt id="urllib3.util.url.Url">
<em class="property">class </em><tt class="descclassname">urllib3.util.url.</tt><tt class="descname">Url</tt><a class="headerlink" href="#urllib3.util.url.Url" title="Permalink to this definition">¶</a></dt>
<dd><p>Datastructure for representing an HTTP URL. Used as a return value for
<a class="reference internal" href="index.html#urllib3.util.url.parse_url" title="urllib3.util.url.parse_url"><tt class="xref py py-func docutils literal"><span class="pre">parse_url()</span></tt></a>.</p>
<dl class="attribute">
<dt id="urllib3.util.url.Url.hostname">
<tt class="descname">hostname</tt><a class="headerlink" href="#urllib3.util.url.Url.hostname" title="Permalink to this definition">¶</a></dt>
<dd><p>For backwards-compatibility with urlparse. We&#8217;re nice like that.</p>
</dd></dl>

<dl class="attribute">
<dt id="urllib3.util.url.Url.netloc">
<tt class="descname">netloc</tt><a class="headerlink" href="#urllib3.util.url.Url.netloc" title="Permalink to this definition">¶</a></dt>
<dd><p>Network location including host and port</p>
</dd></dl>

<dl class="attribute">
<dt id="urllib3.util.url.Url.request_uri">
<tt class="descname">request_uri</tt><a class="headerlink" href="#urllib3.util.url.Url.request_uri" title="Permalink to this definition">¶</a></dt>
<dd><p>Absolute path including the query string.</p>
</dd></dl>

<dl class="attribute">
<dt id="urllib3.util.url.Url.url">
<tt class="descname">url</tt><a class="headerlink" href="#urllib3.util.url.Url.url" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert self into a url</p>
<p>This function should more or less round-trip with <a class="reference internal" href="index.html#urllib3.util.url.parse_url" title="urllib3.util.url.parse_url"><tt class="xref py py-func docutils literal"><span class="pre">parse_url()</span></tt></a>. The
returned url may not be exactly the same as the url inputted to
<a class="reference internal" href="index.html#urllib3.util.url.parse_url" title="urllib3.util.url.parse_url"><tt class="xref py py-func docutils literal"><span class="pre">parse_url()</span></tt></a>, but it should be equivalent by the RFC (e.g., urls
with a blank port will have : removed).</p>
<p>Example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">U</span> <span class="o">=</span> <span class="n">parse_url</span><span class="p">(</span><span class="s">&#39;http://google.com/mail/&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">U</span><span class="o">.</span><span class="n">url</span>
<span class="go">&#39;http://google.com/mail/&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Url</span><span class="p">(</span><span class="s">&#39;http&#39;</span><span class="p">,</span> <span class="s">&#39;username:password&#39;</span><span class="p">,</span> <span class="s">&#39;host.com&#39;</span><span class="p">,</span> <span class="mi">80</span><span class="p">,</span>
<span class="gp">... </span><span class="s">&#39;/path&#39;</span><span class="p">,</span> <span class="s">&#39;query&#39;</span><span class="p">,</span> <span class="s">&#39;fragment&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">url</span>
<span class="go">&#39;http://username:password@host.com:80/path?query#fragment&#39;</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="urllib3.util.url.get_host">
<tt class="descclassname">urllib3.util.url.</tt><tt class="descname">get_host</tt><big>(</big><em>url</em><big>)</big><a class="headerlink" href="#urllib3.util.url.get_host" title="Permalink to this definition">¶</a></dt>
<dd><p>Deprecated. Use <a class="reference internal" href="index.html#urllib3.util.url.parse_url" title="urllib3.util.url.parse_url"><tt class="xref py py-func docutils literal"><span class="pre">parse_url()</span></tt></a> instead.</p>
</dd></dl>

<dl class="function">
<dt id="urllib3.util.url.parse_url">
<tt class="descclassname">urllib3.util.url.</tt><tt class="descname">parse_url</tt><big>(</big><em>url</em><big>)</big><a class="headerlink" href="#urllib3.util.url.parse_url" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a url, return a parsed <a class="reference internal" href="index.html#urllib3.util.url.Url" title="urllib3.util.url.Url"><tt class="xref py py-class docutils literal"><span class="pre">Url</span></tt></a> namedtuple. Best-effort is
performed to parse incomplete urls. Fields not provided will be None.</p>
<p>Partly backwards-compatible with <a class="reference external" href="http://docs.python.org/2.7/library/urlparse.html#module-urlparse" title="(in Python v2.7)"><tt class="xref py py-mod docutils literal"><span class="pre">urlparse</span></tt></a>.</p>
<p>Example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">parse_url</span><span class="p">(</span><span class="s">&#39;http://google.com/mail/&#39;</span><span class="p">)</span>
<span class="go">Url(scheme=&#39;http&#39;, host=&#39;google.com&#39;, port=None, path=&#39;/mail/&#39;, ...)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">parse_url</span><span class="p">(</span><span class="s">&#39;google.com:80&#39;</span><span class="p">)</span>
<span class="go">Url(scheme=None, host=&#39;google.com&#39;, port=80, path=None, ...)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">parse_url</span><span class="p">(</span><span class="s">&#39;/foo?bar&#39;</span><span class="p">)</span>
<span class="go">Url(scheme=None, host=None, port=None, path=&#39;/foo&#39;, query=&#39;bar&#39;, ...)</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="urllib3.util.url.split_first">
<tt class="descclassname">urllib3.util.url.</tt><tt class="descname">split_first</tt><big>(</big><em>s</em>, <em>delims</em><big>)</big><a class="headerlink" href="#urllib3.util.url.split_first" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a string and an iterable of delimiters, split on the first found
delimiter. Return two split parts and the matched delimiter.</p>
<p>If not found, then the first part is the full input string.</p>
<p>Example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">split_first</span><span class="p">(</span><span class="s">&#39;foo/bar?baz&#39;</span><span class="p">,</span> <span class="s">&#39;?/=&#39;</span><span class="p">)</span>
<span class="go">(&#39;foo&#39;, &#39;bar?baz&#39;, &#39;/&#39;)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">split_first</span><span class="p">(</span><span class="s">&#39;foo/bar?baz&#39;</span><span class="p">,</span> <span class="s">&#39;123&#39;</span><span class="p">)</span>
<span class="go">(&#39;foo/bar?baz&#39;, &#39;&#39;, None)</span>
</pre></div>
</div>
<p>Scales linearly with number of delims. Not ideal for large number of delims.</p>
</dd></dl>

</div>
<div class="section" id="module-urllib3.filepost">
<span id="filepost"></span><h5>Filepost<a class="headerlink" href="#module-urllib3.filepost" title="Permalink to this headline">¶</a></h5>
<dl class="function">
<dt id="urllib3.filepost.choose_boundary">
<tt class="descclassname">urllib3.filepost.</tt><tt class="descname">choose_boundary</tt><big>(</big><big>)</big><a class="headerlink" href="#urllib3.filepost.choose_boundary" title="Permalink to this definition">¶</a></dt>
<dd><p>Our embarassingly-simple replacement for mimetools.choose_boundary.</p>
</dd></dl>

<dl class="function">
<dt id="urllib3.filepost.encode_multipart_formdata">
<tt class="descclassname">urllib3.filepost.</tt><tt class="descname">encode_multipart_formdata</tt><big>(</big><em>fields</em>, <em>boundary=None</em><big>)</big><a class="headerlink" href="#urllib3.filepost.encode_multipart_formdata" title="Permalink to this definition">¶</a></dt>
<dd><p>Encode a dictionary of <tt class="docutils literal"><span class="pre">fields</span></tt> using the multipart/form-data MIME format.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>fields</strong> &#8211; Dictionary of fields or list of (key, <a class="reference internal" href="index.html#urllib3.fields.RequestField" title="urllib3.fields.RequestField"><tt class="xref py py-class docutils literal"><span class="pre">RequestField</span></tt></a>).</li>
<li><strong>boundary</strong> &#8211; If not specified, then a random boundary will be generated using
<a class="reference external" href="http://docs.python.org/2.7/library/mimetools.html#mimetools.choose_boundary" title="(in Python v2.7)"><tt class="xref py py-func docutils literal"><span class="pre">mimetools.choose_boundary()</span></tt></a>.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="urllib3.filepost.iter_field_objects">
<tt class="descclassname">urllib3.filepost.</tt><tt class="descname">iter_field_objects</tt><big>(</big><em>fields</em><big>)</big><a class="headerlink" href="#urllib3.filepost.iter_field_objects" title="Permalink to this definition">¶</a></dt>
<dd><p>Iterate over fields.</p>
<p>Supports list of (k, v) tuples and dicts, and lists of
<a class="reference internal" href="index.html#urllib3.fields.RequestField" title="urllib3.fields.RequestField"><tt class="xref py py-class docutils literal"><span class="pre">RequestField</span></tt></a>.</p>
</dd></dl>

<dl class="function">
<dt id="urllib3.filepost.iter_fields">
<tt class="descclassname">urllib3.filepost.</tt><tt class="descname">iter_fields</tt><big>(</big><em>fields</em><big>)</big><a class="headerlink" href="#urllib3.filepost.iter_fields" title="Permalink to this definition">¶</a></dt>
<dd><div class="deprecated">
<p><span class="versionmodified">Deprecated since version 1.6.</span></p>
</div>
<p>Iterate over fields.</p>
<p>The addition of <a class="reference internal" href="index.html#urllib3.fields.RequestField" title="urllib3.fields.RequestField"><tt class="xref py py-class docutils literal"><span class="pre">RequestField</span></tt></a> makes this function
obsolete. Instead, use <a class="reference internal" href="index.html#urllib3.filepost.iter_field_objects" title="urllib3.filepost.iter_field_objects"><tt class="xref py py-func docutils literal"><span class="pre">iter_field_objects()</span></tt></a>, which returns
<a class="reference internal" href="index.html#urllib3.fields.RequestField" title="urllib3.fields.RequestField"><tt class="xref py py-class docutils literal"><span class="pre">RequestField</span></tt></a> objects.</p>
<p>Supports list of (k, v) tuples and dicts.</p>
</dd></dl>

<span class="target" id="module-urllib3.fields"></span><dl class="class">
<dt id="urllib3.fields.RequestField">
<em class="property">class </em><tt class="descclassname">urllib3.fields.</tt><tt class="descname">RequestField</tt><big>(</big><em>name</em>, <em>data</em>, <em>filename=None</em>, <em>headers=None</em><big>)</big><a class="headerlink" href="#urllib3.fields.RequestField" title="Permalink to this definition">¶</a></dt>
<dd><p>A data container for request body parameters.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>name</strong> &#8211; The name of this request field.</li>
<li><strong>data</strong> &#8211; The data/value body.</li>
<li><strong>filename</strong> &#8211; An optional filename of the request field.</li>
<li><strong>headers</strong> &#8211; An optional dict-like object of headers to initially use for the field.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="classmethod">
<dt id="urllib3.fields.RequestField.from_tuples">
<em class="property">classmethod </em><tt class="descname">from_tuples</tt><big>(</big><em>fieldname</em>, <em>value</em><big>)</big><a class="headerlink" href="#urllib3.fields.RequestField.from_tuples" title="Permalink to this definition">¶</a></dt>
<dd><p>A <a class="reference internal" href="index.html#urllib3.fields.RequestField" title="urllib3.fields.RequestField"><tt class="xref py py-class docutils literal"><span class="pre">RequestField</span></tt></a> factory from old-style tuple parameters.</p>
<p>Supports constructing <a class="reference internal" href="index.html#urllib3.fields.RequestField" title="urllib3.fields.RequestField"><tt class="xref py py-class docutils literal"><span class="pre">RequestField</span></tt></a> from
parameter of key/value strings AND key/filetuple. A filetuple is a
(filename, data, MIME type) tuple where the MIME type is optional.
For example:</p>
<div class="highlight-python"><div class="highlight"><pre>&#39;foo&#39;: &#39;bar&#39;,
&#39;fakefile&#39;: (&#39;foofile.txt&#39;, &#39;contents of foofile&#39;),
&#39;realfile&#39;: (&#39;barfile.txt&#39;, open(&#39;realfile&#39;).read()),
&#39;typedfile&#39;: (&#39;bazfile.bin&#39;, open(&#39;bazfile&#39;).read(), &#39;image/jpeg&#39;),
&#39;nonamefile&#39;: &#39;contents of nonamefile field&#39;,
</pre></div>
</div>
<p>Field names and filenames must be unicode.</p>
</dd></dl>

<dl class="method">
<dt id="urllib3.fields.RequestField.make_multipart">
<tt class="descname">make_multipart</tt><big>(</big><em>content_disposition=None</em>, <em>content_type=None</em>, <em>content_location=None</em><big>)</big><a class="headerlink" href="#urllib3.fields.RequestField.make_multipart" title="Permalink to this definition">¶</a></dt>
<dd><p>Makes this request field into a multipart request field.</p>
<p>This method overrides &#8220;Content-Disposition&#8221;, &#8220;Content-Type&#8221; and
&#8220;Content-Location&#8221; headers to the request parameter.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>content_type</strong> &#8211; The &#8216;Content-Type&#8217; of the request body.</li>
<li><strong>content_location</strong> &#8211; The &#8216;Content-Location&#8217; of the request body.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="urllib3.fields.RequestField.render_headers">
<tt class="descname">render_headers</tt><big>(</big><big>)</big><a class="headerlink" href="#urllib3.fields.RequestField.render_headers" title="Permalink to this definition">¶</a></dt>
<dd><p>Renders the headers for this request field.</p>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="urllib3.fields.format_header_param">
<tt class="descclassname">urllib3.fields.</tt><tt class="descname">format_header_param</tt><big>(</big><em>name</em>, <em>value</em><big>)</big><a class="headerlink" href="#urllib3.fields.format_header_param" title="Permalink to this definition">¶</a></dt>
<dd><p>Helper function to format and quote a single header parameter.</p>
<p>Particularly useful for header parameters which might contain
non-ASCII values, like file names. This follows RFC 2231, as
suggested by RFC 2388 Section 4.4.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>name</strong> &#8211; The name of the parameter, a string expected to be ASCII only.</li>
<li><strong>value</strong> &#8211; The value of the parameter, provided as a unicode string.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="urllib3.fields.guess_content_type">
<tt class="descclassname">urllib3.fields.</tt><tt class="descname">guess_content_type</tt><big>(</big><em>filename</em>, <em>default='application/octet-stream'</em><big>)</big><a class="headerlink" href="#urllib3.fields.guess_content_type" title="Permalink to this definition">¶</a></dt>
<dd><p>Guess the &#8220;Content-Type&#8221; of a file.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>filename</strong> &#8211; The filename to guess the &#8220;Content-Type&#8221; of using <a class="reference external" href="http://docs.python.org/2.7/library/mimetypes.html#module-mimetypes" title="(in Python v2.7)"><tt class="xref py py-mod docutils literal"><span class="pre">mimetypes</span></tt></a>.</li>
<li><strong>default</strong> &#8211; If no &#8220;Content-Type&#8221; can be guessed, default to <cite>default</cite>.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="module-urllib3.request">
<span id="request"></span><h5>Request<a class="headerlink" href="#module-urllib3.request" title="Permalink to this headline">¶</a></h5>
<dl class="class">
<dt id="urllib3.request.RequestMethods">
<em class="property">class </em><tt class="descclassname">urllib3.request.</tt><tt class="descname">RequestMethods</tt><big>(</big><em>headers=None</em><big>)</big><a class="headerlink" href="#urllib3.request.RequestMethods" title="Permalink to this definition">¶</a></dt>
<dd><p>Convenience mixin for classes who implement a <tt class="xref py py-meth docutils literal"><span class="pre">urlopen()</span></tt> method, such
as <a class="reference internal" href="index.html#urllib3.connectionpool.HTTPConnectionPool" title="urllib3.connectionpool.HTTPConnectionPool"><tt class="xref py py-class docutils literal"><span class="pre">HTTPConnectionPool</span></tt></a> and
<a class="reference internal" href="index.html#urllib3.poolmanager.PoolManager" title="urllib3.poolmanager.PoolManager"><tt class="xref py py-class docutils literal"><span class="pre">PoolManager</span></tt></a>.</p>
<p>Provides behavior for making common types of HTTP request methods and
decides which type of request field encoding to use.</p>
<p>Specifically,</p>
<p><a class="reference internal" href="index.html#urllib3.request.RequestMethods.request_encode_url" title="urllib3.request.RequestMethods.request_encode_url"><tt class="xref py py-meth docutils literal"><span class="pre">request_encode_url()</span></tt></a> is for sending requests whose fields are
encoded in the URL (such as GET, HEAD, DELETE).</p>
<p><a class="reference internal" href="index.html#urllib3.request.RequestMethods.request_encode_body" title="urllib3.request.RequestMethods.request_encode_body"><tt class="xref py py-meth docutils literal"><span class="pre">request_encode_body()</span></tt></a> is for sending requests whose fields are
encoded in the <em>body</em> of the request using multipart or www-form-urlencoded
(such as for POST, PUT, PATCH).</p>
<p><a class="reference internal" href="index.html#urllib3.request.RequestMethods.request" title="urllib3.request.RequestMethods.request"><tt class="xref py py-meth docutils literal"><span class="pre">request()</span></tt></a> is for making any kind of request, it will look up the
appropriate encoding format and use one of the above two methods to make
the request.</p>
<p>Initializer parameters:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>headers</strong> &#8211; Headers to include with all requests, unless other headers are given
explicitly.</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="urllib3.request.RequestMethods.request">
<tt class="descname">request</tt><big>(</big><em>method</em>, <em>url</em>, <em>fields=None</em>, <em>headers=None</em>, <em>**urlopen_kw</em><big>)</big><a class="headerlink" href="#urllib3.request.RequestMethods.request" title="Permalink to this definition">¶</a></dt>
<dd><p>Make a request using <tt class="xref py py-meth docutils literal"><span class="pre">urlopen()</span></tt> with the appropriate encoding of
<tt class="docutils literal"><span class="pre">fields</span></tt> based on the <tt class="docutils literal"><span class="pre">method</span></tt> used.</p>
<p>This is a convenience method that requires the least amount of manual
effort. It can be used in most situations, while still having the
option to drop down to more specific methods when necessary, such as
<a class="reference internal" href="index.html#urllib3.request.RequestMethods.request_encode_url" title="urllib3.request.RequestMethods.request_encode_url"><tt class="xref py py-meth docutils literal"><span class="pre">request_encode_url()</span></tt></a>, <a class="reference internal" href="index.html#urllib3.request.RequestMethods.request_encode_body" title="urllib3.request.RequestMethods.request_encode_body"><tt class="xref py py-meth docutils literal"><span class="pre">request_encode_body()</span></tt></a>,
or even the lowest level <tt class="xref py py-meth docutils literal"><span class="pre">urlopen()</span></tt>.</p>
</dd></dl>

<dl class="method">
<dt id="urllib3.request.RequestMethods.request_encode_body">
<tt class="descname">request_encode_body</tt><big>(</big><em>method</em>, <em>url</em>, <em>fields=None</em>, <em>headers=None</em>, <em>encode_multipart=True</em>, <em>multipart_boundary=None</em>, <em>**urlopen_kw</em><big>)</big><a class="headerlink" href="#urllib3.request.RequestMethods.request_encode_body" title="Permalink to this definition">¶</a></dt>
<dd><p>Make a request using <tt class="xref py py-meth docutils literal"><span class="pre">urlopen()</span></tt> with the <tt class="docutils literal"><span class="pre">fields</span></tt> encoded in
the body. This is useful for request methods like POST, PUT, PATCH, etc.</p>
<p>When <tt class="docutils literal"><span class="pre">encode_multipart=True</span></tt> (default), then
<a class="reference internal" href="index.html#urllib3.filepost.encode_multipart_formdata" title="urllib3.filepost.encode_multipart_formdata"><tt class="xref py py-meth docutils literal"><span class="pre">urllib3.filepost.encode_multipart_formdata()</span></tt></a> is used to encode
the payload with the appropriate content type. Otherwise
<tt class="xref py py-meth docutils literal"><span class="pre">urllib.urlencode()</span></tt> is used with the
&#8216;application/x-www-form-urlencoded&#8217; content type.</p>
<p>Multipart encoding must be used when posting files, and it&#8217;s reasonably
safe to use it in other times too. However, it may break request
signing, such as with OAuth.</p>
<p>Supports an optional <tt class="docutils literal"><span class="pre">fields</span></tt> parameter of key/value strings AND
key/filetuple. A filetuple is a (filename, data, MIME type) tuple where
the MIME type is optional. For example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">fields</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">&#39;foo&#39;</span><span class="p">:</span> <span class="s">&#39;bar&#39;</span><span class="p">,</span>
    <span class="s">&#39;fakefile&#39;</span><span class="p">:</span> <span class="p">(</span><span class="s">&#39;foofile.txt&#39;</span><span class="p">,</span> <span class="s">&#39;contents of foofile&#39;</span><span class="p">),</span>
    <span class="s">&#39;realfile&#39;</span><span class="p">:</span> <span class="p">(</span><span class="s">&#39;barfile.txt&#39;</span><span class="p">,</span> <span class="nb">open</span><span class="p">(</span><span class="s">&#39;realfile&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">read</span><span class="p">()),</span>
    <span class="s">&#39;typedfile&#39;</span><span class="p">:</span> <span class="p">(</span><span class="s">&#39;bazfile.bin&#39;</span><span class="p">,</span> <span class="nb">open</span><span class="p">(</span><span class="s">&#39;bazfile&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">read</span><span class="p">(),</span>
                  <span class="s">&#39;image/jpeg&#39;</span><span class="p">),</span>
    <span class="s">&#39;nonamefile&#39;</span><span class="p">:</span> <span class="s">&#39;contents of nonamefile field&#39;</span><span class="p">,</span>
<span class="p">}</span>
</pre></div>
</div>
<p>When uploading a file, providing a filename (the first parameter of the
tuple) is optional but recommended to best mimick behavior of browsers.</p>
<p>Note that if <tt class="docutils literal"><span class="pre">headers</span></tt> are supplied, the &#8216;Content-Type&#8217; header will
be overwritten because it depends on the dynamic random boundary string
which is used to compose the body of the request. The random boundary
string can be explicitly set with the <tt class="docutils literal"><span class="pre">multipart_boundary</span></tt> parameter.</p>
</dd></dl>

<dl class="method">
<dt id="urllib3.request.RequestMethods.request_encode_url">
<tt class="descname">request_encode_url</tt><big>(</big><em>method</em>, <em>url</em>, <em>fields=None</em>, <em>**urlopen_kw</em><big>)</big><a class="headerlink" href="#urllib3.request.RequestMethods.request_encode_url" title="Permalink to this definition">¶</a></dt>
<dd><p>Make a request using <tt class="xref py py-meth docutils literal"><span class="pre">urlopen()</span></tt> with the <tt class="docutils literal"><span class="pre">fields</span></tt> encoded in
the url. This is useful for request methods like GET, HEAD, DELETE, etc.</p>
</dd></dl>

</dd></dl>

<span class="target" id="module-urllib3.util.request"></span><dl class="function">
<dt id="urllib3.util.request.make_headers">
<tt class="descclassname">urllib3.util.request.</tt><tt class="descname">make_headers</tt><big>(</big><em>keep_alive=None</em>, <em>accept_encoding=None</em>, <em>user_agent=None</em>, <em>basic_auth=None</em>, <em>proxy_basic_auth=None</em>, <em>disable_cache=None</em><big>)</big><a class="headerlink" href="#urllib3.util.request.make_headers" title="Permalink to this definition">¶</a></dt>
<dd><p>Shortcuts for generating request headers.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>keep_alive</strong> &#8211; If <tt class="docutils literal"><span class="pre">True</span></tt>, adds &#8216;connection: keep-alive&#8217; header.</li>
<li><strong>accept_encoding</strong> &#8211; Can be a boolean, list, or string.
<tt class="docutils literal"><span class="pre">True</span></tt> translates to &#8216;gzip,deflate&#8217;.
List will get joined by comma.
String will be used as provided.</li>
<li><strong>user_agent</strong> &#8211; String representing the user-agent you want, such as
&#8220;python-urllib3/0.6&#8221;</li>
<li><strong>basic_auth</strong> &#8211; Colon-separated username:password string for &#8216;authorization: basic ...&#8217;
auth header.</li>
<li><strong>proxy_basic_auth</strong> &#8211; Colon-separated username:password string for &#8216;proxy-authorization: basic ...&#8217;
auth header.</li>
<li><strong>disable_cache</strong> &#8211; If <tt class="docutils literal"><span class="pre">True</span></tt>, adds &#8216;cache-control: no-cache&#8217; header.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>Example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">make_headers</span><span class="p">(</span><span class="n">keep_alive</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">user_agent</span><span class="o">=</span><span class="s">&quot;Batman/1.0&quot;</span><span class="p">)</span>
<span class="go">{&#39;connection&#39;: &#39;keep-alive&#39;, &#39;user-agent&#39;: &#39;Batman/1.0&#39;}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">make_headers</span><span class="p">(</span><span class="n">accept_encoding</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="go">{&#39;accept-encoding&#39;: &#39;gzip,deflate&#39;}</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="module-urllib3.response">
<span id="response"></span><h5>Response<a class="headerlink" href="#module-urllib3.response" title="Permalink to this headline">¶</a></h5>
<dl class="class">
<dt id="urllib3.response.DeflateDecoder">
<em class="property">class </em><tt class="descclassname">urllib3.response.</tt><tt class="descname">DeflateDecoder</tt><a class="headerlink" href="#urllib3.response.DeflateDecoder" title="Permalink to this definition">¶</a></dt>
<dd><dl class="method">
<dt id="urllib3.response.DeflateDecoder.decompress">
<tt class="descname">decompress</tt><big>(</big><em>data</em><big>)</big><a class="headerlink" href="#urllib3.response.DeflateDecoder.decompress" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="urllib3.response.GzipDecoder">
<em class="property">class </em><tt class="descclassname">urllib3.response.</tt><tt class="descname">GzipDecoder</tt><a class="headerlink" href="#urllib3.response.GzipDecoder" title="Permalink to this definition">¶</a></dt>
<dd><dl class="method">
<dt id="urllib3.response.GzipDecoder.decompress">
<tt class="descname">decompress</tt><big>(</big><em>data</em><big>)</big><a class="headerlink" href="#urllib3.response.GzipDecoder.decompress" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="urllib3.response.HTTPResponse">
<em class="property">class </em><tt class="descclassname">urllib3.response.</tt><tt class="descname">HTTPResponse</tt><big>(</big><em>body=''</em>, <em>headers=None</em>, <em>status=0</em>, <em>version=0</em>, <em>reason=None</em>, <em>strict=0</em>, <em>preload_content=True</em>, <em>decode_content=True</em>, <em>original_response=None</em>, <em>pool=None</em>, <em>connection=None</em><big>)</big><a class="headerlink" href="#urllib3.response.HTTPResponse" title="Permalink to this definition">¶</a></dt>
<dd><p>HTTP Response container.</p>
<p>Backwards-compatible to httplib&#8217;s HTTPResponse but the response <tt class="docutils literal"><span class="pre">body</span></tt> is
loaded and decoded on-demand when the <tt class="docutils literal"><span class="pre">data</span></tt> property is accessed.  This
class is also compatible with the Python standard library&#8217;s <a class="reference external" href="http://docs.python.org/2.7/library/io.html#module-io" title="(in Python v2.7)"><tt class="xref py py-mod docutils literal"><span class="pre">io</span></tt></a>
module, and can hence be treated as a readable object in the context of that
framework.</p>
<p>Extra parameters for behaviour not present in httplib.HTTPResponse:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>preload_content</strong> &#8211; If True, the response&#8217;s body will be preloaded during construction.</li>
<li><strong>decode_content</strong> &#8211; If True, attempts to decode specific content-encoding&#8217;s based on headers
(like &#8216;gzip&#8217; and &#8216;deflate&#8217;) will be skipped and raw data will be used
instead.</li>
<li><strong>original_response</strong> &#8211; When this HTTPResponse wrapper is generated from an httplib.HTTPResponse
object, it&#8217;s convenient to include the original for debug purposes. It&#8217;s
otherwise unused.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="attribute">
<dt id="urllib3.response.HTTPResponse.CONTENT_DECODERS">
<tt class="descname">CONTENT_DECODERS</tt><em class="property"> = ['gzip', 'deflate']</em><a class="headerlink" href="#urllib3.response.HTTPResponse.CONTENT_DECODERS" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="urllib3.response.HTTPResponse.REDIRECT_STATUSES">
<tt class="descname">REDIRECT_STATUSES</tt><em class="property"> = [301, 302, 303, 307, 308]</em><a class="headerlink" href="#urllib3.response.HTTPResponse.REDIRECT_STATUSES" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="urllib3.response.HTTPResponse.close">
<tt class="descname">close</tt><big>(</big><big>)</big><a class="headerlink" href="#urllib3.response.HTTPResponse.close" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="urllib3.response.HTTPResponse.closed">
<tt class="descname">closed</tt><a class="headerlink" href="#urllib3.response.HTTPResponse.closed" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="urllib3.response.HTTPResponse.data">
<tt class="descname">data</tt><a class="headerlink" href="#urllib3.response.HTTPResponse.data" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="urllib3.response.HTTPResponse.fileno">
<tt class="descname">fileno</tt><big>(</big><big>)</big><a class="headerlink" href="#urllib3.response.HTTPResponse.fileno" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="urllib3.response.HTTPResponse.flush">
<tt class="descname">flush</tt><big>(</big><big>)</big><a class="headerlink" href="#urllib3.response.HTTPResponse.flush" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="classmethod">
<dt id="urllib3.response.HTTPResponse.from_httplib">
<em class="property">classmethod </em><tt class="descname">from_httplib</tt><big>(</big><em>ResponseCls</em>, <em>r</em>, <em>**response_kw</em><big>)</big><a class="headerlink" href="#urllib3.response.HTTPResponse.from_httplib" title="Permalink to this definition">¶</a></dt>
<dd><p>Given an <a class="reference external" href="http://docs.python.org/2.7/library/httplib.html#httplib.HTTPResponse" title="(in Python v2.7)"><tt class="xref py py-class docutils literal"><span class="pre">httplib.HTTPResponse</span></tt></a> instance <tt class="docutils literal"><span class="pre">r</span></tt>, return a
corresponding <a class="reference internal" href="index.html#urllib3.response.HTTPResponse" title="urllib3.response.HTTPResponse"><tt class="xref py py-class docutils literal"><span class="pre">urllib3.response.HTTPResponse</span></tt></a> object.</p>
<p>Remaining parameters are passed to the HTTPResponse constructor, along
with <tt class="docutils literal"><span class="pre">original_response=r</span></tt>.</p>
</dd></dl>

<dl class="method">
<dt id="urllib3.response.HTTPResponse.get_redirect_location">
<tt class="descname">get_redirect_location</tt><big>(</big><big>)</big><a class="headerlink" href="#urllib3.response.HTTPResponse.get_redirect_location" title="Permalink to this definition">¶</a></dt>
<dd><p>Should we redirect and where to?</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">Truthy redirect location string if we got a redirect status
code and valid location. <tt class="docutils literal"><span class="pre">None</span></tt> if redirect status and no
location. <tt class="docutils literal"><span class="pre">False</span></tt> if not a redirect status code.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="urllib3.response.HTTPResponse.getheader">
<tt class="descname">getheader</tt><big>(</big><em>name</em>, <em>default=None</em><big>)</big><a class="headerlink" href="#urllib3.response.HTTPResponse.getheader" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="urllib3.response.HTTPResponse.getheaders">
<tt class="descname">getheaders</tt><big>(</big><big>)</big><a class="headerlink" href="#urllib3.response.HTTPResponse.getheaders" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="urllib3.response.HTTPResponse.read">
<tt class="descname">read</tt><big>(</big><em>amt=None</em>, <em>decode_content=None</em>, <em>cache_content=False</em><big>)</big><a class="headerlink" href="#urllib3.response.HTTPResponse.read" title="Permalink to this definition">¶</a></dt>
<dd><p>Similar to <a class="reference external" href="http://docs.python.org/2.7/library/httplib.html#httplib.HTTPResponse.read" title="(in Python v2.7)"><tt class="xref py py-meth docutils literal"><span class="pre">httplib.HTTPResponse.read()</span></tt></a>, but with two additional
parameters: <tt class="docutils literal"><span class="pre">decode_content</span></tt> and <tt class="docutils literal"><span class="pre">cache_content</span></tt>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>amt</strong> &#8211; How much of the content to read. If specified, caching is skipped
because it doesn&#8217;t make sense to cache partial content as the full
response.</li>
<li><strong>decode_content</strong> &#8211; If True, will attempt to decode the body based on the
&#8216;content-encoding&#8217; header.</li>
<li><strong>cache_content</strong> &#8211; If True, will save the returned data such that the same result is
returned despite of the state of the underlying file object. This
is useful if you want the <tt class="docutils literal"><span class="pre">.data</span></tt> property to continue working
after having <tt class="docutils literal"><span class="pre">.read()</span></tt> the file object. (Overridden if <tt class="docutils literal"><span class="pre">amt</span></tt> is
set.)</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="urllib3.response.HTTPResponse.read_chunked">
<tt class="descname">read_chunked</tt><big>(</big><em>amt=None</em>, <em>decode_content=None</em><big>)</big><a class="headerlink" href="#urllib3.response.HTTPResponse.read_chunked" title="Permalink to this definition">¶</a></dt>
<dd><p>Similar to <a class="reference internal" href="index.html#urllib3.response.HTTPResponse.read" title="urllib3.response.HTTPResponse.read"><tt class="xref py py-meth docutils literal"><span class="pre">HTTPResponse.read()</span></tt></a>, but with an additional
parameter: <tt class="docutils literal"><span class="pre">decode_content</span></tt>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>decode_content</strong> &#8211; If True, will attempt to decode the body based on the
&#8216;content-encoding&#8217; header.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="urllib3.response.HTTPResponse.readable">
<tt class="descname">readable</tt><big>(</big><big>)</big><a class="headerlink" href="#urllib3.response.HTTPResponse.readable" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="urllib3.response.HTTPResponse.readinto">
<tt class="descname">readinto</tt><big>(</big><em>b</em><big>)</big><a class="headerlink" href="#urllib3.response.HTTPResponse.readinto" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="urllib3.response.HTTPResponse.release_conn">
<tt class="descname">release_conn</tt><big>(</big><big>)</big><a class="headerlink" href="#urllib3.response.HTTPResponse.release_conn" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="urllib3.response.HTTPResponse.stream">
<tt class="descname">stream</tt><big>(</big><em>amt=65536</em>, <em>decode_content=None</em><big>)</big><a class="headerlink" href="#urllib3.response.HTTPResponse.stream" title="Permalink to this definition">¶</a></dt>
<dd><p>A generator wrapper for the read() method. A call will block until
<tt class="docutils literal"><span class="pre">amt</span></tt> bytes have been read from the connection or until the
connection is closed.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>amt</strong> &#8211; How much of the content to read. The generator will return up to
much data per iteration, but may return less. This is particularly
likely when using compressed data. However, the empty string will
never be returned.</li>
<li><strong>decode_content</strong> &#8211; If True, will attempt to decode the body based on the
&#8216;content-encoding&#8217; header.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="urllib3.response.HTTPResponse.tell">
<tt class="descname">tell</tt><big>(</big><big>)</big><a class="headerlink" href="#urllib3.response.HTTPResponse.tell" title="Permalink to this definition">¶</a></dt>
<dd><p>Obtain the number of bytes pulled over the wire so far. May differ from
the amount of content returned by :meth:<tt class="docutils literal"><span class="pre">HTTPResponse.read</span></tt> if bytes
are encoded on the wire (e.g, compressed).</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-urllib3.util.ssl_">
<span id="ssl-tls-helpers"></span><h5>SSL/TLS Helpers<a class="headerlink" href="#module-urllib3.util.ssl_" title="Permalink to this headline">¶</a></h5>
<dl class="function">
<dt id="urllib3.util.ssl_.assert_fingerprint">
<tt class="descclassname">urllib3.util.ssl_.</tt><tt class="descname">assert_fingerprint</tt><big>(</big><em>cert</em>, <em>fingerprint</em><big>)</big><a class="headerlink" href="#urllib3.util.ssl_.assert_fingerprint" title="Permalink to this definition">¶</a></dt>
<dd><p>Checks if given fingerprint matches the supplied certificate.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>cert</strong> &#8211; Certificate as bytes object.</li>
<li><strong>fingerprint</strong> &#8211; Fingerprint as string of hexdigits, can be interspersed by colons.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="urllib3.util.ssl_.create_urllib3_context">
<tt class="descclassname">urllib3.util.ssl_.</tt><tt class="descname">create_urllib3_context</tt><big>(</big><em>ssl_version=None</em>, <em>cert_reqs=None</em>, <em>options=None</em>, <em>ciphers=None</em><big>)</big><a class="headerlink" href="#urllib3.util.ssl_.create_urllib3_context" title="Permalink to this definition">¶</a></dt>
<dd><p>All arguments have the same meaning as <tt class="docutils literal"><span class="pre">ssl_wrap_socket</span></tt>.</p>
<p>By default, this function does a lot of the same work that
<tt class="docutils literal"><span class="pre">ssl.create_default_context</span></tt> does on Python 3.4+. It:</p>
<ul class="simple">
<li>Disables SSLv2, SSLv3, and compression</li>
<li>Sets a restricted set of server ciphers</li>
</ul>
<p>If you wish to enable SSLv3, you can do:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">urllib3.util</span> <span class="kn">import</span> <span class="n">ssl_</span>
<span class="n">context</span> <span class="o">=</span> <span class="n">ssl_</span><span class="o">.</span><span class="n">create_urllib3_context</span><span class="p">()</span>
<span class="n">context</span><span class="o">.</span><span class="n">options</span> <span class="o">&amp;=</span> <span class="o">~</span><span class="n">ssl_</span><span class="o">.</span><span class="n">OP_NO_SSLv3</span>
</pre></div>
</div>
<p>You can do the same to enable compression (substituting <tt class="docutils literal"><span class="pre">COMPRESSION</span></tt>
for <tt class="docutils literal"><span class="pre">SSLv3</span></tt> in the last line above).</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>ssl_version</strong> &#8211; The desired protocol version to use. This will default to
PROTOCOL_SSLv23 which will negotiate the highest protocol that both
the server and your installation of OpenSSL support.</li>
<li><strong>cert_reqs</strong> &#8211; Whether to require the certificate verification. This defaults to
<tt class="docutils literal"><span class="pre">ssl.CERT_REQUIRED</span></tt>.</li>
<li><strong>options</strong> &#8211; Specific OpenSSL options. These default to <tt class="docutils literal"><span class="pre">ssl.OP_NO_SSLv2</span></tt>,
<tt class="docutils literal"><span class="pre">ssl.OP_NO_SSLv3</span></tt>, <tt class="docutils literal"><span class="pre">ssl.OP_NO_COMPRESSION</span></tt>.</li>
<li><strong>ciphers</strong> &#8211; Which cipher suites to allow the server to select.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">Constructed SSLContext object with specified options</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">SSLContext</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="urllib3.util.ssl_.resolve_cert_reqs">
<tt class="descclassname">urllib3.util.ssl_.</tt><tt class="descname">resolve_cert_reqs</tt><big>(</big><em>candidate</em><big>)</big><a class="headerlink" href="#urllib3.util.ssl_.resolve_cert_reqs" title="Permalink to this definition">¶</a></dt>
<dd><p>Resolves the argument to a numeric constant, which can be passed to
the wrap_socket function/method from the ssl module.
Defaults to <a class="reference external" href="http://docs.python.org/2.7/library/ssl.html#ssl.CERT_NONE" title="(in Python v2.7)"><tt class="xref py py-data docutils literal"><span class="pre">ssl.CERT_NONE</span></tt></a>.
If given a string it is assumed to be the name of the constant in the
<a class="reference external" href="http://docs.python.org/2.7/library/ssl.html#module-ssl" title="(in Python v2.7)"><tt class="xref py py-mod docutils literal"><span class="pre">ssl</span></tt></a> module or its abbrevation.
(So you can specify <cite>REQUIRED</cite> instead of <cite>CERT_REQUIRED</cite>.
If it&#8217;s neither <cite>None</cite> nor a string we assume it is already the numeric
constant which can directly be passed to wrap_socket.</p>
</dd></dl>

<dl class="function">
<dt id="urllib3.util.ssl_.resolve_ssl_version">
<tt class="descclassname">urllib3.util.ssl_.</tt><tt class="descname">resolve_ssl_version</tt><big>(</big><em>candidate</em><big>)</big><a class="headerlink" href="#urllib3.util.ssl_.resolve_ssl_version" title="Permalink to this definition">¶</a></dt>
<dd><p>like resolve_cert_reqs</p>
</dd></dl>

<dl class="function">
<dt id="urllib3.util.ssl_.ssl_wrap_socket">
<tt class="descclassname">urllib3.util.ssl_.</tt><tt class="descname">ssl_wrap_socket</tt><big>(</big><em>sock</em>, <em>keyfile=None</em>, <em>certfile=None</em>, <em>cert_reqs=None</em>, <em>ca_certs=None</em>, <em>server_hostname=None</em>, <em>ssl_version=None</em>, <em>ciphers=None</em>, <em>ssl_context=None</em><big>)</big><a class="headerlink" href="#urllib3.util.ssl_.ssl_wrap_socket" title="Permalink to this definition">¶</a></dt>
<dd><p>All arguments except for server_hostname and ssl_context have the same
meaning as they do when using <a class="reference external" href="http://docs.python.org/2.7/library/ssl.html#ssl.wrap_socket" title="(in Python v2.7)"><tt class="xref py py-func docutils literal"><span class="pre">ssl.wrap_socket()</span></tt></a>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>server_hostname</strong> &#8211; When SNI is supported, the expected hostname of the certificate</li>
<li><strong>ssl_context</strong> &#8211; A pre-made <tt class="xref py py-class docutils literal"><span class="pre">SSLContext</span></tt> object. If none is provided, one will
be created using <a class="reference internal" href="index.html#urllib3.util.ssl_.create_urllib3_context" title="urllib3.util.ssl_.create_urllib3_context"><tt class="xref py py-func docutils literal"><span class="pre">create_urllib3_context()</span></tt></a>.</li>
<li><strong>ciphers</strong> &#8211; A string of ciphers we wish the client to support. This is not
supported on Python 2.6 as the ssl module does not support it.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
</div>
<span id="document-exceptions"></span><div class="section" id="exceptions">
<h4>Exceptions<a class="headerlink" href="#exceptions" title="Permalink to this headline">¶</a></h4>
<p>Custom exceptions defined by urllib3</p>
<span class="target" id="module-urllib3.exceptions"></span><dl class="exception">
<dt id="urllib3.exceptions.ClosedPoolError">
<em class="property">exception </em><tt class="descclassname">urllib3.exceptions.</tt><tt class="descname">ClosedPoolError</tt><big>(</big><em>pool</em>, <em>message</em><big>)</big><a class="headerlink" href="#urllib3.exceptions.ClosedPoolError" title="Permalink to this definition">¶</a></dt>
<dd><p>Raised when a request enters a pool after the pool has been closed.</p>
</dd></dl>

<dl class="exception">
<dt id="urllib3.exceptions.ConnectTimeoutError">
<em class="property">exception </em><tt class="descclassname">urllib3.exceptions.</tt><tt class="descname">ConnectTimeoutError</tt><a class="headerlink" href="#urllib3.exceptions.ConnectTimeoutError" title="Permalink to this definition">¶</a></dt>
<dd><p>Raised when a socket timeout occurs while connecting to a server</p>
</dd></dl>

<dl class="attribute">
<dt id="urllib3.exceptions.ConnectionError">
<tt class="descclassname">urllib3.exceptions.</tt><tt class="descname">ConnectionError</tt><a class="headerlink" href="#urllib3.exceptions.ConnectionError" title="Permalink to this definition">¶</a></dt>
<dd><p>Renamed to ProtocolError but aliased for backwards compatibility.</p>
<p>alias of <a class="reference internal" href="index.html#urllib3.exceptions.ProtocolError" title="urllib3.exceptions.ProtocolError"><tt class="xref py py-class docutils literal"><span class="pre">ProtocolError</span></tt></a></p>
</dd></dl>

<dl class="exception">
<dt id="urllib3.exceptions.DecodeError">
<em class="property">exception </em><tt class="descclassname">urllib3.exceptions.</tt><tt class="descname">DecodeError</tt><a class="headerlink" href="#urllib3.exceptions.DecodeError" title="Permalink to this definition">¶</a></dt>
<dd><p>Raised when automatic decoding based on Content-Type fails.</p>
</dd></dl>

<dl class="exception">
<dt id="urllib3.exceptions.EmptyPoolError">
<em class="property">exception </em><tt class="descclassname">urllib3.exceptions.</tt><tt class="descname">EmptyPoolError</tt><big>(</big><em>pool</em>, <em>message</em><big>)</big><a class="headerlink" href="#urllib3.exceptions.EmptyPoolError" title="Permalink to this definition">¶</a></dt>
<dd><p>Raised when a pool runs out of connections and no more are allowed.</p>
</dd></dl>

<dl class="exception">
<dt id="urllib3.exceptions.HTTPError">
<em class="property">exception </em><tt class="descclassname">urllib3.exceptions.</tt><tt class="descname">HTTPError</tt><a class="headerlink" href="#urllib3.exceptions.HTTPError" title="Permalink to this definition">¶</a></dt>
<dd><p>Base exception used by this module.</p>
</dd></dl>

<dl class="exception">
<dt id="urllib3.exceptions.HTTPWarning">
<em class="property">exception </em><tt class="descclassname">urllib3.exceptions.</tt><tt class="descname">HTTPWarning</tt><a class="headerlink" href="#urllib3.exceptions.HTTPWarning" title="Permalink to this definition">¶</a></dt>
<dd><p>Base warning used by this module.</p>
</dd></dl>

<dl class="exception">
<dt id="urllib3.exceptions.HostChangedError">
<em class="property">exception </em><tt class="descclassname">urllib3.exceptions.</tt><tt class="descname">HostChangedError</tt><big>(</big><em>pool</em>, <em>url</em>, <em>retries=3</em><big>)</big><a class="headerlink" href="#urllib3.exceptions.HostChangedError" title="Permalink to this definition">¶</a></dt>
<dd><p>Raised when an existing pool gets a request for a foreign host.</p>
</dd></dl>

<dl class="exception">
<dt id="urllib3.exceptions.InsecurePlatformWarning">
<em class="property">exception </em><tt class="descclassname">urllib3.exceptions.</tt><tt class="descname">InsecurePlatformWarning</tt><a class="headerlink" href="#urllib3.exceptions.InsecurePlatformWarning" title="Permalink to this definition">¶</a></dt>
<dd><p>Warned when certain SSL configuration is not available on a platform.</p>
</dd></dl>

<dl class="exception">
<dt id="urllib3.exceptions.InsecureRequestWarning">
<em class="property">exception </em><tt class="descclassname">urllib3.exceptions.</tt><tt class="descname">InsecureRequestWarning</tt><a class="headerlink" href="#urllib3.exceptions.InsecureRequestWarning" title="Permalink to this definition">¶</a></dt>
<dd><p>Warned when making an unverified HTTPS request.</p>
</dd></dl>

<dl class="exception">
<dt id="urllib3.exceptions.LocationParseError">
<em class="property">exception </em><tt class="descclassname">urllib3.exceptions.</tt><tt class="descname">LocationParseError</tt><big>(</big><em>location</em><big>)</big><a class="headerlink" href="#urllib3.exceptions.LocationParseError" title="Permalink to this definition">¶</a></dt>
<dd><p>Raised when get_host or similar fails to parse the URL input.</p>
</dd></dl>

<dl class="exception">
<dt id="urllib3.exceptions.LocationValueError">
<em class="property">exception </em><tt class="descclassname">urllib3.exceptions.</tt><tt class="descname">LocationValueError</tt><a class="headerlink" href="#urllib3.exceptions.LocationValueError" title="Permalink to this definition">¶</a></dt>
<dd><p>Raised when there is something wrong with a given URL input.</p>
</dd></dl>

<dl class="exception">
<dt id="urllib3.exceptions.MaxRetryError">
<em class="property">exception </em><tt class="descclassname">urllib3.exceptions.</tt><tt class="descname">MaxRetryError</tt><big>(</big><em>pool</em>, <em>url</em>, <em>reason=None</em><big>)</big><a class="headerlink" href="#urllib3.exceptions.MaxRetryError" title="Permalink to this definition">¶</a></dt>
<dd><p>Raised when the maximum number of retries is exceeded.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>pool</strong> (<a class="reference internal" href="index.html#urllib3.connectionpool.HTTPConnectionPool" title="urllib3.connectionpool.HTTPConnectionPool"><tt class="xref py py-class docutils literal"><span class="pre">HTTPConnectionPool</span></tt></a>) &#8211; The connection pool</li>
<li><strong>url</strong> (<a class="reference external" href="http://docs.python.org/2.7/library/string.html#module-string" title="(in Python v2.7)"><em>string</em></a>) &#8211; The requested Url</li>
<li><strong>reason</strong> (<a class="reference external" href="http://docs.python.org/2.7/library/exceptions.html#exceptions.Exception" title="(in Python v2.7)"><em>exceptions.Exception</em></a>) &#8211; The underlying error</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="exception">
<dt id="urllib3.exceptions.PoolError">
<em class="property">exception </em><tt class="descclassname">urllib3.exceptions.</tt><tt class="descname">PoolError</tt><big>(</big><em>pool</em>, <em>message</em><big>)</big><a class="headerlink" href="#urllib3.exceptions.PoolError" title="Permalink to this definition">¶</a></dt>
<dd><p>Base exception for errors caused within a pool.</p>
</dd></dl>

<dl class="exception">
<dt id="urllib3.exceptions.ProtocolError">
<em class="property">exception </em><tt class="descclassname">urllib3.exceptions.</tt><tt class="descname">ProtocolError</tt><a class="headerlink" href="#urllib3.exceptions.ProtocolError" title="Permalink to this definition">¶</a></dt>
<dd><p>Raised when something unexpected happens mid-request/response.</p>
</dd></dl>

<dl class="exception">
<dt id="urllib3.exceptions.ProxyError">
<em class="property">exception </em><tt class="descclassname">urllib3.exceptions.</tt><tt class="descname">ProxyError</tt><a class="headerlink" href="#urllib3.exceptions.ProxyError" title="Permalink to this definition">¶</a></dt>
<dd><p>Raised when the connection to a proxy fails.</p>
</dd></dl>

<dl class="exception">
<dt id="urllib3.exceptions.ReadTimeoutError">
<em class="property">exception </em><tt class="descclassname">urllib3.exceptions.</tt><tt class="descname">ReadTimeoutError</tt><big>(</big><em>pool</em>, <em>url</em>, <em>message</em><big>)</big><a class="headerlink" href="#urllib3.exceptions.ReadTimeoutError" title="Permalink to this definition">¶</a></dt>
<dd><p>Raised when a socket timeout occurs while receiving data from a server</p>
</dd></dl>

<dl class="exception">
<dt id="urllib3.exceptions.RequestError">
<em class="property">exception </em><tt class="descclassname">urllib3.exceptions.</tt><tt class="descname">RequestError</tt><big>(</big><em>pool</em>, <em>url</em>, <em>message</em><big>)</big><a class="headerlink" href="#urllib3.exceptions.RequestError" title="Permalink to this definition">¶</a></dt>
<dd><p>Base exception for PoolErrors that have associated URLs.</p>
</dd></dl>

<dl class="exception">
<dt id="urllib3.exceptions.ResponseError">
<em class="property">exception </em><tt class="descclassname">urllib3.exceptions.</tt><tt class="descname">ResponseError</tt><a class="headerlink" href="#urllib3.exceptions.ResponseError" title="Permalink to this definition">¶</a></dt>
<dd><p>Used as a container for an error reason supplied in a MaxRetryError.</p>
</dd></dl>

<dl class="exception">
<dt id="urllib3.exceptions.ResponseNotChunked">
<em class="property">exception </em><tt class="descclassname">urllib3.exceptions.</tt><tt class="descname">ResponseNotChunked</tt><a class="headerlink" href="#urllib3.exceptions.ResponseNotChunked" title="Permalink to this definition">¶</a></dt>
<dd><p>Response needs to be chunked in order to read it as chunks.</p>
</dd></dl>

<dl class="exception">
<dt id="urllib3.exceptions.SSLError">
<em class="property">exception </em><tt class="descclassname">urllib3.exceptions.</tt><tt class="descname">SSLError</tt><a class="headerlink" href="#urllib3.exceptions.SSLError" title="Permalink to this definition">¶</a></dt>
<dd><p>Raised when SSL certificate fails in an HTTPS connection.</p>
</dd></dl>

<dl class="exception">
<dt id="urllib3.exceptions.SecurityWarning">
<em class="property">exception </em><tt class="descclassname">urllib3.exceptions.</tt><tt class="descname">SecurityWarning</tt><a class="headerlink" href="#urllib3.exceptions.SecurityWarning" title="Permalink to this definition">¶</a></dt>
<dd><p>Warned when perfoming security reducing actions</p>
</dd></dl>

<dl class="exception">
<dt id="urllib3.exceptions.SystemTimeWarning">
<em class="property">exception </em><tt class="descclassname">urllib3.exceptions.</tt><tt class="descname">SystemTimeWarning</tt><a class="headerlink" href="#urllib3.exceptions.SystemTimeWarning" title="Permalink to this definition">¶</a></dt>
<dd><p>Warned when system time is suspected to be wrong</p>
</dd></dl>

<dl class="exception">
<dt id="urllib3.exceptions.TimeoutError">
<em class="property">exception </em><tt class="descclassname">urllib3.exceptions.</tt><tt class="descname">TimeoutError</tt><a class="headerlink" href="#urllib3.exceptions.TimeoutError" title="Permalink to this definition">¶</a></dt>
<dd><p>Raised when a socket timeout error occurs.</p>
<p>Catching this error will catch both <a class="reference internal" href="index.html#urllib3.exceptions.ReadTimeoutError" title="urllib3.exceptions.ReadTimeoutError"><tt class="xref py py-exc docutils literal"><span class="pre">ReadTimeoutErrors</span></tt></a> and <a class="reference internal" href="index.html#urllib3.exceptions.ConnectTimeoutError" title="urllib3.exceptions.ConnectTimeoutError"><tt class="xref py py-exc docutils literal"><span class="pre">ConnectTimeoutErrors</span></tt></a>.</p>
</dd></dl>

<dl class="exception">
<dt id="urllib3.exceptions.TimeoutStateError">
<em class="property">exception </em><tt class="descclassname">urllib3.exceptions.</tt><tt class="descname">TimeoutStateError</tt><a class="headerlink" href="#urllib3.exceptions.TimeoutStateError" title="Permalink to this definition">¶</a></dt>
<dd><p>Raised when passing an invalid state to a timeout</p>
</dd></dl>

</div>
</div>
</div>
<div class="section" id="contrib-modules">
<h3>Contrib Modules<a class="headerlink" href="#contrib-modules" title="Permalink to this headline">¶</a></h3>
<p>These modules implement various extra features, that may not be ready for
prime time.</p>
<div class="toctree-wrapper compound">
<span id="document-contrib"></span><div class="section" id="contrib-modules">
<span id="id1"></span><h4>Contrib Modules<a class="headerlink" href="#contrib-modules" title="Permalink to this headline">¶</a></h4>
<p>These modules implement various extra features, that may not be ready for
prime time.</p>
<div class="section" id="module-urllib3.contrib.pyopenssl">
<span id="sni-support-for-python-2"></span><span id="pyopenssl"></span><h5>SNI-support for Python 2<a class="headerlink" href="#module-urllib3.contrib.pyopenssl" title="Permalink to this headline">¶</a></h5>
<p>SSL with <a class="reference external" href="https://en.wikipedia.org/wiki/Server_Name_Indication">SNI</a>-support for Python 2. Follow these instructions if you would
like to verify SSL certificates in Python 2. Note, the default libraries do
<em>not</em> do certificate checking; you need to do additional work to validate
certificates yourself.</p>
<p>This needs the following packages installed:</p>
<ul class="simple">
<li>pyOpenSSL (tested with 0.13)</li>
<li>ndg-httpsclient (tested with 0.3.2)</li>
<li>pyasn1 (tested with 0.1.6)</li>
</ul>
<p>You can install them with the following command:</p>
<blockquote>
<div>pip install pyopenssl ndg-httpsclient pyasn1</div></blockquote>
<p>To activate certificate checking, call
<tt class="xref py py-func docutils literal"><span class="pre">inject_into_urllib3()</span></tt> from your Python code
before you begin making HTTP requests. This can be done in a <tt class="docutils literal"><span class="pre">sitecustomize</span></tt>
module, or at any other time before your application begins using <tt class="docutils literal"><span class="pre">urllib3</span></tt>,
like this:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">try</span><span class="p">:</span>
    <span class="kn">import</span> <span class="nn">urllib3.contrib.pyopenssl</span>
    <span class="n">urllib3</span><span class="o">.</span><span class="n">contrib</span><span class="o">.</span><span class="n">pyopenssl</span><span class="o">.</span><span class="n">inject_into_urllib3</span><span class="p">()</span>
<span class="k">except</span> <span class="ne">ImportError</span><span class="p">:</span>
    <span class="k">pass</span>
</pre></div>
</div>
<p>Now you can use <tt class="xref py py-mod docutils literal"><span class="pre">urllib3</span></tt> as you normally would, and it will support SNI
when the required modules are installed.</p>
<p>Activating this module also has the positive side effect of disabling SSL/TLS
compression in Python 2 (see <a class="reference external" href="https://en.wikipedia.org/wiki/CRIME_(security_exploit)">CRIME attack</a>).</p>
<p>If you want to configure the default list of supported cipher suites, you can
set the <tt class="docutils literal"><span class="pre">urllib3.contrib.pyopenssl.DEFAULT_SSL_CIPHER_LIST</span></tt> variable.</p>
<div class="section" id="module-variables">
<h6>Module Variables<a class="headerlink" href="#module-variables" title="Permalink to this headline">¶</a></h6>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name" colspan="2">var DEFAULT_SSL_CIPHER_LIST:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">The list of supported SSL/TLS cipher suites.</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="section" id="contributing">
<h2>Contributing<a class="headerlink" href="#contributing" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple">
<li><a class="reference external" href="https://github.com/shazow/urllib3/issues">Check for open issues</a> or open
a fresh issue to start a discussion around a feature idea or a bug. There is
a <em>Contributor Friendly</em> tag for issues that should be ideal for people who
are not very familiar with the codebase yet.</li>
<li>Fork the <a class="reference external" href="https://github.com/shazow/urllib3">urllib3 repository on Github</a>
to start making your changes.</li>
<li>Write a test which shows that the bug was fixed or that the feature works
as expected.</li>
<li>Send a pull request and bug the maintainer until it gets merged and published.
:) Make sure to add yourself to <tt class="docutils literal"><span class="pre">CONTRIBUTORS.txt</span></tt>.</li>
</ol>
</div>
<div class="section" id="sponsorship">
<h2>Sponsorship<a class="headerlink" href="#sponsorship" title="Permalink to this headline">¶</a></h2>
<p>Please consider sponsoring urllib3 development, especially if your company
benefits from this library.</p>
<ul>
<li><p class="first"><strong>Project Grant</strong>: A grant for contiguous full-time development has the
biggest impact for progress. Periods of  3 to 10 days allow a contributor to
tackle substantial complex issues which are otherwise left to linger until
somebody can&#8217;t afford to not fix them.</p>
<p>Contact <a class="reference external" href="https://github.com/shazow">&#64;shazow</a> to arrange a grant for a core
contributor.</p>
</li>
<li><p class="first"><strong>One-off</strong>: Development will continue regardless of funding, but donations help move
things further along quicker as the maintainer can allocate more time off to
work on urllib3 specifically.</p>
<a href="https://donorbox.org/personal-sponsor-urllib3" style="background-color:#1275ff;color:#fff;text-decoration:none;font-family:Verdana,sans-serif;display:inline-block;font-size:14px;padding:7px 16px;border-radius:5px;margin-right:2em;vertical-align:top;border:1px solid rgba(160,160,160,0.5);background-image:linear-gradient(#7dc5ee,#008cdd 85%,#30a2e4);box-shadow:inset 0 1px 0 rgba(255,255,255,0.25);">Sponsor with Credit Card</a>

<a class="coinbase-button" data-code="137087702cf2e77ce400d53867b164e6" href="https://coinbase.com/checkouts/137087702cf2e77ce400d53867b164e6">Sponsor with Bitcoin</a><script src="https://coinbase.com/assets/button.js" type="text/javascript"></script></li>
<li><p class="first"><strong>Recurring</strong>: You&#8217;re welcome to <a class="reference external" href="https://www.gittip.com/shazow/">support the maintainer on Gittip</a>.</p>
</li>
</ul>
<div class="section" id="recent-sponsors">
<h3>Recent Sponsors<a class="headerlink" href="#recent-sponsors" title="Permalink to this headline">¶</a></h3>
<p>Huge thanks to all the companies and individuals who financially contributed to
the development of urllib3. Please send a PR if you&#8217;ve donated and would like
to be listed.</p>
<ul class="simple">
<li><a class="reference external" href="https://stripe.com/">Stripe</a> (June 23, 2014)</li>
</ul>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html#document-index">Table Of Contents</a></h3>
  <ul>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-pools">ConnectionPools</a><ul>
<li class="toctree-l2"><a class="reference internal" href="index.html#helpers">Helpers</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#api">API</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#related-classes">Related Classes</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-managers">PoolManager</a><ul>
<li class="toctree-l2"><a class="reference internal" href="index.html#api">API</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="index.html#proxymanager">ProxyManager</a><ul>
<li class="toctree-l2"><a class="reference internal" href="index.html#id1">API</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-security">Security: Verified HTTPS with SSL/TLS</a><ul>
<li class="toctree-l2"><a class="reference internal" href="index.html#python-with-ssl-enabled">Python with SSL enabled</a><ul>
<li class="toctree-l3"><a class="reference internal" href="index.html#enabling-ssl-on-google-appengine">Enabling SSL on Google AppEngine</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="index.html#using-certifi-with-urllib3">Using Certifi with urllib3</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#using-your-system-s-root-certificates">Using your system&#8217;s root certificates</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#openssl-pyopenssl">OpenSSL / PyOpenSSL</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#insecurerequestwarning">InsecureRequestWarning</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#insecureplatformwarning">InsecurePlatformWarning</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-helpers">Helpers</a><ul>
<li class="toctree-l2"><a class="reference internal" href="index.html#module-urllib3.util.timeout">Timeouts</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#module-urllib3.util.retry">Retries</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#module-urllib3.util.url">URL Helpers</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#module-urllib3.filepost">Filepost</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#module-urllib3.request">Request</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#module-urllib3.response">Response</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#module-urllib3.util.ssl_">SSL/TLS Helpers</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-collections">Collections</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-contrib">Contrib Modules</a><ul>
<li class="toctree-l2"><a class="reference internal" href="index.html#module-urllib3.contrib.pyopenssl">SNI-support for Python 2</a><ul>
<li class="toctree-l3"><a class="reference internal" href="index.html#module-variables">Module Variables</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-security">Security: Verified HTTPS with SSL/TLS</a><ul>
<li class="toctree-l2"><a class="reference internal" href="index.html#python-with-ssl-enabled">Python with SSL enabled</a><ul>
<li class="toctree-l3"><a class="reference internal" href="index.html#enabling-ssl-on-google-appengine">Enabling SSL on Google AppEngine</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="index.html#using-certifi-with-urllib3">Using Certifi with urllib3</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#using-your-system-s-root-certificates">Using your system&#8217;s root certificates</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#openssl-pyopenssl">OpenSSL / PyOpenSSL</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#insecurerequestwarning">InsecureRequestWarning</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#insecureplatformwarning">InsecurePlatformWarning</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-helpers">Helpers</a><ul>
<li class="toctree-l2"><a class="reference internal" href="index.html#module-urllib3.util.timeout">Timeouts</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#module-urllib3.util.retry">Retries</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#module-urllib3.util.url">URL Helpers</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#module-urllib3.filepost">Filepost</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#module-urllib3.request">Request</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#module-urllib3.response">Response</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#module-urllib3.util.ssl_">SSL/TLS Helpers</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-exceptions">Exceptions</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-contrib">Contrib Modules</a><ul>
<li class="toctree-l2"><a class="reference internal" href="index.html#module-urllib3.contrib.pyopenssl">SNI-support for Python 2</a><ul>
<li class="toctree-l3"><a class="reference internal" href="index.html#module-variables">Module Variables</a></li>
</ul>
</li>
</ul>
</li>
</ul>

<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li><a href="index.html#document-index">urllib3 1.10.2 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2015, Andrey Petrov.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.2.
    </div>
  </body>
</html>
